(self.webpackChunkcos_ui=self.webpackChunkcos_ui||[]).push([[693],{21078:(e,t,n)=>{var r=n(62488),o=n(37285);e.exports=function e(t,n,s,i,a){var l=-1,u=t.length;for(s||(s=o),a||(a=[]);++l<u;){var d=t[l];n>0&&s(d)?n>1?e(d,n-1,s,i,a):r(a,d):i||(a[a.length]=d)}return a}},47816:(e,t,n)=>{var r=n(28483),o=n(3674);e.exports=function(e,t){return e&&r(e,t,o)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},2958:(e,t,n)=>{var r=n(46384),o=n(90939);e.exports=function(e,t,n,s){var i=n.length,a=i,l=!s;if(null==e)return!a;for(e=Object(e);i--;){var u=n[i];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var d=(u=n[i])[0],c=e[d],h=u[1];if(l&&u[2]){if(void 0===c&&!(d in e))return!1}else{var m=new r;if(s)var p=s(c,h,d,e,t,m);if(!(void 0===p?o(h,c,3,s,m):p))return!1}}return!0}},67206:(e,t,n)=>{var r=n(91573),o=n(16432),s=n(6557),i=n(1469),a=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):a(e)}},91573:(e,t,n)=>{var r=n(2958),o=n(1499),s=n(42634);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:(e,t,n)=>{var r=n(90939),o=n(27361),s=n(79095),i=n(15403),a=n(89162),l=n(42634),u=n(40327);e.exports=function(e,t){return i(e)&&a(t)?l(u(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?s(n,e):r(t,i,3)}}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,n)=>{var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},10611:(e,t,n)=>{var r=n(34865),o=n(71811),s=n(65776),i=n(13218),a=n(40327);e.exports=function(e,t,n,l){if(!i(e))return e;for(var u=-1,d=(t=o(t,e)).length,c=d-1,h=e;null!=h&&++u<d;){var m=a(t[u]),p=n;if("__proto__"===m||"constructor"===m||"prototype"===m)return e;if(u!=c){var g=h[m];void 0===(p=l?l(g,m,h):void 0)&&(p=i(g)?g:s(t[u+1])?[]:{})}r(h,m,p),h=h[m]}return e}},57406:(e,t,n)=>{var r=n(71811),o=n(10928),s=n(40292),i=n(40327);e.exports=function(e,t){return t=r(t,e),null==(e=s(e,t))||delete e[i(o(t))]}},60696:(e,t,n)=>{var r=n(68630);e.exports=function(e){return r(e)?void 0:e}},99021:(e,t,n)=>{var r=n(85564),o=n(45357),s=n(30061);e.exports=function(e){return s(o(e,void 0,r),e+"")}},1499:(e,t,n)=>{var r=n(89162),o=n(3674);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,r(i)]}return t}},222:(e,t,n)=>{var r=n(71811),o=n(35694),s=n(1469),i=n(65776),a=n(41780),l=n(40327);e.exports=function(e,t,n){for(var u=-1,d=(t=r(t,e)).length,c=!1;++u<d;){var h=l(t[u]);if(!(c=null!=e&&n(e,h)))break;e=e[h]}return c||++u!=d?c:!!(d=null==e?0:e.length)&&a(d)&&i(h,d)&&(s(e)||o(e))}},37285:(e,t,n)=>{var r=n(62705),o=n(35694),s=n(1469),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||o(e)||!!(i&&e&&e[i])}},89162:(e,t,n)=>{var r=n(13218);e.exports=function(e){return e==e&&!r(e)}},42634:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},40292:(e,t,n)=>{var r=n(97786),o=n(14259);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},66678:(e,t,n)=>{var r=n(85990);e.exports=function(e){return r(e,4)}},85564:(e,t,n)=>{var r=n(21078);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},79095:(e,t,n)=>{var r=n(13),o=n(222);e.exports=function(e,t){return null!=e&&o(e,t,r)}},10928:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},66604:(e,t,n)=>{var r=n(89465),o=n(47816),s=n(67206);e.exports=function(e,t){var n={};return t=s(t,3),o(e,(function(e,o,s){r(n,o,t(e,o,s))})),n}},50308:e=>{e.exports=function(){}},57557:(e,t,n)=>{var r=n(29932),o=n(85990),s=n(57406),i=n(71811),a=n(98363),l=n(60696),u=n(99021),d=n(46904),c=u((function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,(function(t){return t=i(t,e),u||(u=t.length>1),t})),a(e,d(e),n),u&&(n=o(n,7,l));for(var c=t.length;c--;)s(n,t[c]);return n}));e.exports=c},39601:(e,t,n)=>{var r=n(40371),o=n(79152),s=n(15403),i=n(40327);e.exports=function(e){return s(e)?r(i(e)):o(e)}},31921:(e,t,n)=>{var r=n(10611);e.exports=function(e,t,n,o){return o="function"==typeof o?o:void 0,null==e?e:r(e,t,n,o)}},28693:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auto:()=>B,AutoForm:()=>q,BaseForm:()=>N,Bridge:()=>z,Quick:()=>I,QuickForm:()=>k,Validated:()=>w,ValidatedForm:()=>Q,ValidatedQuickForm:()=>R,changedKeys:()=>M,connectField:()=>Y,context:()=>F,createAutoField:()=>Z,filterDOMProps:()=>ne,joinName:()=>y,randomIds:()=>P,useField:()=>X,useForm:()=>J});var r=n(66678),o=n.n(r),s=n(18446),i=n.n(s),a=n(57557),l=n.n(a),u=n(31921),d=n.n(u),c=n(27361),h=n.n(c),m=n(75418),p=n.n(m);const g=/[.[\]]/,v=/"/g;function f(e){return""===e||g.test(e)?`["${e.replace(v,'\\"')}"]`:e}function b(e,t){const n=f(e);return n===e?t?`.${e}`:e:n}const C=/^\["(.*)"]$/,x=/\\"/g;function O(e){const t=C.exec(e);return t?t[1].replace(x,'"'):e}const S=/^([^.[\]]*(?:\.[^.[\]]+)*)(?:\.?(\["(?:(?:[^"]|\\")*?[^\\])?"])\.?(.*))?$/;const y=Object.assign((function(...e){const t=null===e[0],n=[];for(let t=0;t!==e.length;++t){const r=e[t];if(r||0===r)if("string"==typeof r){const o=S.exec(r);if(o){const[,r,s,i]=o;r&&(r.includes(".")?n.push(...r.split(".")):n.push(r)),s&&(n.push(O(s)),i&&(e[t--]=i))}else n.push(r)}else if(Array.isArray(r)){if(r.length){const n=Math.min(t+1,r.length);t-=n,e.splice(t+1,n,...r)}}else n.push(""+r)}return t?n.map(f):n.map(b).join("")}),{escape:f,unescape:O});function j(e){return!(!e||e!==Object(e)||e instanceof Date)}function M(e,t,n){if(!j(t)||n&&typeof t!=typeof n)return i()(t,n)?[]:[e];const r=[e];if(j(n)){for(const o in t)o in n&&i()(t[o],n[o])||r.push(y(e,o));for(const o in n)o in t||r.push(y(e,o));1===r.length&&r.pop()}else for(const n in t)r.push(y(e,n));return r}const F=(0,m.createContext)(null);function E(e){let t=0;return()=>`${e}-${("000"+(t++).toString(36)).slice(-4)}`}const V=E("uniforms");function P(e=V()){return E(e)}class N extends m.Component{constructor(e){super(e),this.state={changed:!1,changedMap:Object.create(null),resetCount:0,submitted:!1,submitting:!1},this.mounted=!1,this.randomId=P(this.props.id),this.onReset=this.reset=this.onReset.bind(this),this.onChange=this.change=this.onChange.bind(this),this.onSubmit=this.submit=this.onSubmit.bind(this);const t=this.getModel.bind(this);this.getModel=(e,n=t(e))=>void 0!==e&&this.props.modelTransform?this.props.modelTransform(e,n):n}componentDidMount(){this.mounted=!0}componentDidUpdate(e,t,n){}componentWillUnmount(){this.mounted=!1,this.delayId&&clearTimeout(this.delayId)}getContext(){return{changed:this.state.changed,changedMap:this.state.changedMap,error:this.getContextError(),formRef:this,model:this.getContextModel(),name:this.getContextName(),onChange:this.getContextOnChange(),onSubmit:this.getContextOnSubmit(),randomId:this.randomId,schema:this.getContextSchema(),state:this.getContextState(),submitted:this.state.submitted,submitting:this.state.submitting,validating:!1}}getContextName(){return[]}getContextError(){return this.props.error}getContextModel(){return this.getModel("form")}getContextState(){return{disabled:!!this.props.disabled,label:!!this.props.label,placeholder:!!this.props.placeholder,readOnly:!!this.props.readOnly,showInlineError:!!this.props.showInlineError}}getContextSchema(){return this.props.schema}getContextOnChange(){return this.onChange}getContextOnSubmit(){return this.onSubmit}getModel(e,t=this.props.model){return t}getNativeFormProps(){const e=l()(this.props,["autosave","autosaveDelay","disabled","error","label","model","modelTransform","onChange","onSubmit","placeholder","readOnly","schema","showInlineError"]);return Object.assign(Object.assign({},e),{onSubmit:this.onSubmit,key:`reset-${this.state.resetCount}`})}onChange(e,t){if(this.mounted){const n=M(e,t,h()(this.getModel(),e));0!==n.length&&this.setState((e=>e.changed&&n.every((t=>!!h()(e.changedMap,t)))?null:{changed:!0,changedMap:n.reduce(((e,t)=>d()(e,t,{},o())),o()(e.changedMap))}))}this.props.onChange&&this.props.onChange(e,t),this.mounted&&this.props.autosave&&(this.delayId&&(this.delayId=clearTimeout(this.delayId)),this.delayId=setTimeout((()=>{this.setState((()=>null),(()=>{this.onSubmit()}))}),this.props.autosaveDelay))}__reset(e){return{changed:!1,changedMap:Object.create(null),resetCount:e.resetCount+1,submitted:!1,submitting:!1}}onReset(){this.setState(this.__reset)}onSubmit(e){e&&(e.preventDefault(),e.stopPropagation()),this.setState((e=>e.submitted?null:{submitted:!0}));const t=this.props.onSubmit(this.getModel("submit"));return t instanceof Promise?(this.setState({submitting:!0}),t.finally((()=>{this.setState({submitting:!1})}))):Promise.resolve()}render(){return p().createElement(F.Provider,{value:this.getContext()},p().createElement("form",Object.assign({},this.getNativeFormProps())))}}N.displayName="Form",N.defaultProps={autosave:!1,autosaveDelay:0,error:null,label:!0,model:Object.create(null),noValidate:!0,onSubmit(){}};var _=n(70655);function I(e){class t extends e{getNativeFormProps(){const e=super.getNativeFormProps(),{autoField:t=this.getAutoField(),errorsField:n=this.getErrorsField(),submitField:r=this.getSubmitField()}=e,o=(0,_._T)(e,["autoField","errorsField","submitField"]);return o.children||(o.children=this.getContextSchema().getSubfields().map((e=>p().createElement(t,{key:e,name:e}))).concat([p().createElement(n,{key:"$ErrorsField"}),p().createElement(r,{key:"$SubmitField"})])),o}getAutoField(){return()=>null}getErrorsField(){return()=>null}getSubmitField(){return()=>null}}return t.Quick=I,t.displayName=`Quick${e.displayName}`,t}const k=I(N);var D=n(50361),$=n.n(D),A=n(50308),T=n.n(A);function w(e){class t extends e{constructor(e){super(e),this.state=Object.assign(Object.assign({},this.state),{error:null,validate:!1,validating:!1,validator:this.getContextSchema().getValidator(e.validator)}),this.onValidate=this.validate=this.onValidate.bind(this),this.onValidateModel=this.validateModel=this.onValidateModel.bind(this)}getContextError(){var e;return null!==(e=super.getContextError())&&void 0!==e?e:this.state.error}getContext(){return Object.assign(Object.assign({},super.getContext()),{validating:this.state.validating})}getNativeFormProps(){const e=super.getNativeFormProps();return l()(e,["onValidate","validate","validator"])}componentDidUpdate(e,t,n){super.componentDidUpdate(e,t,n);const{model:r,schema:o,validate:s,validator:a}=this.props;o!==e.schema||a!==e.validator?this.setState({validator:o.getValidator(a)},(()=>{U(s,this.state.validate)&&this.onValidate()})):!i()(r,e.model)&&U(s,this.state.validate)&&this.onValidateModel(r)}onChange(e,t){U(this.props.validate,this.state.validate)&&this.onValidate(e,t),super.onChange(e,t)}__reset(e){return Object.assign(Object.assign({},super.__reset(e)),{error:null,validate:!1,validating:!1})}onSubmit(e){e&&(e.preventDefault(),e.stopPropagation()),this.setState({submitted:!0,validate:!0});const t=this.onValidate().then((e=>null!==e?Promise.reject(e):super.onSubmit().catch((e=>{throw this.setState({error:e}),e}))));return t.catch(T()),t}onValidate(e,t){let n=this.getContextModel();return n&&e&&(n=d()(o()(n),e,$()(t),o())),this.onValidateModel(n)}onValidateModel(e){const t=this.getModel("validate",e),n=function(e){function t(t,n){return t instanceof Promise?(e(),t.then(n)):n(t)}return t}((()=>{this.setState({validating:!0})}));return n(this.state.validator(t),((e=null)=>n(this.props.onValidate(t,e),((e=null)=>{var t;return e=this.props.error===e?null:e,this.setState((t=>t.error!==e||t.validating?{error:e,validating:!1}:null)),Promise.resolve(null!==(t=this.props.error)&&void 0!==t?t:e)}))))}}return t.Validated=w,t.displayName=`Validated${e.displayName}`,t.defaultProps=Object.assign(Object.assign({},e.defaultProps),{onValidate:(e,t)=>t,validate:"onChangeAfterSubmit"}),t}function U(e,t){return"onChange"===e||"onChangeAfterSubmit"===e&&t}const Q=w(N),R=w(I(N));function B(e){class t extends e{constructor(e){super(e),this.state=Object.assign(Object.assign({},this.state),{model:e.model})}componentDidUpdate(e,t,n){const{model:r}=this.props;i()(r,e.model)||this.setState({model:r}),super.componentDidUpdate(e,t,n)}getNativeFormProps(){const e=super.getNativeFormProps();return l()(e,["onChangeModel"])}getModel(e){return this.state.model}onChange(e,t){super.onChange(e,t),this.setState((n=>({model:d()(o()(n.model),e,t,o())})),(()=>{this.props.onChangeModel&&this.props.onChangeModel(this.state.model)}))}__reset(e){return Object.assign(Object.assign({},super.__reset(e)),{model:this.props.model})}}return t.Auto=B,t.displayName=`Auto${e.displayName}`,t}const q=B(R);var K=n(41143),W=n.n(K);class z{constructor(...e){W()(this.constructor!==z,"Bridge cannot be instantiated (args=%o).",{args:e})}getError(e,t){return W()(!1,"%s have not implemented `getError` method (args=%o).",this.constructor.name,{name:e,error:t})}getErrorMessage(e,t){return W()(!1,"%s have not implemented `getErrorMessage` method (args=%o).",this.constructor.name,{name:e,error:t})}getErrorMessages(e){return W()(!1,"%s have not implemented `getErrorMessages` method (args=%o).",this.constructor.name,{error:e})}getField(e){return W()(!1,"%s have not implemented `getField` method (args=%o).",this.constructor.name,{name:e})}getInitialValue(e,t){return W()(!1,"%s have not implemented `getInitialValue` method (args=%o).",this.constructor.name,{name:e,props:t})}getProps(e,t){return W()(!1,"%s have not implemented `getProps` method (args=%o).",this.constructor.name,{name:e,props:t})}getSubfields(e){return W()(!1,"%s have not implemented `getSubfields` method (args=%o).",this.constructor.name,{name:e})}getType(e){return W()(!1,"%s have not implemented `getType` method (args=%o).",this.constructor.name,{name:e})}getValidator(e){return W()(!1,"%s have not implemented `getValidator` method (args=%o).",this.constructor.name,{options:e})}}var G=n(66604),H=n.n(G);function J(){const e=(0,m.useContext)(F);return W()(null!==e,"useForm must be used within a form."),e}function L(e,t,n,r){const o=!0===e||void 0===e,s=!0===t||void 0===t,i=s?r:t;return[""===e||!1===e||null===e||o&&(s||!n)?"":o?i:e,i]}function X(e,t,n){var r;const o=J(),s=y((null==n?void 0:n.absoluteName)?"":o.name,e),i=o.schema.getField(s),a=!1!==(null==n?void 0:n.initialValue),l=a?(0,m.useRef)(!1):{current:!1},u=H()(o.state,((e,n)=>{const r=t[n];return null!=r?!!r:e})),d=!!h()(o.changedMap,s),c=o.schema.getError(s,o.error),p=o.schema.getErrorMessage(s,o.error),g=o.schema.getType(s),v=o.schema.getSubfields(s),f=o.schema.getProps(s,Object.assign(Object.assign({},u),t)),[b,C]=L(t.label,f.label,u.label,""),[x]=L(t.placeholder,f.placeholder,u.placeholder,b||C),O=(0,m.useMemo)((()=>o.randomId()),[]),S=(0,m.useCallback)(((e,t=s)=>{l.current=!0,o.onChange(t,e)}),[o.onChange,s]),j=h()(o.model,s);let M,F=null!==(r=t.value)&&void 0!==r?r:j;a&&(l.current||(void 0===F?(F=o.schema.getInitialValue(s,t),M=F):void 0!==t.value&&t.value!==j&&(M=t.value)),(0,m.useEffect)((()=>{var e;(null!==(e=t.required)&&void 0!==e?e:f.required)&&void 0!==M&&S(M)}),[]));return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({id:O},u),{changed:d,error:c,errorMessage:p,field:i,fieldType:g,fields:v,onChange:S,value:F}),f),t),{label:b,name:s,placeholder:x}),o]}function Y(e,t){function n(n){const[r,o]=X(n.name,n,t),s=""!==n.name,i=Object.keys(o.state).some((e=>{const t=n[e];return null!=t}));if(!i&&!s)return p().createElement(e,Object.assign({},n,r));const a=Object.assign({},o);return i&&(a.state=H()(a.state,((e,t)=>{const r=n[t];return null!=r?!!r:e}))),s&&(a.name=a.name.concat(n.name)),p().createElement(F.Provider,{value:a},p().createElement(e,Object.assign({},n,r)))}return n.displayName=`${e.displayName||e.name}Field`,Object.assign(n,{Component:e,options:t})}function Z(e){const t=(0,m.createContext)(e);return Object.assign((function(e){var n,r;const[o,s]=X(e.name,e),i=(0,m.useContext)(t),a=null!==(n=o.component)&&void 0!==n?n:i(o,s);return W()(a,"AutoField received no component for: %s",o.name),"options"in a&&"leaf"===(null===(r=a.options)||void 0===r?void 0:r.kind)?(0,m.createElement)(a.Component,o):(0,m.createElement)(a,e)}),{componentDetectorContext:t,defaultComponentDetector:e})}const ee=[],te=new Set,ne=Object.assign((function(e){const t=Object.assign({},e);for(const n in e)te.has(n)&&delete t[n];return t}),{register(...e){e.forEach((e=>{te.has(e)||(ee.push(e),te.add(e))})),ee.sort()},registered:ee});ne.register("changed","error","errorMessage","field","fieldType","fields","initialCount","name","onChange","transform","value","disabled","label","placeholder","showInlineError","component","allowedValues")}}]);
//# sourceMappingURL=693.90cfcc84.js.map