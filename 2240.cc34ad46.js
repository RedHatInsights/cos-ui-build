"use strict";(self.webpackChunkcos_ui=self.webpackChunkcos_ui||[]).push([[2240],{3054:(e,t,n)=>{n.r(t);var a=n(75418),o=n.n(a),r=n(66235),i=n(47091),l=(n(49901),n(74651),n(18391),n(56594),n(94694),n(99521),n(15202),n(70655)),c=n(21012),s=n(9980);const u=({children:e})=>{const[t,n]=(0,a.useState)([]),[r,i]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=r.map((e=>e.key)),n=t.filter((t=>!e.includes(null==t?void 0:t.id))).map((e=>{const{id:t=""}=e,n=setTimeout((()=>l(t)),8e3);return{key:e.id,timeOut:n}}));return i([...r,...n]),()=>r.forEach((e=>(null==e?void 0:e.timeOut)&&clearTimeout(e.timeOut)))}),[t]);const l=e=>{n((t=>[...t.filter((t=>t.id!==e))])),i((t=>[...t.filter((t=>t.key===e))]))};return o().createElement(s.AlertContext.Provider,{value:{addAlert:e=>{const a=(new Date).getTime().toString();n([...t,Object.assign(Object.assign({},e),{id:a})])}}},o().createElement(d,{alerts:t,onCloseAlert:l}),e)},d=({alerts:e,onCloseAlert:t})=>o().createElement(c.AlertGroup,{isToast:!0},e.map((e=>{var{id:n,variant:a,title:r,description:i,dataTestId:u}=e,d=(0,l.__rest)(e,["id","variant","title","description","dataTestId"]);return o().createElement(c.Alert,Object.assign({key:n,isLiveRegion:!0,variant:s.AlertVariant[a],variantLabel:"",title:r,actionClose:o().createElement(c.AlertActionCloseButton,{title:r,onClose:()=>t(n)}),"data-testid":u},d),i)})));var m=n(31521),v=n(98068);const p=n.p+"f940137c.svg",g=({children:e})=>{const[t,n]=(0,a.useState)(!0),[r,i]=(0,a.useState)(!0),[l,s]=(0,a.useState)(!1),{t:u}=(0,m.useTranslation)(),d=o().createElement(c.PageHeaderTools,null,"email"),p=o().createElement(c.PageHeader,{logo:o().createElement(E,null),showNavToggle:!0,isNavOpen:t,headerTools:d,onNavToggle:r?()=>{s(!l)}:()=>{n(!t)},"aria-label":"global_navigation"}),g=o().createElement(c.Nav,{id:"nav-primary-simple",role:"navigation",theme:"dark","aria-label":"global"},o().createElement(c.NavList,{id:"nav-list-simple"},o().createElement(c.NavItem,{id:"connectors"},o().createElement(v.NavLink,{to:"/",activeClassName:"pf-m-current"},u("managedConnectors"))))),h=o().createElement(c.PageSidebar,{theme:"dark",nav:g,isNavOpen:r?l:t});return o().createElement(c.Page,{mainContainerId:"primary-app-container",role:"main",header:p,sidebar:h,onPageResize:e=>{i(e.mobileView)}},e)};function E(){const e=(0,v.useHistory)();return o().createElement("img",{src:p,onClick:function(){e.push("/")},alt:"PatternFly Logo"})}var h=n(91031),f=n(78800),k=n(61753),b=n(32385),y=n.n(b);let P;const C=()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return P||(yield _()),P})),_=()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){try{P=new(y())({realm:"redhat-external",url:"https://sso.redhat.com/auth/",clientId:"cloud-services",promiseType:"native"}),P&&(yield P.init({onLoad:"login-required",promiseType:"native"}))}catch(e){P=void 0,console.warn("Auth: Unable to initialize keycloak. Client side will not be configured to use authentication",e)}})),A=()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return yield null==P?void 0:P.updateToken(50),(null==P?void 0:P.token)?P.token:(console.error("No keycloak token available"),"foo")})),T=o().createContext({keycloak:void 0}),w=e=>{const t={kas:{getToken:A},getUsername:()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return yield null==P?void 0:P.updateToken(50),(null==P?void 0:P.tokenParsed)?P.tokenParsed:(console.error("No keycloak token available"),{})})).then((e=>e.username))};return o().createElement(s.AuthContext.Provider,{value:t},e.children)};let z;const B=()=>{const[e,t]=(0,a.useState)(!1),n=(0,a.useCallback)((()=>"/"),[]);(0,a.useEffect)((()=>{(0,l.__awaiter)(void 0,void 0,void 0,(function*(){z=yield C(),t(!0)}))}),[]);return o().createElement(T.Provider,{value:{keycloak:z,profile:null==z?void 0:z.profile}},o().createElement(w,null,o().createElement(s.BasenameContext.Provider,{value:{getBasename:n}},o().createElement(s.ConfigContext.Provider,{value:{cos:{apiBasePath:"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com",configurators:{debezium:{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"}}}}},o().createElement(m.I18nextProvider,{i18n:f.Z},o().createElement(u,null,o().createElement(o().Suspense,{fallback:o().createElement(h.g,null)},o().createElement(v.BrowserRouter,null,o().createElement(g,null,e?o().createElement(x,null):o().createElement(c.Spinner,null))))))))))},x=()=>{const e=(0,s.useAuth)(),t=(0,s.useConfig)();return o().createElement(k.e,{getToken:()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return(yield null==e?void 0:e.kas.getToken())||""})),connectorsApiBasePath:(null==t?void 0:t.cos.apiBasePath)||"",kafkaManagementApiBasePath:"https://api.openshift.com"})},N=()=>{const e=(0,a.useCallback)((()=>"/"),[]),t={kas:{getToken:()=>Promise.resolve("dummy")},getUsername:()=>Promise.resolve("username")};return o().createElement(s.AuthContext.Provider,{value:t},o().createElement(s.BasenameContext.Provider,{value:{getBasename:e}},o().createElement(s.ConfigContext.Provider,{value:{cos:{apiBasePath:"localhost",configurators:{"debezium-mongodb-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"},"debezium-mysql-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"},"debezium-postgres-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"}}}}},o().createElement(m.I18nextProvider,{i18n:f.Z},o().createElement(u,null,o().createElement(o().Suspense,{fallback:o().createElement(h.g,null)},o().createElement(v.BrowserRouter,null,o().createElement(g,null,o().createElement(S,null)))))))))},S=()=>{const e=(0,s.useAuth)(),t=(0,s.useConfig)();return o().createElement(k.e,{getToken:()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return(yield null==e?void 0:e.kas.getToken())||""})),connectorsApiBasePath:(null==t?void 0:t.cos.apiBasePath)||"",kafkaManagementApiBasePath:"https://api.openshift.com"})};"MISSING_ENV_VAR".DEMO_APP?((0,i.XY)({iframe:!1}),r.render(a.createElement(B,null),document.getElementById("root"))):r.render(a.createElement(N,null),document.getElementById("root"))}}]);
//# sourceMappingURL=2240.cc34ad46.js.map