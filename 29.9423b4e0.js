"use strict";(self.webpackChunkcos_ui=self.webpackChunkcos_ui||[]).push([[29],{62461:(e,t,n)=>{n.d(t,{e:()=>Ln});var a,o=n(35898),r=n.n(o),c=n(96486),i=n.n(c),l=n(11192),s=n(29337);!function(e){e.asc="asc",e.desc="desc"}(a||(a={}));const d=({accessToken:e,connectorsApiBasePath:t,connectorId:n})=>{const a=new l.ConnectorsApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t)=>{const o=r().CancelToken.source();return a.getConnector(n,{cancelToken:o.token}).then((t=>{e(t.data)})).catch((e=>{r().isCancel(e)||t(e.response.data.reason)})),()=>{o.cancel("Operation canceled by the user.")}}},u=({accessToken:e,connectorsApiBasePath:t,connectorTypeId:n})=>{const a=new l.ConnectorTypesApi(new l.Configuration({accessToken:e,basePath:t}));return e=>{const t=r().CancelToken.source();return a.getConnectorTypeByID(n,{cancelToken:t.token}).then((t=>{e(t.data)})).catch((e=>{r().isCancel(e)||console.log("Error:",e.response.data.reason)})),()=>{t.cancel("Operation canceled by the user.")}}},p=({accessToken:e,connectorsApiBasePath:t,namespaceId:n})=>{const a=new l.ConnectorNamespacesApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t)=>{const o=r().CancelToken.source();return a.getConnectorNamespace(n,{cancelToken:o.token}).then((t=>{e(t.data)})).catch((e=>{r().isCancel(e)||t(e.response.data.reason)})),()=>{o.cancel("Operation canceled by the user.")}}},m=({accessToken:e,kafkaManagementBasePath:t,KafkaInstanceId:n})=>{const a=new s.DefaultApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t)=>{const o=r().CancelToken.source();return a.getKafkaById(n,{cancelToken:o.token}).then((t=>{e(t.data)})).catch((e=>{r().isCancel(e)||(console.log("Error msg:"+e.response),t(e.response))})),()=>{o.cancel("Operation canceled by the user.")}}};var g=n(75418),v=n.n(g),E=n(21012),f=n(91999),h=n(4088),C=n(12990);const y=({desiredState:e,name:t,state:n,clickable:a,popoverBody:o,popoverHeader:r})=>v().createElement(E.Split,{className:"connector-status__split",hasGutter:!0},v().createElement(E.SplitItem,null,v().createElement(S,{name:t,state:n})),v().createElement(E.SplitItem,{isFilled:!0},v().createElement(b,{desiredState:e,state:n,clickable:a,popoverBody:o,popoverHeader:r}))),b=({desiredState:e,state:t,clickable:n,popoverBody:a,popoverHeader:o})=>{switch(null==t?void 0:t.toLowerCase()){case"ready":case"failed":case"stopped":case"deleted":case"":return v().createElement(v().Fragment,null,n?v().createElement(E.Popover,{"aria-label":"connector status popover",position:E.PopoverPosition.auto,hideOnOutsideClick:!0,headerContent:o,bodyContent:a},v().createElement(E.Button,{variant:"link",isInline:!0},k(t))):k(t));default:return v().createElement(E.Stack,{className:"connector-status-label__stack"},v().createElement(E.StackItem,{className:"connector-status-label__state-label"},k(t)),v().createElement(E.StackItem,{className:"connector-status-label__desired-state-label"},"Transitioning to ",v().createElement("b",null,k(e))))}},S=({name:e,state:t})=>{switch(null==t?void 0:t.toLowerCase()){case"ready":return v().createElement(f.CheckCircleIcon,{color:h.g.value});case"failed":return v().createElement(f.ExclamationCircleIcon,{color:C.Q.value});case"stopped":return v().createElement(f.OutlinedPauseCircleIcon,null);case"deleted":return v().createElement(f.OutlinedTimesCircleIcon,null);default:return v().createElement(E.Spinner,{size:"md","aria-label":e,"aria-valuetext":"Please wait, tasks are in progress"})}};function k(e){return void 0!==typeof e?(0,c.capitalize)(e):"Undefined"}var T=n(91031);const I="paginatedApi";var x;!function(e){e.Overview="overview",e.Configuration="configuration"}(x||(x={}));const A=(0,g.createContext)(null),P=({getToken:e,connectorsApiBasePath:t,kafkaManagementApiBasePath:n,children:a})=>v().createElement(A.Provider,{value:{getToken:e,connectorsApiBasePath:t,kafkaManagementApiBasePath:n}},a),w=()=>{const e=(0,g.useContext)(A);if(!e)throw new Error("useAppContext must be used inside an AppContextProvider");return Object.assign({},e)};var D=n(31521),B=n(98068),N=n(53813),O=n(70655),M=n(98823);const _=({error:e})=>v().createElement("div",{role:"alert"},v().createElement("p",null,"Something went wrong: "),v().createElement("pre",null,e.message)),j=({children:e})=>v().createElement(M.ErrorBoundary,{FallbackComponent:_,resetKeys:[Date.now()]},e);var R,F=n(45764),L=n(41428),z=n(66310);!function(e){e.CREATE="create",e.VIEW="view",e.EDIT="edit",e.DUPLICATE="duplicate"}(R||(R={}));const G={context:(0,F.createSchema)()},q=(0,z.createModel)({connector:{id:"something",name:"something",version:"0.1"},Configurator:void 0,steps:void 0,error:void 0,duplicateMode:void 0}),V=q.createMachine({schema:G,id:"configurator",initial:"loading",context:q.initialContext,states:{loading:{invoke:{id:"fetchConfigurator",src:"fetchConfigurator",onDone:{target:"success",actions:(0,F.assign)(((e,t)=>t.data))},onError:{target:"failure",actions:(0,F.assign)({error:(e,t)=>t.data})}}},failure:{entry:(0,L.escalate)((e=>({message:e.error})))},success:{type:"final",data:({Configurator:e,steps:t})=>({Configurator:e,steps:t})}}}),H=(e,t)=>(0,O.__awaiter)(void 0,void 0,void 0,(function*(){const a=Promise.resolve({steps:!1,Configurator:!1});return new Promise((o=>(0,O.__awaiter)(void 0,void 0,void 0,(function*(){try{const a=yield K(t,e);yield $(a.remoteEntry),o(function(e,t){return(0,O.__awaiter)(this,void 0,void 0,(function*(){yield n.I("default");const a=window[e];yield a.init(n.S.default);const o=(yield window[e].get(t))();return console.log(`loaded federated configurator configuration from ${e}`,o),o.default}))}(a.scope,a.module))}catch(e){o(a)}}))))})),K=(e,t)=>(0,O.__awaiter)(void 0,void 0,void 0,(function*(){console.log("Fetched federated configurator remotes configuration",e);const n=e[t.id]||e[t.id.split("-")[0]];return console.log(`Candidate configuration for "${t.id}"`,n),n?(a=n)&&a.remoteEntry&&"string"==typeof a.remoteEntry&&a.scope&&"string"==typeof a.scope&&a.module&&"string"==typeof a.module?(console.log("Found a generic configuration for the connector",n),n):(console.log("Couldn't find a valid configuration for the requested connector"),Promise.reject()):(console.log("Couldn't find any configuration for the requested connector"),Promise.reject());var a})),$=e=>(0,O.__awaiter)(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>{const a=document.createElement("script");a.src=e,a.type="text/javascript",a.async=!0,a.onload=()=>{console.log(`Dynamic federated module loaded: ${e}`),document.head.removeChild(a),t()},a.onerror=()=>{console.error(`Dynamic federated module Error: ${e}`),console.log(`Dynamic federated module Removed: ${e}`),document.head.removeChild(a),n()},document.head.appendChild(a)}))}));const W=e=>{const t={};return e.forEach(((e,n)=>{t[n]=e})),t},J=e=>{const t=e instanceof Map?W(e):e;try{return JSON.stringify(t,null,2)}catch(e){return""}},Q=e=>{let t=[];return Object.keys(e.properties).map((n=>{const a=e.properties[n].oneOf;if(void 0!==a){const[e]=a;"password"===e.format&&t.push(n)}})),t},U=e=>{let t=e.getTime()-(new Date).getTime();t/=1e3;let n=Math.floor(t/3600);return t-=3600*n,{hours:n,min:Math.floor(t/60)}},Z=e=>{let{hours:t}=U(e);return t>=24?"info":t>=3?"warning":"danger"},Y=(e,t)=>{const n=t.properties[e];if(void 0===n)return;const a=n.$ref?((e,t)=>{const[n,...a]=e.split("/");return a.reduce(((e,t)=>e&&e[t]),t)})(n.$ref,t):t.properties[e];if(!a.properties)return a.default;const o={};return Object.keys(a.properties).map((e=>{const n=Y(e,Object.assign({$defs:t.$defs},a||{}));void 0!==n&&(o[e]=n)})),o},X=e=>{const t=Object.assign({},e);return Object.keys(t).map((e=>{const n=t[e];"object"==typeof n&&0===Object.keys(n).length&&(t[e]="")})),t},ee=(e,t)=>{const{data_shape:n}=t,a=(0,O.__rest)(t,["data_shape"]);if(void 0===n){const t=Y("data_shape",e);return Object.assign(Object.assign({},a),t&&{data_shape:t})}return t},te=({title:e,description:t,component:n,children:a})=>v().createElement("div",{className:"pf-l-stack"},v().createElement("div",{className:"pf-l-stack__item pf-u-p-md"},v().createElement(E.Level,null,v().createElement(E.LevelItem,null,v().createElement(E.Title,{headingLevel:"h2"},e)),v().createElement(E.LevelItem,null,n)),"string"==typeof t?v().createElement("p",{className:"wizard-step__description"},t):t),v().createElement("div",{className:"pf-l-stack__item pf-l-stack pf-m-fill pf-u-pl-md pf-u-pr-md  pf-u-pb-md"},a)),ne=({SAPlaceholder:e,onSAPlaceholderChange:t})=>{const{t:n}=(0,D.useTranslation)();return v().createElement(E.FormGroup,{label:n("clientSecret"),helperText:n("credentialEditFieldHelpText"),fieldId:"clientSecretPlaceholder"},v().createElement(E.InputGroup,null,v().createElement(E.TextInput,{value:e,type:"password",onChange:t,id:"connector-sa-secret-placeholder"})))},ae=({editMode:e,configuration:t,changeIsValid:n,onUpdateConfiguration:a})=>{const{t:o}=(0,D.useTranslation)(),[r,c]=v().useState(!1),[i,l]=v().useState(!0),[s,d]=v().useState("*****"),u=Object.assign({},t),{service_account:p}=u;return v().createElement(te,{title:o("core"),description:o("basicStepDescription")},v().createElement(E.Form,null,v().createElement(E.FormGroup,{label:o("connectorName"),isRequired:!0,fieldId:"connector-name",labelIcon:v().createElement(E.Popover,{bodyContent:v().createElement("p",null,o("connectorNamePopoverBody"))},v().createElement("button",{type:"button","aria-label":"More info for name field.",onClick:e=>e.preventDefault(),"aria-describedby":"connector-name-helper",className:"pf-c-form__group-label-help"},v().createElement(f.HelpIcon,{noVerticalAlign:!0})))},e?v().createElement(E.TextInput,{value:t.name,onChange:e=>(e=>{a("common",Object.assign(Object.assign({},t),{name:e})),n(""!==e)})(e),id:"connector-name"}):v().createElement(E.Text,{component:E.TextVariants.p},t.name)),v().createElement(E.FormGroup,{label:o("serviceAccount"),isRequired:!0,fieldId:"service-account",labelIcon:v().createElement(E.Popover,{bodyContent:v().createElement("p",null,o("serviceAccountDescText"))},v().createElement("button",{type:"button","aria-label":"More info for name field.",onClick:e=>e.preventDefault(),"aria-describedby":"service-account-helper",className:"pf-c-form__group-label-help"},v().createElement(f.HelpIcon,{noVerticalAlign:!0})))},v().createElement(E.Text,{component:E.TextVariants.p},o("serviceAccountEditDescription"))),v().createElement(E.FormGroup,{label:o("clientId"),isRequired:!0,validated:(null==p?void 0:p.client_id)?"default":"error",helperTextInvalid:o("clientIdRequired"),helperTextInvalidIcon:v().createElement(f.ExclamationCircleIcon,null),fieldId:"clientId"},e?v().createElement(E.TextInput,{value:null==p?void 0:p.client_id,validated:(null==p?void 0:p.client_id)?"default":"error",onChange:e=>{a("common",Object.assign(Object.assign({},u),{service_account:{client_id:e,client_secret:p.client_secret}})),!r&&c((e=>(e||n(!1),!0))),""===p.client_secret||""===e?n(!1):n(!0)},id:"connector-sa-id"}):v().createElement(E.ClipboardCopy,{isReadOnly:!0,hoverTip:"copy",clickTip:"Copied"},null==p?void 0:p.client_id)),e&&""===(null==p?void 0:p.client_secret)&&""!==s&&v().createElement(ne,{SAPlaceholder:s,onSAPlaceholderChange:e=>{d(e),""===e&&n(!1)}}),e&&""===s&&v().createElement(E.FormGroup,{label:o("clientSecret"),isRequired:!0,validated:(null==p?void 0:p.client_secret)?"default":"error",helperText:o("credentialEditFieldHelpText"),helperTextInvalid:o("clientSecretRequired"),helperTextInvalidIcon:v().createElement(f.ExclamationCircleIcon,null),fieldId:"clientSecret"},v().createElement(E.InputGroup,null,v().createElement(E.TextInput,{value:null==p?void 0:p.client_secret,type:i?"password":"text",validated:(null==p?void 0:p.client_secret)?"default":"error",onChange:e=>{a("common",Object.assign(Object.assign({},u),{service_account:{client_id:p.client_id,client_secret:e}})),""===p.client_secret||""===e||""===p.client_id?n(!1):n(!0)},id:"connector-sa-secret"}),v().createElement(E.Button,{variant:"control",onClick:()=>l(!i),"aria-label":i?"Show password":"Hide password"},i?v().createElement(f.EyeIcon,null):v().createElement(f.EyeSlashIcon,null))))))};var oe=n(71322);const re=new(n.n(oe)())({allErrors:!0,useDefaults:!1,strict:"log",strictSchema:!1});function ce(e){const t=re.compile(e);return e=>{var n;return t(e),(null===(n=t.errors)||void 0===n?void 0:n.length)?{details:t.errors}:null}}var ie=n(91364),le=n(35496),se=n(47649),de=n.n(se);const ue=(e,t)=>void 0!==t?v().createElement(E.Popover,{bodyContent:t},v().createElement("button",{type:"button","aria-label":`More info for ${e}`,onClick:e=>e.preventDefault(),"aria-describedby":"form-group-label-info",className:"pf-c-form__group-label-help"},v().createElement(f.HelpIcon,{noVerticalAlign:!0}))):void 0;class pe extends(de()){constructor(e,t,n,a,o){super(e,t),this.t=n,this.showCredentialHelpText=a,this.duplicateMode=o}getProps(e){const t=super.getProps(e),{description:n,example:a,label:o}=t,r=(0,O.__rest)(t,["description","example","label"]),{isSecret:c}=this.getField(e);return c?Object.assign(Object.assign(Object.assign({},r),this.showCredentialHelpText&&{helperText:this.duplicateMode?this.t("credentialDuplicateFieldHelpText"):this.t("credentialEditFieldHelpText")}),{labelIcon:ue(o||e,n),name:e,label:o,type:"password"}):Object.assign(Object.assign({},r),{helperText:(i=a,void 0!==i?`Example: ${i}`:void 0),labelIcon:ue(o||e,n),name:e,label:o});var i}getField(e){const t=super.getField(e),{enum:n,oneOf:a}=t,o=(0,O.__rest)(t,["enum","oneOf"]);let r;if(void 0!==o.type&&"string"===o.type&&void 0!==n&&""!==n[0]&&(r=["",...n]),void 0!==a){const[t]=a;return Object.assign(Object.assign({},t),{name:e,required:o.required,type:t.format,isSecret:"password"===t.format})}return Object.assign(Object.assign({name:e},o),void 0!==typeof r&&{enum:r})}}const me=({schema:e,configuration:t,duplicateMode:n,editMode:a,onChange:o})=>{const{t:r}=(0,D.useTranslation)();e.type=e.type||"object";const c=ce(e),i=new pe(e,c,r,n||a||!1,n||!1),l=i.schema.properties,{error_handler:s,processors:d,steps:u}=l,p=(0,O.__rest)(l,["error_handler","processors","steps"]);return v().createElement(E.Grid,{hasGutter:!0},v().createElement(ge,{schema:i,model:X(t),onChangeModel:e=>(e=>(0,O.__awaiter)(void 0,void 0,void 0,(function*(){const t=c(e);o(e,null===t)})))(e),className:"connector-specific pf-c-form pf-m-9-col-on-lg"},Object.keys(p).map((e=>v().createElement(le.AutoField,{key:e,name:e})))))};const ge=function e(t){class n extends(ie.AutoForm.Auto(t)){onChange(e,t){if(""===t)return super.onChange(e,void 0);super.onChange(e,t)}}return n.Auto=e,n}(ie.ValidatedQuickForm),ve=({editMode:e,schema:t,configuration:n,changeIsValid:a,onUpdateConfiguration:o})=>{const{t:r}=(0,D.useTranslation)(),c=ee(t,X(JSON.parse(JSON.stringify(n))));return v().createElement(te,{title:r("connectorSpecific"),description:r("configurationStepDescription")},e?v().createElement(me,{schema:t,configuration:c,onChange:(e,t)=>{o("connector",e),a(t)},editMode:!0}):v().createElement(E.Form,null,Object.entries(t.properties).filter((([e,t])=>!["object","array"].includes(t.type)||!("data_shape"!==e||!c[e]))).map((([e,n])=>v().createElement(E.FormGroup,{key:e,label:n.title||i().capitalize(e.replace("_"," ")),fieldId:e,isRequired:t.required.includes(e),labelIcon:v().createElement(E.Popover,{bodyContent:v().createElement("p",null,n.description?n.description:i().capitalize(e.replace("_"," ")))},v().createElement("button",{type:"button","aria-label":"More info for name field",onClick:e=>e.preventDefault(),"aria-describedby":"simple-form-name-01",className:"pf-c-form__group-label-help"},v().createElement(f.HelpIcon,{noVerticalAlign:!0})))},((e,t,n)=>{const{title:a,type:o,oneOf:c}=t,l=i().capitalize(e.replace("_"," ")),s=e=>v().createElement(E.Text,{className:"connector-detail__field_view_no_value"},r("propertyNotConfigured",{name:e}));switch(o){case"object":return"data_shape"===e?v().createElement(Ee,{data:n}):n?v().createElement(E.Text,{component:E.TextVariants.pre},JSON.stringify(n)):s(a||l);case"boolean":return void 0!==n?v().createElement(E.Text,null,JSON.stringify(n)):s(a||l);default:if(void 0!==c){const[e]=c;if("password"===e.format)return v().createElement(E.Text,null,"**************************")}return void 0!==n?v().createElement(E.Text,null,n):s(a||l)}})(e,t.properties[e],c[e]))))))},Ee=({data:e})=>v().createElement(v().Fragment,null,Object.keys(e).map((t=>v().createElement(E.FormGroup,{key:t,label:i().upperFirst(t),fieldId:t},v().createElement(E.Text,{component:E.TextVariants.p},e[t].format))))),fe=({editMode:e,schema:t,configuration:n,changeIsValid:a,onUpdateConfiguration:o})=>{var r;const[c,l]=(0,g.useState)(!1),[s,d]=(0,g.useState)(),[u,p]=(0,g.useState)(),{t:m}=(0,D.useTranslation)(),h=ce(t),C=new se.JSONSchemaBridge(t,h),{error_handler:y}=null===(r=C.schema)||void 0===r?void 0:r.properties,b=y.oneOf,S=()=>{l(!1)};(0,g.useEffect)((()=>(p(n?Object.keys(n)[0]:Object.keys(y.default)[0]),n&&"dead_letter_queue"===Object.keys(n)[0]&&!i().isEmpty(n.dead_letter_queue)&&d(n.dead_letter_queue[Object.keys(n.dead_letter_queue)[0]]),()=>{})),[n]);const k=b.map((e=>{const t=Object.keys(e.properties);return v().createElement(E.SelectOption,{key:t[0],value:t[0]})}));return v().createElement(te,{title:m("errorHandling"),description:m("errorHandlingStepDescription")},v().createElement(E.Form,null,v().createElement(E.FormGroup,{label:m("errorHandler"),fieldId:"error-handler_strategy",className:"error-handler_strategy"},e?v().createElement(E.Select,{variant:E.SelectVariant.single,"aria-label":"Select Error handler",onToggle:()=>l((e=>!e)),onSelect:(e,t,n)=>{n?S():(l(!1),d(""),p(t),a("dead_letter_queue"!==t||!!s),o("error",{[t]:{}}))},selections:u,isOpen:c,placeholderText:"Select type"},k):v().createElement(E.Text,{component:E.TextVariants.p},u)),"dead_letter_queue"===u&&v().createElement(E.FormGroup,{label:"Dead Letter Topic Name",isRequired:!0,fieldId:"topic",labelIcon:v().createElement(E.Popover,{bodyContent:v().createElement("p",null,"The name of the Kafka topic used as dead letter queue")},v().createElement("button",{type:"button","aria-label":"More info for name field",onClick:e=>e.preventDefault(),"aria-describedby":"simple-form-name-01",className:"pf-c-form__group-label-help"},v().createElement(f.HelpIcon,{noVerticalAlign:!0})))},e?v().createElement(E.TextInput,{value:s,onChange:e=>{d(e),a(!!e),o("error",{dead_letter_queue:{topic:e}})},id:"topic"}):v().createElement(E.Text,{component:E.TextVariants.p},s))))},he=(e,t)=>((e,t)=>{let n=[];return i().each(e,((e,a)=>{void 0!==t&&t[a]!==e&&t[a]!=={}&&""!==e&&n.push(a)})),n})(e,t).reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]})),{}),Ce=({onSave:e,editMode:t,updateEditMode:n,connectorData:a,connectorTypeDetails:o})=>{var c,s;const{t:d}=(0,D.useTranslation)(),u=(0,N.useAlert)(),p=(0,N.useConfig)(),{connectorsApiBasePath:m,getToken:f}=w(),[h,C]=(0,g.useState)(!1),[y,b]=(0,g.useState)(!1),[S,k]=(0,g.useState)(0),[I,x]=(0,g.useState)({}),[A,P]=(0,g.useState)(),[B,M]=(0,g.useState)({}),[_,R]=(0,g.useState)(),[F,L]=(0,g.useState)(!0),z=()=>C(!1),G=(0,g.useCallback)(((e,t)=>{switch(b(!0),e){case"common":x(t);break;case"connector":P(t);break;case"error":M(t)}}),[x,P,M]),q=(0,g.useCallback)((e=>{null==u||u.addAlert({id:"connector-update-error",variant:E.AlertVariant.danger,title:d("somethingWentWrong"),description:e})}),[u,d]),V=(0,g.useCallback)((()=>{n(!1),null==u||u.addAlert({id:"connector-update-success",variant:E.AlertVariant.success,title:d("editAlertSuccessTitle")}),e()}),[u,d,n,e]),K=()=>{var e;const{name:t,service_account:n}=a;x({name:t,service_account:n}),P(null==a?void 0:a.connector),M(null===(e=null==a?void 0:a.connector)||void 0===e?void 0:e.error_handler)},$=()=>{K(),n(!1),z()},J=(0,g.useCallback)(((e,t)=>{P(e),L(t)}),[P,L]);let Q;(0,g.useEffect)((()=>{K(),(0,O.__awaiter)(void 0,void 0,void 0,(function*(){try{Q=yield H(o,(null==p?void 0:p.cos.configurators)||{}),R(Q)}catch(e){console.log("No configurator provided.",e)}}))}),[]);return v().createElement(v().Fragment,null,v().createElement(E.PageSection,{variant:E.PageSectionVariants.light},v().createElement(E.Grid,{style:{paddingBottom:"50px"}},v().createElement(E.GridItem,{span:3},v().createElement("div",null,v().createElement(E.Tabs,{activeKey:S,onSelect:(e,t)=>{k(t)},isVertical:!0},v().createElement(E.Tab,{eventKey:0,title:v().createElement(E.TabTitleText,null,d("core"))}),a.connector_type_id.includes("debezium")&&_&&_.steps&&_.steps.map(((e,t)=>v().createElement(E.Tab,{key:e,eventKey:t+1,title:v().createElement(E.TabTitleText,null,e)}))),!a.connector_type_id.includes("debezium")&&v().createElement(v().Fragment,null,v().createElement(E.Tab,{eventKey:1,title:v().createElement(E.TabTitleText,null,d("connectorSpecific"))}),v().createElement(E.Tab,{eventKey:2,title:v().createElement(E.TabTitleText,null,d("errorHandling"))}))))),v().createElement(E.GridItem,{span:9},v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:10},0===S&&v().createElement(j,null,!i().isEmpty(I)&&v().createElement(ae,{editMode:t,configuration:I,changeIsValid:L,onUpdateConfiguration:G})),a.connector_type_id.includes("debezium")&&(null==_?void 0:_.Configurator)&&v().createElement(j,null,v().createElement(v().Fragment,null,v().createElement(E.Title,{headingLevel:"h3",size:E.TitleSizes["2xl"],className:"pf-u-pr-md pf-u-pb-md"},null==_?void 0:_.steps[S-1]),v().createElement(v().Suspense,{fallback:T.g},v().createElement(ye,{Configurator:null==_?void 0:_.Configurator,isEditMode:t,configuration:A,updateFedConfiguration:J,connector:o,step:S})))),!a.connector_type_id.includes("debezium")&&1===S&&v().createElement(j,null,v().createElement(ve,{editMode:t,schema:null===(c=o)||void 0===c?void 0:c.schema,configuration:A,changeIsValid:L,onUpdateConfiguration:G})),!a.connector_type_id.includes("debezium")&&2===S&&v().createElement(j,null,v().createElement(fe,{editMode:t,schema:null===(s=o)||void 0===s?void 0:s.schema,configuration:B,changeIsValid:L,onUpdateConfiguration:G}))),v().createElement(E.GridItem,{span:2,className:"pf-u-pl-md"},!t&&v().createElement(E.Button,{variant:"primary",onClick:()=>{n(!t)}},d("editProperties"))))))),t&&v().createElement(E.PageSection,{className:"pf-u-p-md pf-u-box-shadow-md-top configuration-page_footer",hasShadowTop:!0,variant:"light"},v().createElement(E.Button,{variant:"primary",className:"pf-u-mr-md pf-u-mb-sm",onClick:()=>{(({accessToken:e,connectorsApiBasePath:t,connectorUpdate:n,connectorId:a,updatedName:o,updatedServiceAccount:c})=>{const s=new l.ConnectorsApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t)=>{const l=r().CancelToken.source();return s.patchConnector(a,Object.assign(Object.assign(Object.assign({},o&&{name:o}),!i().isEmpty(n)&&{connector:Object.assign({},n)}),c&&{service_account:c}),{cancelToken:l.token,headers:{"Content-type":"application/merge-patch+json"}}).then((()=>{e()})).catch((e=>{r().isCancel(e)||t(e.response.data.reason)})),()=>{l.cancel("Operation canceled by the user.")}}})(Object.assign(Object.assign({accessToken:f,connectorsApiBasePath:m,connectorUpdate:Object.assign({},he(Object.assign(Object.assign({},A instanceof Map?W(A):A),{error_handler:B}),a.connector)),connectorId:a.id},I.name!==a.name&&{updatedName:I.name}),I.service_account!==a.service_account&&{updatedServiceAccount:I.service_account}))(V,q)},isDisabled:!F},d("Save")),v().createElement(E.Button,{variant:"secondary",onClick:y?()=>C(!0):$},d("cancel"))),v().createElement(E.Modal,{title:d("leaveEditConnectorConfirmModalTitle"),variant:"small",isOpen:h,onClose:z,actions:[v().createElement(E.Button,{key:"confirm",variant:"primary",onClick:$},d("leave")),v().createElement(E.Button,{key:"cancel",variant:"link",onClick:z},d("cancel"))]},d("leaveEditConnectorConfirmModalDescription")))},ye=({Configurator:e,connector:t,configuration:n,updateFedConfiguration:a,isEditMode:o,step:r})=>{let c;return c=n instanceof Map?new Map(n):X(JSON.parse(JSON.stringify(n))),v().createElement(e,{activeStep:r-1,connector:t,uiPath:o?R.EDIT:R.VIEW,configuration:c instanceof Map?c:new Map(Object.entries(c)),onChange:a})},be=({name:e,id:t,type:n,bootstrapServer:a,kafkaId:o,owner:r,namespaceId:c,namespaceMsg:i,namespaceMsgVariant:l,createdAt:s,modifiedAt:d,error:u})=>{const{t:p}=(0,D.useTranslation)(),[m,g]=v().useState(!1),h=(e,t)=>v().createElement(v().Fragment,null,t&&v().createElement(v().Fragment,null,v().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},e),v().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},(()=>{var n;switch(e){case p("failureReason"):return(e=>e.length>200?v().createElement(v().Fragment,null,!m&&e.length>200?e.substring(0,200)+"... ":e,v().createElement(E.Button,{onClick:()=>g(!m),variant:"link"},p(m?"viewLess":"viewMore"))):e)(t);case p("kafkaInstance"):return(null===(n=t)||void 0===n?void 0:n.name)?v().createElement(E.Button,{className:"Kafka-link-button",variant:"link",onClick:()=>{window.open("https://console.redhat.com/application-services/streams/kafkas/"+t.id,"_blank")}},t.name):"string"==typeof t?v().createElement(E.Text,{component:E.TextVariants.p,className:"pf-u-color-400"},t):t;default:return t}})())));return v().createElement(E.TextContent,null,v().createElement(E.TextList,{component:E.TextListVariants.dl},h(p("connector"),e),h(p("connectorId"),t),h(p("connectorType"),n),h(p("bootstrapServer"),a),h(p("kafkaInstance"),o),h(p("namespace"),c),i&&h(p(""),v().createElement(E.Alert,{customIcon:v().createElement(f.OutlinedClockIcon,null),className:"my-class",variant:l,isInline:!0,isPlain:!0,title:i})),h(p("owner"),r),h(p("timeCreated"),v().createElement("time",{title:p("{{date}}",{date:s}),dateTime:s.toISOString()},p("{{ date, ago }}",{date:s}))),h(p("timeUpdated"),v().createElement("time",{title:p("{{date}}",{date:d}),dateTime:d.toISOString()},p("{{ date, ago }}",{date:d}))),h(p("failureReason"),u)))},Se=({connectorData:e})=>{var t,n,a;const[o,r]=(0,g.useState)(),[c,i]=(0,g.useState)(),{connectorsApiBasePath:l,kafkaManagementApiBasePath:s,getToken:d}=w(),u=(0,N.useAlert)(),{t:h}=(0,D.useTranslation)(),C=(0,g.useCallback)((e=>{r(e)}),[]),y=(0,g.useCallback)((e=>{i(e)}),[]),b=(0,g.useCallback)((e=>{null==u||u.addAlert({id:"connector-overview-page",variant:E.AlertVariant.danger,title:h("somethingWentWrong"),description:e})}),[u,h]),S=(0,g.useCallback)((e=>{404===e.status?i(h("KafkaInstanceExpired")):null==u||u.addAlert({id:"connector-drawer",variant:E.AlertVariant.danger,title:h("somethingWentWrong"),description:e.data.reason})}),[u,h]);return(0,g.useEffect)((()=>{var t;p({accessToken:d,connectorsApiBasePath:l,namespaceId:null==e?void 0:e.namespace_id})(C,b),m({accessToken:d,kafkaManagementBasePath:s,KafkaInstanceId:null===(t=null==e?void 0:e.kafka)||void 0===t?void 0:t.id})(y,S)}),[e]),v().createElement(E.PageSection,{variant:E.PageSectionVariants.light},(null==o?void 0:o.expiration)&&v().createElement(E.Alert,{customIcon:v().createElement(f.ClockIcon,null),className:"pf-u-mb-md",variant:Z(new Date(null==o?void 0:o.expiration)),isInline:!0,title:(e=>{const{hours:t,min:n}=U(new Date(e));return t<0||n<0?h("connectorExpiredMsg"):h("connectorExpire",{hours:t,min:n})})(null==o?void 0:o.expiration)}),"failed"===(null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.state)&&v().createElement(E.Hint,{className:"pf-u-mb-md"},v().createElement(E.HintBody,null,v().createElement("p",null,h("previewModeMsg")),v().createElement(D.Trans,{i18nKey:"supportEmailMsg"},"You can still get help by emailing us at",v().createElement(E.ClipboardCopy,{hoverTip:"Copy",clickTip:"Copied",variant:"inline-compact"},"rhosak-eval-support@redhat.com"),". This mailing list is monitored by the Red Hat OpenShift Application Services team."))),v().createElement(be,{name:null==e?void 0:e.name,id:null==e?void 0:e.id,type:null==e?void 0:e.connector_type_id,bootstrapServer:null===(n=null==e?void 0:e.kafka)||void 0===n?void 0:n.url,kafkaId:c||v().createElement(E.Spinner,{size:"md"}),namespaceId:o?o.name:v().createElement(E.Spinner,{size:"md"}),namespaceMsg:(null==o?void 0:o.expiration)&&(e=>{const{hours:t,min:n}=U(new Date(e));return t<0||n<0?h("connectorExpiredInline"):h("connectorExpireInline",{hours:t,min:n})})(null==o?void 0:o.expiration),namespaceMsgVariant:(null==o?void 0:o.expiration)?Z(new Date(null==o?void 0:o.expiration)):void 0,owner:null==e?void 0:e.owner,createdAt:new Date(null==e?void 0:e.created_at),modifiedAt:new Date(null==e?void 0:e.modified_at),error:null===(a=null==e?void 0:e.status)||void 0===a?void 0:a.error}))},ke=e=>e.includes("&")?e.substring(1,e.indexOf("&")):e.substring(1),Te=({onSave:e})=>{let{id:t}=(0,B.useParams)(),{hash:n}=(0,B.useLocation)();const a=(0,B.useHistory)(),o=(0,N.useAlert)(),{t:r}=(0,D.useTranslation)(),{connectorsApiBasePath:c,getToken:i}=w(),[l,s]=(0,g.useState)(ke(n)),[p,m]=(0,g.useState)(),[f,h]=(0,g.useState)(),[C,y]=(0,g.useState)(),b=(0,g.useCallback)((e=>{h(e)}),[]),S=(0,g.useCallback)((e=>{y(e)}),[]),k=(0,g.useCallback)((e=>{m(e)}),[m]),I=(0,g.useCallback)((e=>{null==o||o.addAlert({id:"connector-details-page",variant:E.AlertVariant.danger,title:r("somethingWentWrong"),description:e})}),[o,r]);(0,g.useEffect)((()=>{n.includes(x.Configuration)&&m(!0)}),[]),(0,g.useEffect)((()=>{d({accessToken:i,connectorsApiBasePath:c,connectorId:t})(b,I)}),[t]),(0,g.useEffect)((()=>{s(ke(n))}),[n]),(0,g.useEffect)((()=>{(null==f?void 0:f.connector_type_id)&&u({accessToken:i,connectorsApiBasePath:c,connectorTypeId:null==f?void 0:f.connector_type_id})(S)}),[f]);return v().createElement(v().Fragment,null,!f&&v().createElement(T.g,null),f&&v().createElement(v().Fragment,null,v().createElement(Ie,{connectorData:f}),v().createElement(E.PageSection,{padding:{default:"noPadding"},style:{zIndex:0},variant:E.PageSectionVariants.light},v().createElement(E.Tabs,{activeKey:l,onSelect:(e,t)=>{s(t),a.push(`#${t}`)},className:"connector_detail-tabs"},v().createElement(E.Tab,{eventKey:x.Overview,title:v().createElement(E.TabTitleText,null,r("overview"))},v().createElement(Se,{connectorData:f})),v().createElement(E.Tab,{eventKey:x.Configuration,title:v().createElement(E.TabTitleText,null,r("configuration"))},C?v().createElement(Ce,{onSave:e,editMode:p||!1,updateEditMode:k,connectorData:f,connectorTypeDetails:C}):v().createElement(T.g,null))))))},Ie=({connectorData:e})=>{var t;const{t:n}=(0,D.useTranslation)();return v().createElement(E.PageSection,{variant:"light"},v().createElement(E.Breadcrumb,null,v().createElement(E.BreadcrumbItem,null,v().createElement(B.Link,{to:"/"},n("connectorsInstances"))),v().createElement(E.BreadcrumbItem,{isActive:!0},null==e?void 0:e.name)),v().createElement(E.Level,{className:"pf-u-pt-md pf-u-pb-md"},v().createElement(E.LevelItem,null,v().createElement(E.Level,null,v().createElement(E.Title,{headingLevel:"h1",className:"pf-u-pr-md"},null==e?void 0:e.name),v().createElement(y,{desiredState:null==e?void 0:e.desired_state,name:null==e?void 0:e.name,state:null===(t=null==e?void 0:e.status)||void 0===t?void 0:t.state}))),v().createElement(E.LevelItem,null)))};var xe=n(38801);const Ae=(0,z.createModel)({accessToken:()=>Promise.resolve(""),connectorsApiBasePath:"",connector:{}},{events:{"connector.start":()=>({}),"connector.stop":()=>({}),"connector.remove":()=>({}),"connector.select":()=>({}),"connector.actionSuccess":e=>e,"connector.actionError":e=>e},actions:{notifySuccess:()=>({}),notifyError:()=>({}),notifySelect:({connector:e})=>({connector:e})}}),Pe=Ae.assign(((e,t)=>({connector:t.connector})),"connector.actionSuccess"),we=Ae.createMachine({id:"connector",initial:"verify",context:Ae.initialContext,states:{verify:{always:[{target:"ready",cond:"isReady"},{target:"stopped",cond:"isStopped"},{target:"deleted",cond:"isDeleted"}]},ready:{on:{"connector.stop":"stoppingConnector","connector.remove":"deletingConnector"}},stopped:{on:{"connector.start":"startingConnector","connector.remove":"deletingConnector"}},deleted:{},startingConnector:{invoke:{id:"startingConnectorCb",src:e=>(({accessToken:e,connectorsApiBasePath:t,connector:n})=>{const a=new l.ConnectorsApi(new l.Configuration({accessToken:e,basePath:t}));return e=>{const t=r().CancelToken.source();return a.patchConnector(n.id,{desired_state:l.ConnectorDesiredState.Ready},{cancelToken:t.token,headers:{"Content-type":"application/merge-patch+json"}}).then((t=>{e({type:"connector.actionSuccess",connector:t.data})})).catch((t=>{r().isCancel(t)||e({type:"connector.actionError",error:t.response.data.reason})})),()=>{t.cancel("Operation canceled by the user.")}}})({accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,connector:e.connector})},on:{"connector.actionSuccess":{target:"verify",actions:[Pe,"notifySuccess"]},"connector.actionError":{target:"verify",actions:"notifyError"}}},stoppingConnector:{invoke:{id:"stoppingConnectorCb",src:e=>(({accessToken:e,connectorsApiBasePath:t,connector:n})=>{const a=new l.ConnectorsApi(new l.Configuration({accessToken:e,basePath:t}));return e=>{const t=r().CancelToken.source();return a.patchConnector(n.id,{desired_state:l.ConnectorDesiredState.Stopped},{cancelToken:t.token,headers:{"Content-type":"application/merge-patch+json"}}).then((t=>{e({type:"connector.actionSuccess",connector:t.data})})).catch((t=>{r().isCancel(t)||e({type:"connector.actionError",error:t.response.data.reason})})),()=>{t.cancel("Operation canceled by the user.")}}})({accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,connector:e.connector})},on:{"connector.actionSuccess":{target:"verify",actions:["updateState","notifySuccess"]},"connector.actionError":{target:"verify",actions:"notifyError"}}},deletingConnector:{invoke:{id:"deletingConnectorCb",src:e=>(({accessToken:e,connectorsApiBasePath:t,connector:n})=>{const a=new l.ConnectorsApi(new l.Configuration({accessToken:e,basePath:t}));return e=>{const t=r().CancelToken.source();return a.deleteConnector(n.id,{cancelToken:t.token}).then((()=>{e({type:"connector.actionSuccess",connector:Object.assign(Object.assign({},n),{status:"deleting",desired_state:"deleted"})})})).catch((t=>{r().isCancel(t)||e({type:"connector.actionError",error:t.response.data.reason})})),()=>{t.cancel("Operation canceled by the user.")}}})({accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,connector:e.connector})},on:{"connector.actionSuccess":{target:"deleted",actions:["updateState","notifySuccess"]},"connector.actionError":{target:"verify",actions:"notifyError"}}}},on:{"connector.select":{actions:"notifySelect"}}},{guards:{isReady:e=>"ready"===e.connector.desired_state,isStopped:e=>"stopped"===e.connector.desired_state,isDeleted:e=>"deleted"===e.connector.desired_state},actions:{notifySuccess:(0,L.sendParent)("actionSuccess"),notifyError:(0,L.sendParent)("actionFailure"),notifySelect:(0,L.sendParent)((({connector:e})=>({type:"selectConnector",connector:e})))}}),De=e=>{const{connector:t,canStart:n,canStop:a,canDelete:o}=(0,xe.useSelector)(e,(0,g.useCallback)((e=>({connector:e.context.connector,canStart:!0===we.transition(e,"connector.start").changed,canStop:!0===we.transition(e,"connector.stop").changed,canDelete:!0===we.transition(e,"connector.remove").changed})),[e]));return{connector:t,canStart:n,canStop:a,canDelete:o,onStart:(0,g.useCallback)((()=>e.send({type:"connector.start"})),[e]),onStop:(0,g.useCallback)((()=>e.send({type:"connector.stop"})),[e]),onDelete:(0,g.useCallback)((()=>e.send({type:"connector.remove"})),[e]),onSelect:(0,g.useCallback)((()=>e.send({type:"connector.select"})),[e])}},Be=({connectorName:e,onCancel:t,onConfirm:n,showDialog:a})=>{const{t:o}=(0,D.useTranslation)(),[r,c]=(0,g.useState)(""),i=r===e;return v().createElement(E.Modal,{variant:E.ModalVariant.small,title:o("deleteConnectorModalTitle"),titleIconVariant:"warning",isOpen:a,onClose:t,actions:[v().createElement(E.Button,{key:"confirm",variant:"danger",isDisabled:!i,onClick:()=>{c(""),n()}},o("delete")),v().createElement(E.Button,{key:"cancel",variant:"link",onClick:()=>{c(""),t()}},o("cancel"))]},v().createElement(E.Stack,null,v().createElement(E.StackItem,null,v().createElement(D.Trans,{i18nKey:"deleteConnectorModalDescription"},"Connector ",v().createElement("strong",null,{connectorName:e})," will be deleted.")),v().createElement(E.StackItem,null,v().createElement(D.Trans,{i18nKey:"deleteConnectorModalConfirmationPrompt"},"Type ",v().createElement("strong",null,{connectorName:e})," to confirm the deletion.")),v().createElement(E.StackItem,null,v().createElement(E.TextInput,{value:r,type:"text",onChange:c,"aria-label":"name input"}))))};function Ne(e,t,n){const{pollingEnabled:a,initialPageSize:o,onBeforeSetResponse:r}=n||{},c=(0,z.createModel)({request:{page:1,size:o||10},response:void 0,pollingEnabled:a||!1,onBeforeSetResponse:r,dataTransformer:t},{events:Object.assign({},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e}),actions:{notifyReady:()=>({}),notifyLoading:()=>({}),notifySuccess:()=>({}),notifyError:()=>({}),forwardUnknownEventsToParent:()=>({})}}),i=c.assign(((e,t)=>{var n,a;return t.page!==e.request.page?{}:(e.onBeforeSetResponse&&e.onBeforeSetResponse(null===(n=e.response)||void 0===n?void 0:n.items),{response:{items:null===(a=t.items)||void 0===a?void 0:a.map((t=>e.dataTransformer(t))),total:t.total,error:void 0}})}),"api.setResponse"),l=c.assign((e=>{e.actor&&e.actor.stop&&e.actor.stop();return{actor:(0,F.spawn)(m(e))}})),s=c.assign(((e,t)=>{var n,a;return t.page!==e.request.page?{}:{response:{items:(null===(n=e.response)||void 0===n?void 0:n.items)||[],total:(null===(a=e.response)||void 0===a?void 0:a.total)||0,error:t.error}}}),"api.setError"),d=c.assign((e=>({request:Object.assign(Object.assign({},e.request),{page:e.request.page+1})})),"api.nextPage"),u=c.assign((e=>({request:Object.assign(Object.assign({},e.request),{page:e.request.page-1})})),"api.prevPage"),p=c.assign(((e,t)=>{const{page:n,size:a,search:o}=t;return{request:{page:n||e.request.page,size:a||e.request.size,search:o}}}),"api.query"),m=t=>n=>e(t.request,(e=>n(c.events["api.setResponse"](e))),(e=>n(c.events["api.setError"](e))));return c.createMachine({id:"paginatedApiMachine",context:c.initialContext,type:"parallel",states:{api:{initial:"idle",states:{idle:{entry:c.actions.notifyReady(),on:{"api.query":{target:"loading",actions:p}}},success:{always:[{target:"queryEmpty",cond:"isQueryEmpty"},{target:"queryResults",cond:"isQuerySuccesful"},{target:"empty",cond:"isTotalZero"},{target:"results"}]},queryEmpty:{tags:"queryEmpty",on:{"api.query":{target:"loading",actions:p},"api.prevPage":{target:"loading",actions:u,cond:"isNotFirstPage"},"api.refresh":{target:"loading"}}},queryResults:{tags:"queryResults",on:{"api.query":{target:"loading",actions:p},"api.nextPage":{target:"loading",actions:d,cond:"isNotLastPage"},"api.prevPage":{target:"loading",actions:u,cond:"isNotFirstPage"},"api.refresh":{target:"loading"}}},empty:{tags:"empty",on:{"api.query":{target:"loading",actions:p},"api.refresh":{target:"loading"}}},results:{tags:"results",on:{"api.query":{target:"loading",actions:p},"api.nextPage":{target:"loading",actions:d,cond:"isNotLastPage"},"api.prevPage":{target:"loading",actions:u,cond:"isNotFirstPage"},"api.refresh":{target:"loading"}}},error:{tags:"error",on:{"api.query":{target:"loading",actions:p},"api.refresh":{target:"loading"},"api.prevPage":{target:"loading",actions:u,cond:"isNotFirstPage"}}},loading:{tags:["loading"],entry:[c.actions.notifyLoading(),l],on:{"api.query":{target:"loading",actions:p},"api.setResponse":{target:"success",actions:[i,c.actions.notifySuccess()]},"api.setError":{target:"error",actions:[s,c.actions.notifyError()]}}}},on:{"*":{actions:"forwardUnknownEventsToParent"}}},polling:{entry:l,on:{"api.setResponse":{actions:i}},after:{INTERVAL:{cond:"isPollingEnabled",target:"polling"}}}}},{delays:{INTERVAL:5e3},actions:{notifyReady:(0,L.sendParent)({type:"api.ready"}),notifySuccess:(0,L.sendParent)((e=>Object.assign({type:"api.success"},e.response))),notifyError:(0,L.sendParent)((e=>{var t;return{type:"api.error",error:null===(t=e.response)||void 0===t?void 0:t.error}})),notifyLoading:(0,L.sendParent)((e=>Object.assign({type:"api.loading"},e.request))),forwardUnknownEventsToParent:(0,L.pure)(((e,t)=>!1===Object.keys(c.events).includes(t.type)?(0,L.sendParent)(((e,t,n)=>n._event.data)):[]))},guards:{isNotFirstPage:e=>void 0!==e.response&&e.request.page>1,isNotLastPage:e=>void 0!==e.response&&e.request.size>0&&e.request.page<Math.ceil(e.response.total/e.request.size),isTotalZero:e=>{var t;return 0===(null===(t=e.response)||void 0===t?void 0:t.total)},isQuerySuccesful:e=>{var t;return void 0!==e.request.search&&void 0!==e.response&&(null===(t=e.response)||void 0===t?void 0:t.total)>0},isQueryEmpty:e=>{var t;return void 0!==e.request.search&&void 0!==e.response&&0===(null===(t=e.response)||void 0===t?void 0:t.total)},isPollingEnabled:e=>e.pollingEnabled}})}const Oe=e=>(0,xe.useSelector)(e,(0,g.useCallback)((e=>({request:e.context.request,response:e.context.response,loading:e.hasTag("loading"),queryEmpty:e.hasTag("queryEmpty"),queryResults:e.hasTag("queryResults"),noResults:e.hasTag("empty"),results:e.hasTag("results"),error:e.hasTag("error"),firstRequest:void 0===e.context.response})),[e])),Me=(0,z.createModel)({accessToken:()=>Promise.resolve(""),connectorsApiBasePath:"",selectedConnector:void 0},{events:Object.assign(Object.assign({},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e}),{selectConnector:e=>e,deselectConnector:()=>({})}),actions:{notifyError:()=>({})}}),_e=Me.assign(((e,t)=>({selectedConnector:t.connector})),"selectConnector"),je=Me.assign((e=>({selectedConnector:void 0})),"deselectConnector"),Re=Me.createMachine({id:"connectors",initial:"root",context:Me.initialContext,states:{root:{type:"parallel",states:{api:{initial:"idle",invoke:{id:I,src:e=>Ne((({accessToken:e,connectorsApiBasePath:t})=>{const n=new l.ConnectorsApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t,a)=>{const o=r().CancelToken.source(),{page:c,size:i,search:l}=e,{name:s}=l||{},d=[s&&s.length>0?` name like '%${s}%'`:void 0].filter(Boolean).map((e=>`(${e})`)).join(" AND ");return n.listConnectors(`${c}`,`${i}`,"",d,{cancelToken:o.token}).then((e=>{t({items:e.data.items||[],total:e.data.total,page:e.data.page,size:e.data.size})})).catch((t=>{r().isCancel(t)||a({error:t.message,page:e.page})})),()=>{o.cancel("Operation canceled by the user.")}}})(e),(t=>(0,F.spawn)((e=>we.withContext(e))({accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,connector:t}),`connector-${t.id}`)),{pollingEnabled:!0,onBeforeSetResponse:e=>{e&&e.forEach((e=>{e&&e.stop&&e.stop()}))}})},states:{idle:{on:{"api.ready":"ready"}},ready:{entry:(0,F.send)("api.query",{to:I})}},on:{"api.refresh":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.nextPage":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.prevPage":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.query":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.error":{actions:"notifyError"},selectConnector:{actions:_e},deselectConnector:{actions:je}}},listing:{}}}}},{actions:{notifyError:(e,t)=>{console.log(e,t),"api.error"===t.type&&e.onError&&e.onError(t.error)}}}),Fe=(0,g.createContext)(null),Le=({children:e,accessToken:t,connectorsApiBasePath:n,onError:a})=>{const o=(0,xe.useInterpret)(Re,{context:{accessToken:t,connectorsApiBasePath:n,onError:a},devTools:!0});return v().createElement(Fe.Provider,{value:o},e)},ze=()=>{const e=(0,g.useContext)(Fe);if(!e)throw new Error("useConnectorsMachineService() must be used in a child of <ConnectorsMachineProvider>");return e},Ge=()=>{const e=ze(),t=Oe(e.state.children.paginatedApi),{selectedConnector:n}=(0,xe.useSelector)(e,(0,g.useCallback)((e=>({selectedConnector:e.context.selectedConnector})),[e])),a=(0,g.useCallback)((()=>{e.send({type:"deselectConnector"})}),[e]),o=(0,g.useCallback)((t=>{e.send(Object.assign({type:"api.query"},t))}),[e]);return Object.assign(Object.assign({},t),{selectedConnector:n,deselectConnector:a,runQuery:o})},qe=({onConnectorDetail:e,onDuplicateConnector:t})=>{var n;const{response:a,selectedConnector:o}=Ge(),r=null===(n=null==a?void 0:a.items)||void 0===n?void 0:n.filter((e=>e.id==`connector-${null==o?void 0:o.id}`))[0],{t:c}=(0,D.useTranslation)(),[i,l]=(0,g.useState)(!1),[s,d]=(0,g.useState)(!1),{connector:u,canStart:p,canStop:m,canDelete:f,onStart:h,onStop:C,onDelete:y}=De(r),b=()=>{const e=document.getElementById("connector-action");null==e||e.focus()},S=[v().createElement(E.DropdownItem,{key:"start action",component:"button",onClick:h,isDisabled:!p},c("Start")),v().createElement(E.DropdownItem,{key:"stop action",component:"button",onClick:C,isDisabled:!m},c("Stop")),v().createElement(E.DropdownItem,{key:"edit action",component:"button",onClick:()=>e(u.id,"configuration")},c("Edit")),v().createElement(E.DropdownItem,{key:"Duplicate action",component:"button",onClick:()=>t(u.id)},c("Duplicate")),v().createElement(E.DropdownSeparator,{key:"separator"}),v().createElement(E.DropdownItem,{key:"delete action",component:"button",onClick:()=>d(!0),isDisabled:!f},c("Delete"))];return v().createElement(v().Fragment,null,v().createElement(Be,{connectorName:u.name,showDialog:s,onCancel:()=>{d(!1)},onConfirm:()=>{d(!1),y()}}),v().createElement(E.Dropdown,{onSelect:e=>{l(!i),b()},toggle:v().createElement(E.KebabToggle,{onToggle:e=>{l(e)},id:"connector-action"}),isOpen:i,isPlain:!0,dropdownItems:S,position:E.DropdownPosition.right}))},Ve=({currentConnectorRef:e,children:t,connector:n,onClose:a,onConnectorDetail:o,onDuplicateConnector:r})=>{var c,i;return v().createElement(E.Drawer,{isExpanded:void 0!==n},v().createElement(E.DrawerContent,{panelContent:n?v().createElement(He,{name:n.name,id:n.id,bootstrapServer:n.kafka.url,kafkaId:n.kafka.id,owner:n.owner,namespaceId:n.namespace_id,createdAt:new Date(n.created_at),modifiedAt:new Date(n.modified_at),status:null===(c=n.status)||void 0===c?void 0:c.state,error:null===(i=n.status)||void 0===i?void 0:i.error,onClose:a,onConnectorDetail:o,onDuplicateConnector:r,currentConnectorRef:e}):void 0},t))},He=({currentConnectorRef:e,name:t,id:n,bootstrapServer:a,kafkaId:o,owner:r,namespaceId:c,createdAt:i,status:l,error:s,onClose:d,onConnectorDetail:u,onDuplicateConnector:h})=>{var C;const{t:b}=(0,D.useTranslation)(),[S,k]=(0,g.useState)(0),[T,I]=(0,g.useState)(),[x,A]=(0,g.useState)(),{connectorsApiBasePath:P,kafkaManagementApiBasePath:B,getToken:O}=w(),M=(0,N.useAlert)(),_=(0,g.useCallback)((e=>{I(e)}),[]),j=(0,g.useCallback)((e=>{A(e)}),[]),R=(0,g.useCallback)((e=>{null==M||M.addAlert({id:"connector-drawer",variant:E.AlertVariant.danger,title:b("somethingWentWrong"),description:e})}),[M,b]),F=(0,g.useCallback)((e=>{var t;404===e.status?A(b("KafkaInstanceExpired")):null==M||M.addAlert({id:"connector-drawer",variant:E.AlertVariant.danger,title:b("somethingWentWrong"),description:null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.reason})}),[M,b]);(0,g.useEffect)((()=>{I(null),p({accessToken:O,connectorsApiBasePath:P,namespaceId:c})(_,R)}),[c]),(0,g.useEffect)((()=>{A(""),m({accessToken:O,kafkaManagementBasePath:B,KafkaInstanceId:o})(j,F)}),[o]);const{connector:L}=De(e);v().useEffect((()=>{var e;"deleted"==(null===(e=L.status)||void 0===e?void 0:e.state)&&d()}),[L,d]);return v().createElement(E.DrawerPanelContent,{widths:{default:"width_50"}},v().createElement(E.DrawerHead,null,v().createElement(E.TextContent,null,v().createElement(E.Text,{component:E.TextVariants.small,className:"connector-drawer__header-text"},b("connectorName")),v().createElement(E.Flex,null,v().createElement(E.FlexItem,null,v().createElement(E.Title,{headingLevel:"h2",size:E.TitleSizes.xl,className:"connector-drawer__header-title"},t)),v().createElement(E.FlexItem,{spacer:{default:"spacerSm"}},v().createElement(y,{desiredState:L.desired_state,name:t,state:null===(C=L.status)||void 0===C?void 0:C.state})))),v().createElement(E.DrawerActions,null,v().createElement(qe,{onDuplicateConnector:h,onConnectorDetail:u,onClose:d}),v().createElement(E.DrawerCloseButton,{onClick:d}))),"failed"===l&&v().createElement(E.Hint,{className:"pf-u-mr-lg pf-u-ml-lg pf-u-p-md"},v().createElement(E.HintBody,null,v().createElement("p",null,b("previewModeMsg")),v().createElement(D.Trans,{i18nKey:"supportEmailMsg"},"You can still get help by emailing us at",v().createElement(E.ClipboardCopy,{hoverTip:"Copy",clickTip:"Copied",variant:"inline-compact"},"rhosak-eval-support@redhat.com"),". This mailing list is monitored by the Red Hat OpenShift Application Services team."))),v().createElement(E.DrawerPanelBody,null,v().createElement(E.Tabs,{activeKey:S,onSelect:(e,t)=>{k(t)}},v().createElement(E.Tab,{eventKey:0,title:v().createElement(E.TabTitleText,null,b("details"))},(null==T?void 0:T.expiration)&&v().createElement(E.Alert,{customIcon:v().createElement(f.ClockIcon,null),className:"pf-u-mt-md",variant:Z(new Date(null==T?void 0:T.expiration)),isInline:!0,title:(e=>{const{hours:t,min:n}=U(new Date(e));return t<0||n<0?b("connectorExpiredMsg"):b("connectorExpire",{hours:t,min:n})})(null==T?void 0:T.expiration)}),v().createElement("div",{className:"connector-drawer__tab-content"},v().createElement(be,{name:t,id:n,bootstrapServer:a,kafkaId:x||v().createElement(E.Spinner,{size:"md"}),namespaceId:T?T.name:v().createElement(E.Spinner,{size:"md"}),namespaceMsg:(null==T?void 0:T.expiration)&&(e=>{const{hours:t,min:n}=U(new Date(e));return t<0||n<0?b("connectorExpiredInline"):b("connectorExpireInline",{hours:t,min:n})})(null==T?void 0:T.expiration),namespaceMsgVariant:(null==T?void 0:T.expiration)?Z(new Date(null==T?void 0:T.expiration)):void 0,owner:r,createdAt:i,modifiedAt:new Date(L.modified_at),error:s}))))))};var Ke=n(55706),$e=n(86445);const We=({children:e})=>{const{t}=(0,D.useTranslation)();return v().createElement($e.TableComposable,{"aria-label":"Sortable Table",className:(0,Ke.css)("connectors-table-view__table")},v().createElement($e.Thead,null,v().createElement($e.Tr,null,v().createElement($e.Th,null,t("name")),v().createElement($e.Th,null,t("connector")),v().createElement($e.Th,null,t("status")))),v().createElement($e.Tbody,null,e))},Je=({connectorId:e,desiredState:t,name:n,type:a,state:o,isSelected:r,canStart:c,canStop:i,canDelete:l,onStart:s,onStop:d,onDelete:u,openDetail:p,onSelect:m,onDuplicateConnector:g})=>{const{t:h}=(0,D.useTranslation)(),C=[{title:h("start"),onClick:s,isDisabled:!c},{title:h("stop"),onClick:d,isDisabled:!i},{title:h("details"),onClick:m},{title:h("edit"),onClick:()=>p("configuration"),isDisabled:!1},{title:h("duplicate"),onClick:()=>g(e),isDisabled:!1},{isSeparator:!0},{title:h("delete"),onClick:u,isDisabled:!l}];return v().createElement($e.Tr,{onClick:e=>{var t;"button"!==(null===(t=e.target)||void 0===t?void 0:t.type)&&m()},className:(0,Ke.css)("pf-c-table-row__item","pf-m-selectable",r&&"pf-m-selected")},v().createElement($e.Td,{dataLabel:h("name")},v().createElement(E.Text,{component:E.TextVariants.a,isVisitedLink:!0,onClick:()=>p("overview")},n)),v().createElement($e.Td,{dataLabel:h("type")},a),v().createElement($e.Td,{dataLabel:h("status")},"failed"===(null==o?void 0:o.toLowerCase())?v().createElement(y,{desiredState:t,name:n,state:o,clickable:!0,popoverBody:v().createElement("div",null,v().createElement("p",null,h("previewModeMsg")),v().createElement(D.Trans,{i18nKey:"supportEmailMsg"},"You can still get help by emailing us at",v().createElement(E.ClipboardCopy,{hoverTip:"Copy",clickTip:"Copied",variant:"inline-compact",onClick:e=>e.stopPropagation()},"rhosak-eval-support@redhat.com"),". This mailing list is monitored by the Red Hat OpenShift Application Services team.")),popoverHeader:v().createElement("h1",{className:"connectors-failed_pop_over"},v().createElement(f.ExclamationCircleIcon,null)," ",h("failed"))}):v().createElement(y,{desiredState:t,name:n,state:o})),v().createElement($e.Td,{actions:{items:C},"data-testid":`actions-for-${e}`}))},Qe=({itemCount:e,page:t,perPage:n,isCompact:a=!1,onChange:o})=>v().createElement(E.Pagination,{className:"cos-ui-pagination",itemCount:e,page:t,perPage:n,perPageOptions:[{title:"1",value:1},{title:"5",value:5},{title:"10",value:10},{title:"20",value:20},{title:"50",value:50}],onSetPage:(e,t)=>o({page:t,size:n}),onPerPageSelect:(e,t)=>o({page:1,size:t}),variant:a?"top":"bottom",isCompact:a}),Ue=({itemCount:e,page:t,perPage:n,onChange:a,orderBy:o,search:r})=>{const{t:c}=(0,D.useTranslation)(),i=r&&r.name||"",[l,s]=(0,g.useState)(i),d=()=>{a({page:1,size:n,orderBy:o,search:{name:l}})},u=v().createElement(v().Fragment,null,v().createElement(E.ToolbarItem,null,v().createElement(E.InputGroup,null,v().createElement(E.TextInput,{name:"name",id:"name",type:"search","aria-label":"filter by connector name",value:`${l}`,ouiaId:"search-field",onChange:s,onKeyUp:e=>{"Enter"===e.key&&d()}}),v().createElement(E.Button,{variant:"control","aria-label":"search button for search input",onClick:d,ouiaId:"button-search"},v().createElement(f.SearchIcon,null))))),p=v().createElement(v().Fragment,null,v().createElement(E.ToolbarToggleGroup,{toggleIcon:v().createElement(f.FilterIcon,null),breakpoint:"xl"},u),v().createElement(E.ToolbarGroup,{variant:"icon-button-group"},v().createElement(E.ToolbarItem,null,v().createElement(B.NavLink,{className:"pf-c-button pf-m-primary",to:"/create-connector","data-ouia-component-id":"button-create"},c("createConnectorsInstance")))),v().createElement(E.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},v().createElement(Qe,{itemCount:e,page:t,perPage:n,onChange:e=>a(Object.assign(Object.assign({},e),{orderBy:o,search:r})),isCompact:!0})));return v().createElement(E.Toolbar,{id:"toolbar-group-types",collapseListedFiltersBreakpoint:"xl",className:"pf-u-p-md"},v().createElement(E.ToolbarContent,null,p))},Ze=()=>{const{t:e}=(0,D.useTranslation)();return v().createElement(E.EmptyState,{variant:E.EmptyStateVariant.full},v().createElement(E.EmptyStateIcon,{icon:f.ExclamationCircleIcon}),v().createElement(E.Title,{headingLevel:"h1",size:E.TitleSizes.lg},e("somethingWentWrong")),v().createElement(E.EmptyStateBody,null,e("genericErrorBody")))},Ye=({onHelp:e,onCreate:t})=>{const{t:n}=(0,D.useTranslation)();return v().createElement(E.EmptyState,{variant:E.EmptyStateVariant.large,className:(0,Ke.css)("pf-u-pt-2xl pf-u-pt-3xl-on-md")},v().createElement(E.EmptyStateIcon,{icon:f.PlusCircleIcon}),v().createElement(E.Title,{headingLevel:"h1",size:E.TitleSizes.xl},n("noConnectorInstances")),v().createElement(E.EmptyStateBody,null,v().createElement(D.Trans,{i18nKey:"gettingStartedBody"},"For help getting started, access the"," ",v().createElement(E.Button,{variant:E.ButtonVariant.link,isSmall:!0,isInline:!0,onClick:e,ouiaId:"link-QuickStart"},"quick start guide."))),v().createElement(E.Button,{variant:"primary",onClick:t,ouiaId:"button-create"},n("createAConnectorsInstance")))},Xe=({onClear:e})=>{const{t}=(0,D.useTranslation)();return v().createElement(E.EmptyState,{variant:E.EmptyStateVariant.large,className:(0,Ke.css)("pf-u-pt-2xl pf-u-pt-3xl-on-md")},v().createElement(E.EmptyStateIcon,{icon:f.SearchIcon}),v().createElement(E.Title,{headingLevel:"h2",size:E.TitleSizes.xl},t("noResultsFound")),v().createElement(E.EmptyStateBody,null,v().createElement(D.Trans,{i18nKey:"noFilterResultsFound"},"No results match the filter criteria."," ",v().createElement(E.Button,{variant:E.ButtonVariant.link,isSmall:!0,isInline:!0,onClick:e},"Clear all filters")," ","to show results.")))};var et=n(36238);const tt=({onCreateConnector:e,onConnectorDetail:t,onDuplicateConnector:n})=>{const{t:a}=(0,D.useTranslation)(),o=(0,N.useAlert)(),{connectorsApiBasePath:r,getToken:c}=w(),i=(0,g.useCallback)((e=>{null==o||o.addAlert({id:"connectors-table-error",variant:N.AlertVariant.danger,title:a("somethingWentWrong"),description:e})}),[o,a]);return v().createElement(Le,{accessToken:c,connectorsApiBasePath:r,onError:i},v().createElement(nt,{onCreateConnector:e,onConnectorDetail:t,onDuplicateConnector:n}))},nt=({onCreateConnector:e,onConnectorDetail:t,onDuplicateConnector:n})=>(()=>{const e=ze();return(0,xe.useSelector)(e,(0,g.useCallback)((e=>e.matches({root:{api:"ready"}})),[e]))})()?v().createElement(at,{onCreateConnector:e,onConnectorDetail:t,onDuplicateConnector:n}):v().createElement(T.g,null),at=({onCreateConnector:e,onConnectorDetail:t,onDuplicateConnector:n})=>{var a;const{t:o}=(0,D.useTranslation)(),r=(0,g.useContext)(et.QuickStartContext),{loading:c,error:i,noResults:l,queryEmpty:s,firstRequest:d,request:u,response:p,selectedConnector:m,deselectConnector:f,runQuery:h}=Ge(),C=null===(a=null==p?void 0:p.items)||void 0===a?void 0:a.filter((e=>e.id==`connector-${null==m?void 0:m.id}`))[0];switch(!0){case d:return v().createElement(T.g,null);case s:return v().createElement(Xe,{onClear:()=>h({page:1,size:10})});case c:return v().createElement(v().Fragment,null,v().createElement(E.PageSection,{variant:"light"},v().createElement(ot,null)),v().createElement(E.PageSection,{padding:{default:"noPadding"},isFilled:!0},v().createElement(E.Card,null,v().createElement(Ue,{itemCount:(null==p?void 0:p.total)||0,page:u.page,perPage:u.size,onChange:h}),v().createElement(T.g,null))));case l:return v().createElement(Ye,{onCreate:e,onHelp:()=>r.setActiveQuickStart&&r.setActiveQuickStart(o("connectors-getting-started"))});case i:return v().createElement(Ze,null);default:return v().createElement(Ve,{currentConnectorRef:C,connector:m,onConnectorDetail:t,onDuplicateConnector:n,onClose:f},v().createElement(E.PageSection,{variant:"light"},v().createElement(ot,null)),v().createElement(E.PageSection,{padding:{default:"noPadding"},isFilled:!0},v().createElement(rt,{onConnectorDetail:t,onDuplicateConnector:n})))}},ot=()=>{const{t:e}=(0,D.useTranslation)();return v().createElement(E.TextContent,null,v().createElement(E.Title,{headingLevel:"h1"},e("connectorsInstances")))},rt=({onConnectorDetail:e,onDuplicateConnector:t})=>{var n;const{request:a,response:o,selectedConnector:r,runQuery:c}=Ge();return v().createElement(E.Card,{className:"pf-u-pb-xl"},v().createElement(Ue,{itemCount:(null==o?void 0:o.total)||0,page:a.page,perPage:a.size,search:a.search,orderBy:a.orderBy,onChange:c}),v().createElement("div",{className:"pf-u-p-md"},v().createElement(We,null,null===(n=null==o?void 0:o.items)||void 0===n?void 0:n.map((n=>v().createElement(ct,{connectorRef:n,key:n.id,selectedConnector:r,onConnectorDetail:e,onDuplicateConnector:t}))))),v().createElement(Qe,{itemCount:(null==o?void 0:o.total)||0,page:a.page,perPage:a.size,onChange:e=>c(Object.assign(Object.assign({},e),{orderBy:a.orderBy,search:a.search})),isCompact:!1}))},ct=({connectorRef:e,selectedConnector:t,onConnectorDetail:n,onDuplicateConnector:a})=>{var o;const{connector:r,canStart:c,canStop:i,canDelete:l,onStart:s,onStop:d,onDelete:u,onSelect:p}=De(e),[m,E]=(0,g.useState)(!1);return v().createElement(v().Fragment,null,v().createElement(Be,{connectorName:r.name,showDialog:m,onCancel:()=>{E(!1)},onConfirm:()=>{E(!1),u()}}),v().createElement(Je,{connectorId:r.id,desiredState:r.desired_state,name:r.name,type:r.connector_type_id,category:"TODO: MISSING",state:null===(o=r.status)||void 0===o?void 0:o.state,isSelected:(null==t?void 0:t.id)===r.id,canStart:c,canStop:i,canDelete:l,onStart:s,onStop:d,onSelect:p,openDetail:e=>{n(r.id,e)},onDuplicateConnector:a,onDelete:()=>E(!0)}))};var it=n(64616);function lt(e){const t=[];for(const n of e)if(n.steps)for(const e of n.steps)t.push(e);else t.push(n);return t}function st(e){return e.toLocaleLowerCase().replaceAll(" ","-")}class dt extends g.Component{constructor(e){super(e),this.handleKeyClicks=e=>{e.keyCode===E.KEY_CODES.ESCAPE_KEY&&(this.state.isNavOpen?this.setState({isNavOpen:!this.state.isNavOpen}):this.props.isOpen&&this.props.onClose&&this.props.onClose())},this.getFlattenedSteps=()=>{const{steps:e}=this.props;return lt(e)},this.getFlattenedStepsIndex=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n].name===t)return n+1;return 0},this.initSteps=e=>{for(let t=0;t<e.length;t++){if(e[t].steps)for(let n=0;n<e[t].steps.length;n++)e[t].steps[n]=Object.assign({canJumpTo:!0},e[t].steps[n]);e[t]=Object.assign({canJumpTo:!0},e[t])}return e},this.getElement=e=>"function"==typeof e?e():e||document.body;const t=dt.currentId++;this.titleId=e.titleId||`pf-wizard-title-${t}`,this.descriptionId=e.descriptionId||`pf-wizard-description-${t}`,this.state={isNavOpen:!1}}componentDidMount(){const e="undefined"!=typeof document?document.body:null;e&&e.addEventListener("keydown",this.handleKeyClicks,!1)}componentWillUnmount(){const e="undefined"!=typeof document&&document.body||null;e&&e.removeEventListener("keydown",this.handleKeyClicks,!1)}render(){const e=this.props,{width:t,height:n,title:a,description:o,onClose:r,onSave:c,onBack:i,onNext:l,onGoToStep:s,goToStep:d,goToStepById:u,goToStepByName:p,className:m,steps:g,currentStep:f,nextButtonText:h="Next",backButtonText:C="Back",cancelButtonText:y="Cancel",hideClose:b,closeButtonAriaLabel:S="close",navAriaLabel:k,navAriaLabelledBy:T,mainAriaLabel:I,mainAriaLabelledBy:x,hasNoBodyPadding:A,footer:P,appendTo:w,isOpen:D,titleId:B,descriptionId:N}=e,M=(0,O.__rest)(e,["width","height","title","description","onClose","onSave","onBack","onNext","onGoToStep","goToStep","goToStepById","goToStepByName","className","steps","currentStep","nextButtonText","backButtonText","cancelButtonText","hideClose","closeButtonAriaLabel","navAriaLabel","navAriaLabelledBy","mainAriaLabel","mainAriaLabelledBy","hasNoBodyPadding","footer","appendTo","isOpen","titleId","descriptionId"]),_=this.getFlattenedSteps(),j=_.length<f?_.length:f,R=_[j-1],F=this.initSteps(g),L=R===_[0],z=!R||void 0===R.enableNext||R.enableNext,G={goToStepById:u,goToStepByName:p,onNext:l,onBack:i,onClose:r,activeStep:R},q=Object.assign(Object.assign({},n?{height:n}:{}),t?{width:t}:{}),V=v().createElement(E.WizardContextProvider,{value:G},v().createElement("div",Object.assign({},M,{className:(0,Ke.css)(it.Z.wizard,R&&R.isFinishedStep&&"pf-m-finished",m),style:Object.keys(q).length?q:void 0}),a&&v().createElement(E.WizardHeader,{titleId:this.titleId,descriptionId:this.descriptionId,onClose:r,title:a,description:o,closeButtonAriaLabel:S,hideClose:b}),v().createElement(E.WizardToggle,{mainAriaLabel:I,isInPage:void 0===D,mainAriaLabelledBy:(a||x)&&(x||this.titleId),isNavOpen:this.state.isNavOpen,onNavToggle:e=>this.setState({isNavOpen:e}),nav:e=>{const t={isOpen:e,"aria-label":k,"aria-labelledby":(a||T)&&(T||this.titleId)};return v().createElement(E.WizardNav,Object.assign({},t),F.map(((e,n)=>{if(e.isFinishedStep)return null;let a,o;if(e.steps){let r=!1,c=!1;for(const t of e.steps)R.name===t.name&&(r=!0),t.canJumpTo&&(c=!0);return o=this.getFlattenedStepsIndex(_,e.steps[0].name),v().createElement(E.WizardNavItem,{key:n,content:e.name,isCurrent:r,isDisabled:!c,step:o,onNavItemClick:d},v().createElement(E.WizardNav,Object.assign({},t,{returnList:!0}),e.steps.map(((e,t)=>e.isFinishedStep?null:(o=this.getFlattenedStepsIndex(_,e.name),a=e.canJumpTo,v().createElement(E.WizardNavItem,{key:`child_${t}`,content:e.name,isCurrent:R.name===e.name,isDisabled:!a,step:o,onNavItemClick:d}))))))}return o=this.getFlattenedStepsIndex(_,e.name),a=e.canJumpTo,v().createElement(E.WizardNavItem,Object.assign({},e.stepNavItemProps,{key:n,content:e.name,isCurrent:R.name===e.name,isDisabled:!a,step:o,onNavItemClick:d}))})))},steps:g,activeStep:R,hasNoBodyPadding:A},P||v().createElement("footer",{className:(0,Ke.css)(it.Z.wizardFooter)},v().createElement(E.Button,{variant:E.ButtonVariant.primary,type:"submit",onClick:l,isDisabled:!z,ouiaId:st(`button-${R&&R.nextButtonText||h}`)},R&&R.nextButtonText||h),!R.hideBackButton&&v().createElement(E.Button,{variant:E.ButtonVariant.secondary,onClick:i,className:(0,Ke.css)(L&&"pf-m-disabled"),ouiaId:st(`button-${C}`)},C),!R.hideCancelButton&&v().createElement("div",{className:it.Z.wizardFooterCancel},v().createElement(E.Button,{variant:E.ButtonVariant.link,onClick:r,ouiaId:st(`button-${y}`)},y))))));return void 0!==D?v().createElement(E.Modal,{width:null!==t?t:void 0,isOpen:D,variant:E.ModalVariant.large,"aria-labelledby":this.titleId,"aria-describedby":this.descriptionId,showClose:!1,hasNoBodyWrapper:!0},V):V}}dt.displayName="Wizard",dt.currentId=0,dt.defaultProps={title:void 0,description:"",className:"",nextButtonText:"Next",backButtonText:"Back",cancelButtonText:"Cancel",hideClose:!1,closeButtonAriaLabel:"Close",navAriaLabel:void 0,navAriaLabelledBy:void 0,mainAriaLabel:void 0,mainAriaLabelledBy:void 0,hasNoBodyPadding:!1,onGoToStep:void 0,width:void 0,height:void 0,footer:void 0,appendTo:void 0,isOpen:void 0};const ut=(0,z.createModel)({name:"",sACreated:!1,userServiceAccount:{clientId:"",clientSecret:""}},{events:{setName:e=>e,setSaCreated:e=>e,setServiceAccount:e=>e,confirm:()=>({})}}),pt=ut.assign({name:(e,t)=>t.name},"setName"),mt=ut.assign({sACreated:(e,t)=>t.sACreated},"setSaCreated"),gt=ut.assign(((e,t)=>({userServiceAccount:t.serviceAccount})),"setServiceAccount"),vt=ut.createMachine({id:"configureBasic",initial:"verify",states:{verify:{always:[{target:"valid",cond:"isBasicConfigured"},{target:"typing"}]},typing:{entry:(0,F.sendParent)("isInvalid"),on:{setName:{target:"verify",actions:pt},setSaCreated:{target:"verify",actions:mt},setServiceAccount:{target:"verify",actions:gt}}},valid:{id:"valid",entry:(0,F.sendParent)("isValid"),on:{setName:{target:"verify",actions:pt},setSaCreated:{target:"verify",actions:mt},setServiceAccount:{target:"verify",actions:gt},confirm:{target:"#done",cond:"isBasicConfigured"}}},done:{id:"done",type:"final",data:{name:e=>e.name,sACreated:e=>e.sACreated,userServiceAccount:e=>e.userServiceAccount,duplicateMode:e=>e.duplicateMode}}}},{guards:{isBasicConfigured:e=>void 0!==e.name&&e.name.length>0&&void 0!==e.userServiceAccount&&e.userServiceAccount.clientId.length>0&&e.userServiceAccount.clientSecret.length>0}}),Et=(0,z.createModel)({connector:{id:"something",name:"something",version:"0.1",schema:{}},steps:[],activeStep:0,isActiveStepValid:!1,configuration:void 0},{events:{entry:()=>({}),change:({configuration:e,isValid:t})=>({configuration:e,isValid:t}),next:()=>({}),prev:()=>({}),complete:()=>({})},actions:{changedStep:()=>({})}}),ft=Et.assign((e=>({activeStep:Math.min(e.activeStep+1,e.steps.length-1),isActiveStepValid:!1})),"next"),ht=Et.assign((e=>({activeStep:Math.max(e.activeStep-1,0),isActiveStepValid:!1})),"prev"),Ct=Et.assign(((e,t)=>({configuration:t.configuration,isActiveStepValid:t.isValid})),"change"),yt=Et.createMachine({id:"configurator",initial:"configuring",context:{connector:{id:"something",name:"something",version:"0.1",schema:{}},steps:["one","two","three"],activeStep:0,isActiveStepValid:!1,configuration:void 0},states:{configuring:{entry:(0,F.sendParent)("isInvalid"),always:[{target:"valid",cond:"activeStepValid"}]},valid:{id:"valid",initial:"determineStep",entry:(0,F.sendParent)("isValid"),states:{determineStep:{always:[{target:"#valid.lastStep",cond:"isLastStep"},{target:"#valid.hasNextStep"}]},hasNextStep:{on:{next:{target:"#configurator.configuring",actions:[ft,"changedStep"]}}},lastStep:{on:{next:"#configurator.configured"}}}},configured:{type:"final",data:({configuration:e})=>({configuration:e})}},on:{change:{target:"configuring",actions:Ct},prev:{target:"configuring",actions:[ht,"changedStep"]}}},{actions:{changedStep:(0,F.sendParent)((e=>({type:"changedStep",step:e.activeStep})))},guards:{isLastStep:e=>e.activeStep===e.steps.length-1,activeStepValid:e=>e.isActiveStepValid}}),bt=(0,z.createModel)({accessToken:()=>Promise.resolve(""),connectorsApiBasePath:"",response:void 0,selectedConnector:void 0,error:void 0},{events:Object.assign({selectConnector:e=>Object.assign({},e),deselectConnector:()=>({}),confirm:()=>({})},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e})}),St=bt.assign(((e,t)=>{const{type:n}=t;return{response:(0,O.__rest)(t,["type"])}}),"api.success"),kt=bt.assign({selectedConnector:(e,t)=>{var n,a;return null===(a=null===(n=e.response)||void 0===n?void 0:n.items)||void 0===a?void 0:a.find((e=>e.id===t.selectedConnector))}},"selectConnector"),Tt=bt.assign({selectedConnector:void 0},"deselectConnector"),It=bt.createMachine({context:bt.initialContext,id:"connectors",initial:"root",states:{root:{type:"parallel",states:{api:{initial:"idle",invoke:{id:I,src:e=>Ne((({accessToken:e,connectorsApiBasePath:t})=>{const n=new l.ConnectorTypesApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t,a)=>{const o=r().CancelToken.source(),{page:c,size:i,search:l}=e,{name:s,categories:d=[]}=l||{},u=[s&&s.length>0?` name like '%${s}%'`:void 0,d&&d.length>0?d.map((e=>`label = ${e}`)).join(" OR "):void 0].filter(Boolean).map((e=>`(${e})`)).join(" AND ");return n.getConnectorTypes(`${c}`,`${i}`,void 0,u,{cancelToken:o.token}).then((e=>{t({items:e.data.items||[],total:e.data.total,page:e.data.page,size:e.data.size})})).catch((t=>{r().isCancel(t)||a({error:t.message,page:e.page})})),()=>{o.cancel("Operation canceled by the user.")}}})(e),(e=>e),{initialPageSize:20})},states:{idle:{entry:(0,F.send)({type:"api.query",query:{categories:["sink","source"]}},{to:I}),on:{"api.ready":"ready"}},ready:{}},on:{"api.refresh":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.nextPage":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.prevPage":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.query":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.success":{actions:St}}},selection:{id:"selection",initial:"verify",states:{verify:{always:[{target:"selecting",cond:"noConnectorSelected"},{target:"valid",cond:"connectorSelected"}]},selecting:{entry:(0,F.sendParent)("isInvalid"),on:{selectConnector:{target:"valid",actions:kt,cond:(e,t)=>void 0!==t.selectedConnector}}},valid:{entry:(0,F.sendParent)("isValid"),on:{selectConnector:{target:"verify",actions:kt},deselectConnector:{target:"verify",actions:Tt},confirm:{target:"#done",cond:"connectorSelected"}}}}}}},done:{id:"done",type:"final",data:{selectedConnector:e=>e.selectedConnector,duplicateMode:e=>e.duplicateMode,connectorTypeDetails:e=>e.connectorTypeDetails}}}},{guards:{connectorSelected:e=>void 0!==e.selectedConnector,noConnectorSelected:e=>void 0===e.selectedConnector}}),xt=(0,z.createModel)({topic:"",userErrorHandler:""},{events:{setTopic:e=>e,setErrorHandler:e=>e,confirm:()=>({})}}),At=xt.assign({topic:(e,t)=>t.topic},"setTopic"),Pt=xt.assign(((e,t)=>({userErrorHandler:t.errorHandler})),"setErrorHandler"),wt=xt.createMachine({id:"configureErrorHandler",initial:"verify",states:{verify:{always:[{target:"valid",cond:"isErrorHandlerConfigured"},{target:"typing"}]},typing:{entry:(0,F.sendParent)("isInvalid"),on:{setTopic:{target:"verify",actions:At},setErrorHandler:{target:"verify",actions:Pt}}},valid:{id:"valid",entry:(0,F.sendParent)("isValid"),on:{setTopic:{target:"verify",actions:At},setErrorHandler:{target:"verify",actions:Pt},confirm:{target:"#done",cond:"isErrorHandlerConfigured"}}},done:{id:"done",type:"final",data:{topic:e=>e.topic,userErrorHandler:e=>e.userErrorHandler,duplicateMode:e=>e.duplicateMode}}}},{guards:{isErrorHandlerConfigured:e=>void 0!==e.userErrorHandler&&"dead_letter_queue"===e.userErrorHandler?void 0!==e.topic&&e.topic.length>0:void 0!==e.topic&&e.topic.length>0||void 0!==e.userErrorHandler}}),Dt=(0,z.createModel)({accessToken:()=>Promise.resolve(""),kafkaManagementBasePath:"",instances:void 0,selectedInstance:void 0,error:void 0},{events:Object.assign({selectInstance:e=>Object.assign({},e),deselectInstance:()=>({}),confirm:()=>({})},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e})}),Bt=Dt.assign(((e,t)=>{const{type:n}=t;return{response:(0,O.__rest)(t,["type"])}}),"api.success"),Nt=Dt.assign({selectedInstance:(e,t)=>{var n,a;return null===(a=null===(n=e.response)||void 0===n?void 0:n.items)||void 0===a?void 0:a.find((e=>e.id===t.selectedInstance))}},"selectInstance"),Ot=Dt.assign({selectedInstance:void 0},"deselectInstance"),Mt=Dt.createMachine({id:"kafkas",initial:"root",context:Dt.initialContext,states:{root:{type:"parallel",states:{api:{initial:"idle",invoke:{id:I,src:e=>Ne((({accessToken:e,kafkaManagementBasePath:t})=>{const n=new s.DefaultApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t,a)=>{const o=r().CancelToken.source(),{page:c,size:i,search:l}=e,{name:s,statuses:d,owner:u,cloudProviders:p,regions:m}=l||{},g=[s&&s.length>0?` name LIKE '%${s}%'`:void 0,u&&u.length>0?` owner LIKE '%${u}%'`:void 0,d&&d.length>0?d.map((e=>`status = ${e}`)).join(" OR "):void 0,p&&p.length>0?p.map((e=>`cloud_provider = ${e}`)).join(" OR "):void 0,m&&m.length>0?m.map((e=>`region = ${e}`)).join(" OR "):void 0].filter(Boolean).map((e=>`(${e})`)).join(" AND ");return n.getKafkas(`${c}`,`${i}`,void 0,g,{cancelToken:o.token}).then((e=>{t({items:e.data.items||[],total:e.data.total,page:e.data.page,size:e.data.size})})).catch((t=>{r().isCancel(t)||a({error:t.message,page:e.page})})),()=>{o.cancel("Operation canceled by the user.")}}})(e),(e=>e))},states:{idle:{entry:(0,F.send)("api.query",{to:I}),on:{"api.ready":"ready"}},ready:{}},on:{"api.refresh":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.nextPage":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.prevPage":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.query":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.success":{actions:Bt}}},selection:{id:"selection",initial:"verify",states:{verify:{always:[{target:"selecting",cond:"noInstanceSelected"},{target:"valid",cond:"instanceSelected"}]},selecting:{entry:(0,L.sendParent)("isInvalid"),on:{selectInstance:{target:"valid",actions:Nt}}},valid:{entry:(0,L.sendParent)("isValid"),on:{selectInstance:{target:"verify",actions:Nt,cond:(e,t)=>void 0!==t.selectedInstance},deselectInstance:{target:"verify",actions:Ot},confirm:{target:"#done",cond:"instanceSelected"}}}}}}},done:{id:"done",type:"final",data:{selectedInstance:e=>e.selectedInstance,duplicateMode:e=>e.duplicateMode}}}},{guards:{instanceSelected:e=>void 0!==e.selectedInstance,noInstanceSelected:e=>void 0===e.selectedInstance}}),_t=(0,z.createModel)({accessToken:()=>Promise.resolve(""),connectorsApiBasePath:"",selectedNamespace:void 0,error:void 0},{events:Object.assign({selectNamespace:e=>Object.assign({},e),deselectNamespace:()=>({}),confirm:()=>({})},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e})}),jt=_t.assign(((e,t)=>{const{type:n}=t;return{response:(0,O.__rest)(t,["type"])}}),"api.success"),Rt=_t.assign({selectedNamespace:(e,t)=>{var n,a;return null===(a=null===(n=e.response)||void 0===n?void 0:n.items)||void 0===a?void 0:a.find((e=>e.id===t.selectedNamespace))}},"selectNamespace"),Ft=_t.assign({selectedNamespace:void 0},"deselectNamespace"),Lt=_t.createMachine({id:"namespaces",initial:"root",context:_t.initialContext,states:{root:{type:"parallel",states:{api:{initial:"idle",invoke:{id:I,src:e=>Ne((({accessToken:e,connectorsApiBasePath:t})=>{const n=new l.ConnectorNamespacesApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t,a)=>{const o=r().CancelToken.source(),{page:c,size:i,search:l}=e,{name:s}=l||{},d=[s&&s.length>0?` name like '%${s}%'`:void 0].filter(Boolean).map((e=>`(${e})`)).join(" AND ");return n.listConnectorNamespaces(`${c}`,`${i}`,void 0,d).then((e=>{t({items:e.data.items||[],total:e.data.total,page:e.data.page,size:e.data.size})})).catch((t=>{r().isCancel(t)||a({error:t.message,page:e.page})})),()=>{o.cancel("Operation canceled by the user.")}}})(e),(e=>e),{pollingEnabled:!0})},states:{idle:{entry:(0,F.send)("api.query",{to:I}),on:{"api.ready":"ready"}},ready:{}},on:{"api.refresh":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.nextPage":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.prevPage":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.query":{actions:(0,F.send)(((e,t)=>t),{to:I})},"api.success":{actions:jt}}},selection:{id:"selection",initial:"verify",states:{verify:{always:[{target:"selecting",cond:"noNamespaceSelected"},{target:"valid",cond:"namespaceSelected"}]},selecting:{entry:(0,F.sendParent)("isInvalid"),on:{selectNamespace:{target:"valid",actions:Rt}}},valid:{entry:(0,F.sendParent)("isValid"),on:{selectNamespace:{target:"verify",actions:Rt,cond:(e,t)=>void 0!==t.selectedNamespace},deselectNamespace:{target:"verify",actions:Ft},confirm:{target:"#done",cond:"namespaceSelected"}}}}}}},done:{id:"done",type:"final",data:{selectedNamespace:e=>e.selectedNamespace,duplicateMode:e=>e.duplicateMode}}}},{guards:{namespaceSelected:e=>void 0!==e.selectedNamespace,noNamespaceSelected:e=>void 0===e.selectedNamespace}}),zt=(0,z.createModel)({initialConfiguration:void 0,configString:"",name:""},{events:{save:()=>({}),success:()=>({}),failure:e=>e}}),Gt=zt.assign((e=>({kafka:e.kafka,namespace:e.namespace,connectorType:e.connectorType,name:e.name,userServiceAccount:e.userServiceAccount,topic:e.topic,userErrorHandler:e.userErrorHandler,configString:J(e.initialConfiguration)}))),qt=zt.assign(((e,t)=>({savingError:t.message})),"failure"),Vt=zt.createMachine({id:"review",initial:"verify",context:zt.initialContext,entry:Gt,states:{verify:{always:[{target:"valid",cond:"isAllConfigured"}]},valid:{id:"valid",entry:(0,F.sendParent)("isValid"),on:{save:"saving"}},saving:{invoke:{src:e=>(({accessToken:e,connectorsApiBasePath:t,kafka:n,namespace:a,connectorType:o,configuration:c,name:i,userServiceAccount:s,userErrorHandler:d,topic:u})=>{const p=new l.ConnectorsApi(new l.Configuration({accessToken:e,basePath:t}));return e=>{const t=r().CancelToken.source();let m={};m=d?Object.assign(Object.assign({},c),{error_handler:{[d]:u?{topic:u}:{}}}):c;const g={kind:"Connector",name:i,channel:l.Channel.Stable,namespace_id:a.id,desired_state:l.ConnectorDesiredState.Ready,connector_type_id:o.id,kafka:{id:n.id,url:n.bootstrap_server_host||"demo"},service_account:{client_id:s.clientId,client_secret:s.clientSecret},connector:m};return p.createConnector(!0,g,{cancelToken:t.token}).then((()=>{e({type:"success"})})).catch((t=>{r().isCancel(t)||e({type:"failure",message:t.response.data.reason})})),()=>{t.cancel("Operation canceled by the user.")}}})({accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,kafka:e.kafka,namespace:e.namespace,connectorType:e.connectorType,configuration:JSON.parse(e.configString),name:e.name,userServiceAccount:e.userServiceAccount,topic:e.topic,userErrorHandler:e.userErrorHandler})},on:{success:"saved",failure:{target:"valid",actions:qt}},tags:["saving"]},saved:{type:"final"}}},{guards:{isAllConfigured:e=>void 0!==e.configString}}),Ht=(0,z.createModel)({},{events:{isValid:()=>({}),isInvalid:()=>({}),prev:()=>({}),next:()=>({}),changedStep:({step:e})=>({step:e}),jumpToSelectKafka:()=>({}),jumpToSelectNamespace:()=>({}),jumpToSelectConnector:()=>({}),jumpToConfigureConnector:({subStep:e})=>({subStep:e}),jumpToBasicConfiguration:()=>({}),jumpToErrorConfiguration:()=>({}),jumpToReviewConfiguration:()=>({})},actions:{notifySave:()=>({})}}),Kt=Ht.createMachine({id:"creationWizard",initial:"selectConnector",context:Ht.initialContext,states:{selectConnector:{initial:"selecting",invoke:{id:"selectConnectorRef",src:It,data:e=>({accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,selectedConnector:e.duplicateMode?e.connectorTypeDetails:e.selectedConnector,connectorData:e.connectorData,connectorTypeDetails:e.connectorTypeDetails,duplicateMode:e.duplicateMode}),onDone:{target:"selectKafka",actions:(0,F.assign)(((e,t)=>({selectedConnector:e.duplicateMode?e.connectorTypeDetails:t.data.selectedConnector,connectorData:e.connectorData,connectorTypeDetails:e.connectorTypeDetails,duplicateMode:e.duplicateMode,connectorConfiguration:!1,activeConfigurationStep:0,isConfigurationValid:!1,configurationSteps:!1})))},onError:".error"},states:{error:{},selecting:{on:{isValid:"valid"}},valid:{on:{isInvalid:"selecting",next:{actions:(0,F.send)("confirm",{to:"selectConnectorRef"})}}}}},selectKafka:{initial:"selecting",invoke:{id:"selectKafkaInstanceRef",src:Mt,data:e=>{var t;return{accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,selectedInstance:e.duplicateMode?null===(t=e.connectorData)||void 0===t?void 0:t.kafka:e.selectedKafkaInstance,connectorData:e.connectorData,connectorTypeDetails:e.connectorTypeDetails,duplicateMode:e.duplicateMode,request:{page:1,size:10}}},onDone:{target:"selectNamespace",actions:(0,F.assign)({selectedKafkaInstance:(e,t)=>t.data.selectedInstance})},onError:".error"},states:{error:{},selecting:{on:{isValid:"valid"}},valid:{on:{isInvalid:"selecting",next:{actions:(0,F.send)("confirm",{to:"selectKafkaInstanceRef"})}}}},on:{prev:"selectConnector"}},selectNamespace:{initial:"selecting",invoke:{id:"selectNamespaceRef",src:Lt,data:e=>{var t;return{accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,selectedNamespace:e.duplicateMode?{id:null===(t=e.connectorData)||void 0===t?void 0:t.namespace_id}:e.selectedNamespace,connectorData:e.connectorData,connectorTypeDetails:e.connectorTypeDetails,duplicateMode:e.duplicateMode}},onDone:{target:"basicConfiguration",actions:(0,F.assign)({selectedNamespace:(e,t)=>t.data.selectedNamespace})},onError:".error"},states:{error:{},selecting:{on:{isValid:"valid"}},valid:{on:{isInvalid:"selecting",next:{actions:(0,F.send)("confirm",{to:"selectNamespaceRef"})}}}},on:{prev:"selectKafka"}},basicConfiguration:{id:"configureBasic",initial:"submittable",invoke:{id:"basicRef",src:vt,data:e=>{var t,n;return{accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,kafkaManagementApiBasePath:e.kafkaManagementApiBasePath,kafka:e.selectedKafkaInstance,namespace:e.selectedNamespace,connectorType:e.selectedConnector,initialConfiguration:e.connectorConfiguration,name:e.duplicateMode?null===(t=e.connectorData)||void 0===t?void 0:t.name:e.name,userServiceAccount:e.duplicateMode?{clientId:null===(n=e.connectorData)||void 0===n?void 0:n.service_account.client_id,clientSecret:""}:e.userServiceAccount,topic:e.topic,userErrorHandler:e.userErrorHandler,duplicateMode:e.duplicateMode,sACreated:e.sACreated}},onDone:{target:"configureConnector",actions:[(0,F.assign)(((e,t)=>({name:t.data.name,sACreated:t.data.sACreated,userServiceAccount:t.data.userServiceAccount,duplicateMode:e.duplicateMode})))]},onError:{actions:(e,t)=>console.error(t.data.message)}},states:{submittable:{on:{isInvalid:"invalid",next:{actions:(0,F.send)("confirm",{to:"basicRef"})}}},invalid:{on:{isValid:"submittable"}}},on:{prev:"selectNamespace"}},configureConnector:{initial:"loadConfigurator",states:{loadConfigurator:{invoke:{id:"configuratorLoader",src:"makeConfiguratorLoaderMachine",data:e=>({connector:e.duplicateMode?e.connectorTypeDetails:e.selectedConnector,duplicateMode:e.duplicateMode}),onDone:{target:"configure",actions:(0,F.assign)(((e,t)=>({Configurator:t.data.Configurator,configurationSteps:t.data.steps,duplicateMode:e.duplicateMode})))},onError:{actions:(e,t)=>console.error(t.data.message)}}},configure:{id:"configure",initial:"submittable",invoke:{id:"configuratorRef",src:yt,data:e=>{var t;return{connector:e.duplicateMode?e.connectorTypeDetails:e.selectedConnector,configuration:e.duplicateMode?null===(t=e.connectorData)||void 0===t?void 0:t.connector:e.connectorConfiguration,name:e.name,steps:e.configurationSteps||["single step"],activeStep:e.activeConfigurationStep||0,isActiveStepValid:e.duplicateMode||!1!==e.connectorConfiguration,duplicateMode:e.duplicateMode,connectorData:e.connectorData}},onDone:[{target:"#creationWizard.reviewConfiguration",actions:(0,F.assign)(((e,t)=>({connectorConfiguration:t.data.configuration||!0,duplicateMode:e.duplicateMode,connectorData:e.connectorData}))),cond:e=>!!e.configurationSteps},{target:"#creationWizard.errorConfiguration",actions:(0,F.assign)(((e,t)=>({connectorConfiguration:t.data.configuration||!0})))}],onError:{actions:(e,t)=>console.error(t.data.message)}},states:{submittable:{on:{isInvalid:"invalid",next:{actions:(0,F.send)("next",{to:"configuratorRef"})}}},invalid:{on:{isValid:"submittable"}}},on:{prev:[{actions:(0,F.send)("prev",{to:"configuratorRef"}),cond:"areThereSubsteps"},{target:"#creationWizard.basicConfiguration"}],changedStep:{actions:(0,F.assign)({activeConfigurationStep:(e,t)=>t.step})}}}}},errorConfiguration:{id:"configureErrorHandler",initial:"submittable",invoke:{id:"errorRef",src:wt,data:e=>{var t,n;return{accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,kafkaManagementApiBasePath:e.kafkaManagementApiBasePath,kafka:e.selectedKafkaInstance,namespace:e.selectedNamespace,connector:e.selectedConnector,configuration:e.connectorConfiguration,initialConfiguration:e.connectorConfiguration,topic:e.topic,name:e.name,duplicateMode:e.duplicateMode,userErrorHandler:e.duplicateMode?null===(n=null===(t=e.connectorData)||void 0===t?void 0:t.connector)||void 0===n?void 0:n.error_handler:e.userErrorHandler}},onDone:{target:"reviewConfiguration",actions:[(0,F.assign)(((e,t)=>({topic:t.data.topic,userErrorHandler:t.data.userErrorHandler,duplicateMode:e.duplicateMode,name:e.name})))]},onError:{actions:(e,t)=>console.error(t.data.message)}},states:{submittable:{on:{isInvalid:"invalid",next:{actions:(0,F.send)("confirm",{to:"errorRef"})}}},invalid:{on:{isValid:"submittable"}}},on:{prev:"configureConnector"}},reviewConfiguration:{id:"review",initial:"reviewing",invoke:{id:"reviewRef",src:Vt,data:e=>({accessToken:e.accessToken,connectorsApiBasePath:e.connectorsApiBasePath,kafkaManagementApiBasePath:e.kafkaManagementApiBasePath,kafka:e.selectedKafkaInstance,namespace:e.selectedNamespace,connectorType:e.selectedConnector,configuration:e.connectorConfiguration,initialConfiguration:e.connectorConfiguration,name:e.name,userServiceAccount:e.userServiceAccount,topic:e.topic,userErrorHandler:e.userErrorHandler,duplicateMode:e.duplicateMode}),onDone:{target:"#creationWizard.saved",actions:[(0,F.assign)(((e,t)=>({connectorConfiguration:t.data,duplicateMode:e.duplicateMode}))),"notifySave"]},onError:{actions:(e,t)=>console.error(t.data.message)}},states:{reviewing:{on:{isValid:"valid"}},valid:{on:{isInvalid:"reviewing",next:{actions:(0,F.send)("save",{to:"reviewRef"})}}}},on:{prev:[{target:"#creationWizard.configureConnector",cond:e=>!!e.configurationSteps},{target:"#creationWizard.errorConfiguration"}]}},saved:{id:"saved",type:"final"}},on:{jumpToSelectConnector:{target:"selectConnector"},jumpToSelectKafka:{target:"selectKafka",cond:"isConnectorSelected"},jumpToSelectNamespace:{target:"selectNamespace",cond:"isKafkaInstanceSelected"},jumpToBasicConfiguration:{target:"basicConfiguration",cond:"isNamespaceSelected"},jumpToConfigureConnector:{target:"configureConnector",cond:"isBasicConfigured",actions:(0,F.assign)(((e,t)=>({activeConfigurationStep:t.subStep||0})))},jumpToErrorConfiguration:{target:"errorConfiguration",cond:"isConnectorConfigured"},jumpToReviewConfiguration:{target:"reviewConfiguration",cond:"isConnectorConfigured"}}},{guards:{isConnectorSelected:(e,t)=>{const n=t.subStep;return n?void 0!==e.selectedConnector&&(void 0!==e.connectorConfiguration||n<=e.activeConfigurationStep):void 0!==e.selectedConnector},isKafkaInstanceSelected:e=>void 0!==e.selectedKafkaInstance,isNamespaceSelected:e=>void 0!==e.selectedNamespace,isConnectorConfigured:e=>e.configurationSteps?void 0!==e.connectorConfiguration&&!1!==e.connectorConfiguration||e.activeConfigurationStep===e.configurationSteps.length-1&&!0===e.isConfigurationValid:void 0!==e.connectorConfiguration&&!1!==e.connectorConfiguration,isBasicConfigured:e=>void 0!==e.name&&e.name.length>0&&void 0!==e.userServiceAccount&&e.userServiceAccount.clientId.length>0&&e.userServiceAccount.clientSecret.length>0,isErrorHandlerConfigured:e=>void 0!==e.userErrorHandler&&"dead_letter_queue"===e.userErrorHandler?void 0!==e.topic&&e.topic.length>0:void 0!==e.topic&&e.topic.length>0||void 0!==e.userErrorHandler,areThereSubsteps:e=>e.activeConfigurationStep>0},actions:{notifySave:e=>{e.onSave&&e.onSave(e.name)}},services:{makeConfiguratorLoaderMachine:()=>V}}),$t=(0,g.createContext)(null),Wt=({children:e,accessToken:t,connectorsApiBasePath:n,fetchConfigurator:a,onSave:o,connectorData:r,connectorTypeDetails:c,connectorId:i,duplicateMode:l})=>{const s=(0,g.useCallback)((()=>V.withConfig({services:{fetchConfigurator:e=>a(e.connector)}})),[a]),d=(0,xe.useInterpret)(Kt,{devTools:!0,context:{accessToken:t,connectorsApiBasePath:n,onSave:o,connectorId:i,connectorData:r,connectorTypeDetails:c,duplicateMode:l},services:{makeConfiguratorLoaderMachine:s}});return v().createElement($t.Provider,{value:d},e)},Jt=()=>{const e=(0,g.useContext)($t);if(!e)throw new Error("useCreationWizardMachineService() must be used in a child of <CreationWizardMachineProvider>");return e},Qt=()=>{const e=Jt();return(0,xe.useSelector)(e,(0,g.useCallback)((e=>({connectorTypeRef:e.children.selectConnectorRef,kafkaRef:e.children.selectKafkaInstanceRef,namespaceRef:e.children.selectNamespaceRef,basicRef:e.children.basicRef,errorRef:e.children.errorRef,reviewRef:e.children.reviewRef})),[]))},Ut=()=>{var e;const{namespaceRef:t}=Qt(),n=Oe(null===(e=t.getSnapshot())||void 0===e?void 0:e.children.paginatedApi),{selectedId:a,duplicateMode:o}=(0,xe.useSelector)(t,(0,g.useCallback)((e=>{var t;return{selectedId:null===(t=e.context.selectedNamespace)||void 0===t?void 0:t.id,duplicateMode:e.context.duplicateMode}}),[])),r=(0,g.useCallback)((e=>{t.send({type:"selectNamespace",selectedNamespace:e})}),[t]),c=(0,g.useCallback)((()=>{t.send({type:"deselectNamespace"})}),[t]),i=(0,g.useCallback)((e=>{t.send(Object.assign({type:"api.query"},e))}),[t]),l=(0,g.useCallback)((()=>{t.send({type:"api.refresh"})}),[t]);return Object.assign(Object.assign({},n),{selectedId:a,duplicateMode:o,onSelect:r,onDeselect:c,onRefresh:l,runQuery:i})},Zt=()=>{var e;const{connectorTypeRef:t}=Qt(),n=Oe(null===(e=t.getSnapshot())||void 0===e?void 0:e.children.paginatedApi),{selectedId:a,connectorTypeDetails:o,duplicateMode:r}=(0,xe.useSelector)(t,(0,g.useCallback)((e=>{var t;return{selectedId:null===(t=e.context.selectedConnector)||void 0===t?void 0:t.id,duplicateMode:e.context.duplicateMode,connectorTypeDetails:e.context.connectorTypeDetails}}),[])),c=(0,g.useCallback)((e=>{t.send({type:"selectConnector",selectedConnector:e})}),[t]),i=(0,g.useCallback)((e=>{t.send(Object.assign({type:"api.query"},e))}),[t]);return Object.assign(Object.assign({},n),{selectedId:a,onSelect:c,runQuery:i,connectorTypeDetails:o,duplicateMode:r})},Yt=()=>{var e;const{kafkaRef:t}=Qt(),n=Oe(null===(e=t.getSnapshot())||void 0===e?void 0:e.children.paginatedApi),{selectedId:a,duplicateMode:o}=(0,xe.useSelector)(t,(0,g.useCallback)((e=>{var t;return{selectedId:null===(t=e.context.selectedInstance)||void 0===t?void 0:t.id,duplicateMode:e.context.duplicateMode}}),[])),r=(0,g.useCallback)((e=>{t.send({type:"selectInstance",selectedInstance:e})}),[t]),c=(0,g.useCallback)((()=>{t.send({type:"deselectInstance"})}),[t]),i=(0,g.useCallback)((e=>{t.send(Object.assign({type:"api.query"},e))}),[t]);return Object.assign(Object.assign({},n),{selectedId:a,duplicateMode:o,onSelect:r,onDeselect:c,runQuery:i})},Xt=()=>{const{reviewRef:e}=Qt(),{kafka:t,namespace:n,connectorType:a,topic:o,userErrorHandler:r,name:c,userServiceAccount:i,configString:l,isSaving:s,savingError:d,duplicateMode:u}=(0,xe.useSelector)(e,(0,g.useCallback)((e=>({kafka:e.context.kafka,namespace:e.context.namespace,connectorType:e.context.connectorType,name:e.context.name,userServiceAccount:e.context.userServiceAccount,topic:e.context.topic,userErrorHandler:e.context.userErrorHandler,configString:e.context.configString,isSaving:e.hasTag("saving"),savingError:e.context.savingError,duplicateMode:e.context.duplicateMode})),[]));return{kafka:t,namespace:n,connectorType:a,topic:o,userErrorHandler:r,name:c,userServiceAccount:i,configString:l,isSaving:s,savingError:d,duplicateMode:u}};var en=n(2899);const tn=({isOpen:e,sACreated:t,handleModalToggle:n,serviceAccount:a,onSetServiceAccount:o,onSetSaCreated:c})=>{const[i,d]=(0,g.useState)(!1),[u,p]=(0,g.useState)(""),[m,h]=(0,g.useState)("default"),[C,y]=(0,g.useState)(!1),{kafkaManagementApiBasePath:b,getToken:S}=w(),k=(0,N.useAlert)(),T=(0,g.useCallback)((e=>{c(!0),y(!1);const t=e?{clientId:e.client_id,clientSecret:e.client_secret}:{clientId:"",clientSecret:""};o(t)}),[c,y,o]),I=(0,g.useCallback)((e=>{null==k||k.addAlert({id:"connector-service-account",variant:E.AlertVariant.danger,title:(0,en.t)("somethingWentWrong"),description:e}),y(!1)}),[k]);return v().createElement(E.Modal,{variant:E.ModalVariant.medium,title:t?"":(0,en.t)("createServiceAccount"),isOpen:e,onClose:n,actions:t?[]:[v().createElement(E.Button,{key:"Create",variant:"primary",spinnerAriaValueText:C?(0,en.t)("loading"):void 0,isLoading:C,isDisabled:"error"===m||C,onClick:()=>(0,O.__awaiter)(void 0,void 0,void 0,(function*(){"default"===m&&0===u.length?h("error"):(y(!0),(({accessToken:e,kafkaManagementApiBasePath:t,sortDesc:n})=>{const a=new s.SecurityApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t)=>{const o=r().CancelToken.source();return a.createServiceAccount({name:`connector-${n}`},{cancelToken:o.token}).then((t=>{e(t.data)})).catch((e=>{r().isCancel(e)||t(e.response.data.reason)})),()=>{o.cancel("Operation canceled by the user.")}}})({accessToken:S,kafkaManagementApiBasePath:b,sortDesc:u})(T,I))})),ouiaId:"button-create"},(0,en.t)("create")),v().createElement(E.Button,{key:"cancel",variant:"link",onClick:n,ouiaId:"button-cancel"},(0,en.t)("cancel"))],ouiaId:t?"modal-CredentialsGenerated":"modal-CreateServiceAcct"},t?v().createElement(E.EmptyState,{variant:E.EmptyStateVariant.large},v().createElement(E.EmptyStateIcon,{icon:f.KeyIcon}),v().createElement(E.Title,{headingLevel:"h4",size:"lg"},(0,en.t)("credentialsGenerated")),v().createElement(E.TextContent,{className:"pf-u-mt-lg"},v().createElement(E.Text,{component:E.TextVariants.small},(0,en.t)("connectKafkaWithSA"))),v().createElement(E.InputGroup,{className:"pf-u-mt-lg"},v().createElement(E.InputGroupText,{style:{whiteSpace:"nowrap"},id:"Client-id-value"},(0,en.t)("clientId")),v().createElement(E.ClipboardCopy,{isReadOnly:!0,className:"pf-u-w-100",hoverTip:(0,en.t)("copy"),clickTip:(0,en.t)("copied")},a.clientId)),v().createElement(E.InputGroup,{className:"pf-u-mt-lg"},v().createElement(E.InputGroupText,{style:{whiteSpace:"nowrap"},id:"Client-secret-value"},(0,en.t)("clientSecret")),v().createElement(E.ClipboardCopy,{className:"pf-u-w-100",isReadOnly:!0,hoverTip:(0,en.t)("copy"),clickTip:(0,en.t)("copied")},a.clientSecret)),v().createElement(E.TextContent,{className:"pf-u-mt-lg"},v().createElement(E.Text,{component:E.TextVariants.small},(0,en.t)("serviceAccountAlertMsg"))),v().createElement(E.Bullseye,{className:"pf-u-mt-lg"},v().createElement(E.Checkbox,{id:"copied",label:(0,en.t)("copiedClientidSecret"),"aria-label":(0,en.t)("copiedClientidSecret"),onChange:()=>d(!i),isChecked:i})),v().createElement(E.Button,{variant:"primary",isDisabled:!i,onClick:n,ouiaId:"button-close"},(0,en.t)("close"))):v().createElement(E.Form,null,v().createElement(E.FormGroup,{label:(0,en.t)("shortDescription"),labelIcon:v().createElement(E.Popover,{headerContent:v().createElement("div",null,(0,en.t)("shortDescription")),bodyContent:v().createElement("div",null,(0,en.t)("shortDescriptionHelpText"))},v().createElement("button",{type:"button","aria-label":(0,en.t)("shortDescriptionTooltip"),onClick:e=>e.preventDefault(),"aria-describedby":"short-description",className:"pf-c-form__group-label-help"},v().createElement(f.HelpIcon,{noVerticalAlign:!0}))),isRequired:!0,fieldId:"short-description-01",helperText:(0,en.t)("shortDescriptionExampleText"),helperTextInvalid:u.length>0?(0,en.t)("shortDescriptionExampleText"):(0,en.t)("required"),validated:m},v().createElement(E.TextInput,{isRequired:!0,validated:m,type:"text",id:"short-description-01",name:"short-description-01","aria-describedby":"short-description",value:u,onChange:(e,t)=>{h(/^[a-z]([-a-z0-9]*[a-z0-9])?$/.test(e)?"success":"error"),p(e)}}))))},nn=()=>{const{t:e}=(0,D.useTranslation)(),{name:t,serviceAccount:n,sACreated:a,onSetSaCreated:o,onSetName:r,onSetServiceAccount:c,duplicateMode:i}=(()=>{const{basicRef:e}=Qt(),{name:t,sACreated:n,serviceAccount:a,duplicateMode:o}=(0,xe.useSelector)(e,(0,g.useCallback)((e=>({name:e.context.name,sACreated:e.context.sACreated,serviceAccount:e.context.userServiceAccount,duplicateMode:e.context.duplicateMode})),[])),r=(0,g.useCallback)((t=>{e.send({type:"setName",name:t})}),[e]),c=(0,g.useCallback)((t=>{e.send({type:"setSaCreated",sACreated:t})}),[e]),i=(0,g.useCallback)((t=>{e.send({type:"setServiceAccount",serviceAccount:t})}),[e]);return{serviceAccount:a,name:t,sACreated:n,onSetSaCreated:c,onSetName:r,onSetServiceAccount:i,duplicateMode:o}})(),[l,s]=(0,g.useState)(!1),d=()=>{s(!l)};return(0,g.useEffect)((()=>{null!=n||c({clientId:"",clientSecret:""})}),[]),v().createElement(v().Fragment,null,v().createElement(te,{title:e("core"),description:e("basicStepDescription")},v().createElement(E.Grid,{hasGutter:!0},v().createElement(E.Form,{className:"pf-m-9-col-on-lg"},v().createElement(E.FormGroup,{label:e("connectorsInstanceName"),isRequired:!0,fieldId:"name",helperText:e("connectorsInstanceHelper"),className:"pf-u-mb-0"},v().createElement(E.TextInput,{value:t,onChange:r,id:"name"})),v().createElement(E.FormGroup,{label:e("serviceAccount"),fieldId:"service-account",className:"pf-u-mb-0"},v().createElement(E.TextContent,null,v().createElement("span",{className:"step-common_service_account-desc"},e("serviceAccountDescText"))),v().createElement(E.Button,{variant:"secondary",onClick:d,className:"pf-u-mt-md",isDisabled:a,ouiaId:"button-create-service-acct"},e("createServiceAccount"))),n&&v().createElement(v().Fragment,null,v().createElement(E.FormGroup,{label:e("clientId"),isRequired:!0,fieldId:"clientId",className:"pf-u-mb-0"},v().createElement(E.TextInput,{value:n.clientId,onChange:e=>c(Object.assign(Object.assign({},n),{clientId:e})),id:"clientId"})),v().createElement(E.FormGroup,{label:e("clientSecret"),isRequired:!0,fieldId:"clientSecret",className:"pf-u-mb-0",helperText:i?e("credentialDuplicateFieldHelpText"):""},v().createElement(E.TextInput,{value:n.clientSecret,type:"password",onChange:e=>c(Object.assign(Object.assign({},n),{clientSecret:e})),id:"clientSecret"})))))),v().createElement(tn,{isOpen:l,handleModalToggle:d,serviceAccount:n,onSetServiceAccount:c,onSetSaCreated:o,sACreated:a}))},an=({actor:e,Configurator:t,duplicateMode:n})=>{let{activeStep:a,configuration:o,connector:r}=(0,xe.useSelector)(e,(0,g.useCallback)((e=>({connector:e.context.connector,activeStep:e.context.activeStep,configuration:e.context.configuration})),[e]));if(n){let e={};e=o instanceof Map?Object.assign({},X(W(o))):Object.assign({},X(o)),o=new Map(Object.entries(e))}return v().createElement(t,{activeStep:a,configuration:o,connector:r,uiPath:n?R.DUPLICATE:R.CREATE,onChange:(t,n)=>{e.send({type:"change",configuration:t,isValid:n})}})},on=({actor:e,duplicateMode:t})=>{const{configuration:n,connector:a}=(0,xe.useSelector)(e,(0,g.useCallback)((e=>({connector:e.context.connector,configuration:e.context.configuration})),[e])),o=a.schema,r=ee(o,{});return v().createElement(me,{schema:o,configuration:n?ee(o,n):r,duplicateMode:t||!1,onChange:(t,n)=>e.send({type:"change",configuration:t,isValid:n})})},rn=()=>{const{t:e}=(0,D.useTranslation)(),t=Jt(),{isLoading:n,hasErrors:a,Configurator:o,configuratorRef:r,hasCustomConfigurator:c,duplicateMode:i,configurationSteps:l,activeConfigurationStep:s}=(0,xe.useSelector)(t,(0,g.useCallback)((e=>({isLoading:e.matches({configureConnector:"loadConfigurator"}),hasErrors:e.matches("failure"),hasCustomConfigurator:!1!==e.context.Configurator&&void 0!==e.context.Configurator,configuration:e.context.connectorConfiguration,Configurator:e.context.Configurator,duplicateMode:e.context.duplicateMode,configuratorRef:e.children.configuratorRef,configurationSteps:e.context.configurationSteps,activeConfigurationStep:e.context.activeConfigurationStep})),[t]));return v().createElement(te,{title:e("object"==typeof l&&void 0!==s?l[s]:"connectorSpecific"),description:e("configurationStepDescription")},(()=>{switch(!0){case n:return v().createElement(E.EmptyState,null,v().createElement(E.EmptyStateIcon,{variant:"container",component:E.Spinner}),v().createElement(E.Title,{size:"lg",headingLevel:"h4"},e("loading")));case a:return v().createElement(E.EmptyState,null,v().createElement(E.EmptyStateIcon,{icon:f.ExclamationCircleIcon}),v().createElement(E.Title,{size:"lg",headingLevel:"h4"},"Error message"));case c:return v().createElement(v().Suspense,{fallback:null},v().createElement(an,{actor:r,Configurator:o,duplicateMode:i}));default:return v().createElement(on,{actor:r,duplicateMode:i})}})())},cn=(e,t)=>({key:e,node:t(e)});var ln=n(3889),sn=n.n(ln);const dn=(e,t=200)=>{if(isNaN(t))throw new TypeError("durationInMs for debounce should be a number");if("function"!=typeof e)throw new TypeError("fnToDebounce should be a function");return(0,g.useCallback)(sn()(e,t),[e,t])};function un(){return(()=>{const{connectorTypeRef:e}=Qt();return(0,xe.useSelector)(e,(0,g.useCallback)((e=>e.matches({root:{api:"ready"}})),[e]))})()?v().createElement(pn,null):null}function pn(){const{t:e}=(0,D.useTranslation)(),{response:t,loading:n,error:a,noResults:o,queryEmpty:r,duplicateMode:c,connectorTypeDetails:i,firstRequest:l,selectedId:s,onSelect:d,runQuery:u}=Zt();return v().createElement(te,{title:e("connector"),description:e("connectorTypeStepDescription")},(()=>{var p,m,g;switch(!0){case l:return v().createElement(T.g,null);case r:return v().createElement(v().Fragment,null,v().createElement(mn,{duplicateMode:c}),v().createElement(Xe,{onClear:()=>u({page:1,size:20,search:void 0})}));case o||a:return v().createElement(Ze,null);case n:return v().createElement(v().Fragment,null,v().createElement(mn,{duplicateMode:c}),v().createElement(T.g,null));default:return v().createElement(v().Fragment,null,v().createElement(mn,{duplicateMode:c}),v().createElement("div",{className:"pf-l-stack__item pf-m-fill"},c?v().createElement(v().Fragment,null,v().createElement(E.Alert,{variant:"info",className:"pf-u-mb-md",isInline:!0,title:e("duplicateAlertConnectorType")}),v().createElement(E.Gallery,{hasGutter:!0},v().createElement(E.Card,{key:i.id,isSelectable:!0,isSelected:s===i.id},(null===(p=i.labels)||void 0===p?void 0:p.includes("source"))&&v().createElement(E.CardHeader,null,v().createElement(f.BuildIcon,{color:"lightGrey",size:"lg"}),v().createElement(E.CardActions,null,v().createElement(E.Label,{color:"blue"},e("source")))),(null===(m=i.labels)||void 0===m?void 0:m.includes("sink"))&&v().createElement(E.CardHeader,null,v().createElement(f.BuilderImageIcon,{color:"lightGrey",size:"lg"}),v().createElement(E.CardActions,null,v().createElement(E.Label,{color:"green"},e("sink")))),v().createElement(E.CardTitle,null,i.name," ",v().createElement(E.Popover,{position:"right","aria-label":e("ConnectorHelpAndGuidances"),headerContent:e("ConnectorHelpAndGuidances"),bodyContent:v().createElement("div",null,i.description)},v().createElement(f.OutlinedQuestionCircleIcon,{color:"grey"}))),v().createElement(E.CardBody,null,v().createElement(E.DescriptionList,{isHorizontal:!0,isFluid:!0},v().createElement(E.DescriptionListGroup,null,v().createElement(E.DescriptionListTerm,null,e("version"),":"),v().createElement(E.DescriptionListDescription,null,i.version))))))):v().createElement(E.Gallery,{hasGutter:!0},null===(g=null==t?void 0:t.items)||void 0===g?void 0:g.map((t=>{var n,a;return v().createElement(E.Card,{isHoverable:!0,key:t.id,isSelectable:!0,isSelected:s===t.id,onClick:()=>d(t.id)},(null===(n=t.labels)||void 0===n?void 0:n.includes("source"))&&v().createElement(E.CardHeader,null,v().createElement(f.BuildIcon,{color:"lightGrey",size:"lg"}),v().createElement(E.CardActions,null,v().createElement(E.Label,{color:"blue"},e("source")))),(null===(a=t.labels)||void 0===a?void 0:a.includes("sink"))&&v().createElement(E.CardHeader,null,v().createElement(f.BuilderImageIcon,{color:"lightGrey",size:"lg"}),v().createElement(E.CardActions,null,v().createElement(E.Label,{color:"green"},e("sink")))),v().createElement(E.CardTitle,null,t.name," ",v().createElement(E.Popover,{position:"right","aria-label":e("ConnectorHelpAndGuidances"),headerContent:e("ConnectorHelpAndGuidances"),bodyContent:v().createElement("div",null,t.description)},v().createElement(f.OutlinedQuestionCircleIcon,{color:"grey"}))),v().createElement(E.CardBody,null,v().createElement(E.DescriptionList,{isHorizontal:!0,isFluid:!0},v().createElement(E.DescriptionListGroup,null,v().createElement(E.DescriptionListTerm,null,e("version"),":"),v().createElement(E.DescriptionListDescription,null,t.version)))))}))),v().createElement(gn,{onChange:u})))}})())}const mn=({duplicateMode:e})=>{const{t}=(0,D.useTranslation)(),{request:n,runQuery:a}=Zt(),[o,r]=(0,g.useState)(!1),c=(0,g.useRef)(null),i=dn(a,1e3),{name:l,categories:s=[]}=n.search||{},d=(0,g.useCallback)((()=>a({page:1,size:n.size,search:void 0})),[a,n.size]),u=(0,g.useCallback)((()=>r((e=>!e))),[]),p=(e,t)=>{((e,t,o)=>{a(Object.assign(Object.assign({},n),{search:Object.assign(Object.assign({},n.search||{}),{[e]:t.includes(o)?t.filter((e=>e!==o)):[...t||[],o]})}))})("categories",s,t.key)};(0,g.useEffect)((()=>{c.current&&(c.current.value=l||"")}),[c,l]);const m=[v().createElement(E.SelectOption,{key:"sink",value:"sink",description:t("shortDescriptionSink")},t("sink")),v().createElement(E.SelectOption,{key:"source",value:"source",description:t("shortDescriptionSource")},t("source"))],h=v().createElement(v().Fragment,null,v().createElement(E.ToolbarItem,null,v().createElement(E.InputGroup,null,v().createElement(E.TextInput,{isDisabled:e,name:"name",id:"name",type:"search","aria-label":"filter by connector name",onChange:e=>i({size:n.size,page:1,search:Object.assign(Object.assign({},n.search),{name:e})}),ouiaId:"search-field",ref:c}),v().createElement(E.Button,{variant:"control","aria-label":"search button for search input",isDisabled:e},v().createElement(f.SearchIcon,null)))),v().createElement(E.ToolbarGroup,{variant:"filter-group"},v().createElement(E.ToolbarFilter,{chips:e?[]:s.map((e=>cn(e,t))),deleteChip:p,deleteChipGroup:()=>{return e="categories",a(Object.assign(Object.assign({},n),{search:Object.assign(Object.assign({},n.search||{}),{[e]:void 0})}));var e},categoryName:"Connector type"},v().createElement(E.Select,{variant:"checkbox","aria-label":"Connector type",onToggle:u,onSelect:(e,n)=>p(0,cn(n,t)),selections:e?"":s,isOpen:o,placeholderText:"Connector type",isDisabled:e},m)))),C=v().createElement(v().Fragment,null,v().createElement(E.ToolbarToggleGroup,{toggleIcon:v().createElement(f.FilterIcon,null),breakpoint:"xl"},h),!e&&v().createElement(E.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},v().createElement(gn,{isCompact:!0,onChange:e=>a(Object.assign(Object.assign({},e),{search:n.search||{}}))})));return v().createElement(E.Toolbar,{id:"toolbar-group-types",collapseListedFiltersBreakpoint:"xl",clearAllFilters:d},v().createElement(E.ToolbarContent,{className:"pf-m-no-padding"},C))},gn=({isCompact:e=!1,onChange:t})=>{const{request:n,response:a}=Zt();return v().createElement(Qe,{itemCount:(null==a?void 0:a.total)||0,page:n.page,perPage:n.size,onChange:e=>{t(Object.assign(Object.assign({},e),{orderBy:n.orderBy,search:n.search}))},isCompact:e})},vn=()=>{var e;const[t,n]=v().useState(!1),{t:a}=(0,D.useTranslation)(),{connector:o,topic:r,errorHandler:c,onSetTopic:i,onSetErrorHandler:l,duplicateMode:s}=(()=>{const{errorRef:e}=Qt(),{connector:t,topic:n,errorHandler:a,duplicateMode:o}=(0,xe.useSelector)(e,(0,g.useCallback)((e=>({topic:e.context.topic,errorHandler:e.context.userErrorHandler,connector:e.context.connector,duplicateMode:e.context.duplicateMode})),[])),r=(0,g.useCallback)((t=>{e.send({type:"setTopic",topic:t})}),[e]),c=(0,g.useCallback)((t=>{e.send({type:"setErrorHandler",errorHandler:t})}),[e]);return{errorHandler:a,topic:n,onSetErrorHandler:c,onSetTopic:r,connector:t,duplicateMode:o}})();if(s&&"object"==typeof c){const e=Object.keys(c);l(e[0]),void 0===c[e[0]]?i(""):i(c[e[0]].topic)}const d=(0,g.useCallback)((()=>n((e=>!e))),[]),u=(0,g.useCallback)(((e,t,a)=>{a?p():(n(!1),i(""),l(t))}),[]),p=(0,g.useCallback)((()=>{n(!1)}),[]),m=ce(o.schema),f=new se.JSONSchemaBridge(o.schema,m),{error_handler:h}=null===(e=f.schema)||void 0===e?void 0:e.properties,C=h.oneOf.map((e=>{const t=Object.keys(e.properties);return v().createElement(E.SelectOption,{key:t[0],value:t[0]})}));return(0,g.useEffect)((()=>{null!=c||l(Object.keys(h.default)[0])}),[]),v().createElement(te,{title:a("errorHandling"),description:a("errorHandlingStepDescription")},v().createElement(E.Grid,{hasGutter:!0},v().createElement(E.Form,{className:"pf-m-9-col-on-lg"},v().createElement(E.FormGroup,{label:a("errorHandlingMethod"),fieldId:"error-handler_strategy",className:"error-handler_strategy pf-u-mb-0"},v().createElement(E.Select,{variant:E.SelectVariant.single,"aria-label":"Select Error handler",onToggle:d,onSelect:u,selections:c,isOpen:t,placeholderText:"Select type"},C)),"dead_letter_queue"===c&&v().createElement(E.FormGroup,{label:a("deadLetterTopicName"),isRequired:!0,fieldId:"topic",helperText:a("deadLetterTopicHelper")},v().createElement(E.TextInput,{value:r,onChange:i,id:"topic"})))))},En=({onCreate:e})=>{const{t}=(0,D.useTranslation)();return v().createElement(E.EmptyState,{variant:E.EmptyStateVariant.large,className:(0,Ke.css)("pf-u-pt-2xl pf-u-pt-3xl-on-md")},v().createElement(E.EmptyStateIcon,{icon:f.PlusCircleIcon}),v().createElement(E.Title,{headingLevel:"h1",size:E.TitleSizes.xl},t("noKafkaInstanceAvailable")),v().createElement(E.EmptyStateBody,null,t("noKafkaInstanceAvailableBody")),v().createElement(E.Button,{variant:"primary",onClick:e},t("createKafkaInstance")))},fn=()=>(()=>{const{kafkaRef:e}=Qt();return(0,xe.useSelector)(e,(0,g.useCallback)((e=>e.matches({root:{api:"ready"}})),[e]))})()?v().createElement(hn,null):null,hn=()=>{const{t:e}=(0,D.useTranslation)(),[t,n]=(0,g.useState)(!1),{response:a,loading:o,error:r,selectedId:c,onDeselect:i,duplicateMode:l,noResults:s,queryEmpty:d,firstRequest:u,onSelect:p,runQuery:m}=Yt();return(0,g.useEffect)((()=>{var e;l&&a&&((null===(e=null==a?void 0:a.items)||void 0===e?void 0:e.find((e=>e.id===c)))?p(c):(n(!0),i()))}),[l,a,i]),v().createElement(te,{title:e("kafkaInstance"),description:e("kafkaStepDescription")},(()=>{var n;switch(!0){case u:return v().createElement(T.g,null);case d:return v().createElement(v().Fragment,null,v().createElement(Cn,null),v().createElement(Xe,{onClear:()=>m({page:1,size:10})}));case s||r:return v().createElement(En,{onCreate:()=>{window.open("https://console.redhat.com/application-services/streams/kafkas","_blank")}});case o:return v().createElement(v().Fragment,null,v().createElement(Cn,null),v().createElement(T.g,null));default:return v().createElement(v().Fragment,null,v().createElement(Cn,null),v().createElement("div",{className:"pf-l-stack__item pf-m-fill"},l&&t&&v().createElement(E.Alert,{variant:"info",className:"pf-u-mb-md",isInline:!0,title:e("duplicateAlertKafka")}),v().createElement(E.Gallery,{hasGutter:!0},null===(n=null==a?void 0:a.items)||void 0===n?void 0:n.map((e=>v().createElement(E.Card,{isHoverable:!0,key:e.id,isSelectable:!0,isSelected:c===e.id,onClick:()=>p(e.id)},v().createElement(E.CardHeader,null,v().createElement(E.CardTitle,null,e.name)),v().createElement(E.CardBody,null,v().createElement(E.DescriptionList,null,v().createElement(E.DescriptionListGroup,null,v().createElement(E.DescriptionListTerm,null,"Region"),v().createElement(E.DescriptionListDescription,null,e.region)),v().createElement(E.DescriptionListGroup,null,v().createElement(E.DescriptionListTerm,null,"Owner"),v().createElement(E.DescriptionListDescription,null,e.owner)),v().createElement(E.DescriptionListGroup,null,v().createElement(E.DescriptionListTerm,null,"Created"),v().createElement(E.DescriptionListDescription,null,e.created_at))))))))))}})())},Cn=()=>{const{t:e}=(0,D.useTranslation)(),{request:t,runQuery:n}=Yt(),[a,o]=(0,g.useState)(!1),[r,c]=(0,g.useState)(!1),[i,l]=(0,g.useState)(!1),[s,d]=(0,g.useState)(!1),[u,p]=(0,g.useState)("Name"),m=(0,g.useCallback)((()=>o((e=>!e))),[]),h=(0,g.useCallback)((()=>c((e=>!e))),[]),C=(0,g.useCallback)((()=>l((e=>!e))),[]),y=(0,g.useCallback)((()=>d((e=>!e))),[]),b=dn(n,1e3),{name:S,owner:k,cloudProviders:T=[],regions:I=[],statuses:x=[]}=t.search||{},A=(0,g.useCallback)((()=>n({page:1,size:t.size})),[n,t.size]),P=(0,g.useRef)(null),w=(0,g.useRef)(null),B=(e,a,o)=>n(Object.assign(Object.assign({},t),{search:Object.assign(Object.assign({},t.search||{}),{[e]:a.includes(o)?a.filter((e=>e!==o)):[...a||[],o]})})),N=(e,t)=>{B("statuses",x,t.key)},O=(e,t)=>{B("cloudProviders",T,t.key)},M=(e,t)=>{B("regions",I,t.key)},_=e=>n(Object.assign(Object.assign({},t),{search:Object.assign(Object.assign({},t.search||{}),{[e]:void 0})})),j=(0,g.useCallback)((e=>{const t=(null==e?void 0:e.target).innerText;p(t),d((e=>!e))}),[]);(0,g.useEffect)((()=>{P.current&&(P.current.value=S||""),w.current&&(w.current.value=k||"")}),[P,S,k]);const R=yn.map((({value:e,label:t})=>v().createElement(E.DropdownItem,{key:e},t))),F=Sn.filter((e=>"preparing"!==e.value)).map((({value:e,label:t})=>v().createElement(E.SelectOption,{key:e,value:e},t))),L=bn.map((({value:e,label:t})=>v().createElement(E.SelectOption,{key:e,value:e},t))),z=kn.map((({value:e,label:t})=>v().createElement(E.SelectOption,{key:e,value:e},t))),G=v().createElement(E.ToolbarItem,null,v().createElement(E.Dropdown,{onSelect:e=>j(e),position:E.DropdownPosition.left,toggle:v().createElement(E.DropdownToggle,{onToggle:y,style:{width:"100%"}},v().createElement(f.FilterIcon,{size:"sm"})," ",u),isOpen:s,dropdownItems:R,style:{width:"100%"}})),q=v().createElement(v().Fragment,null,v().createElement(E.ToolbarGroup,{variant:"filter-group"},G,v().createElement(E.ToolbarFilter,{chips:x.map((t=>cn(t,e))),deleteChip:N,deleteChipGroup:()=>_("statuses"),categoryName:e("status"),showToolbarItem:u===e("status")},v().createElement(E.Select,{variant:"checkbox","aria-label":e("status"),onToggle:m,onSelect:(t,n)=>N(0,cn(n,e)),selections:x,isOpen:a,placeholderText:e("filterByStatus")},F)),v().createElement(E.ToolbarFilter,{chips:T.map((t=>cn(t,e))),deleteChip:O,deleteChipGroup:()=>_("cloudProviders"),categoryName:e("cloudProvider"),showToolbarItem:u===e("cloudProvider")},v().createElement(E.Select,{variant:"checkbox","aria-label":e("cloudProvider"),onToggle:h,onSelect:(t,n)=>O(0,cn(n,e)),selections:T,isOpen:r,placeholderText:e("filterByCloudProvider")},L)),v().createElement(E.ToolbarFilter,{chips:I.map((t=>cn(t,e))),deleteChip:M,deleteChipGroup:()=>_("regions"),categoryName:e("region"),showToolbarItem:u===e("region")},v().createElement(E.Select,{variant:"checkbox","aria-label":e("region"),onToggle:C,onSelect:(t,n)=>M(0,cn(n,e)),selections:I,isOpen:i,placeholderText:e("filterByRegion")},z)),v().createElement(E.ToolbarFilter,{chips:S?[S]:[],deleteChip:()=>_("name"),categoryName:e("name")},u===e("name")&&v().createElement(E.ToolbarItem,null,v().createElement(E.InputGroup,null,v().createElement(E.TextInput,{name:e("name"),id:e("name"),type:"search",placeholder:e("nameSearchPlaceholder"),"aria-label":e("nameSearchPlaceholder"),onChange:e=>b({size:t.size,page:1,orderBy:t.orderBy,search:Object.assign(Object.assign({},t.search),{name:e})}),ref:P}),v().createElement(E.Button,{variant:"control","aria-label":"search button for name input",onClick:()=>{var e;return n({size:t.size,page:1,orderBy:t.orderBy,search:Object.assign(Object.assign({},t.search),{name:(null===(e=P.current)||void 0===e?void 0:e.value)||""})})}},v().createElement(f.SearchIcon,null))))),v().createElement(E.ToolbarFilter,{chips:k?[k]:[],deleteChip:()=>_("owner"),categoryName:e("owner")},u===e("owner")&&v().createElement(E.ToolbarItem,null,v().createElement(E.InputGroup,null,v().createElement(E.TextInput,{name:e("owner"),id:e("owner"),type:"search",placeholder:e("ownerSearchPlaceholder"),"aria-label":e("ownerSearchPlaceholder"),onChange:e=>b({size:t.size,page:1,orderBy:t.orderBy,search:Object.assign(Object.assign({},t.search),{owner:e})}),ref:w}),v().createElement(E.Button,{variant:"control","aria-label":"search button for owner input",onClick:()=>{var e;return n({size:t.size,page:1,orderBy:t.orderBy,search:Object.assign(Object.assign({},t.search),{owner:(null===(e=w.current)||void 0===e?void 0:e.value)||""})})}},v().createElement(f.SearchIcon,null))))))),V=v().createElement(v().Fragment,null,v().createElement(E.ToolbarToggleGroup,{toggleIcon:v().createElement(f.FilterIcon,null),breakpoint:"xl"},q),v().createElement(E.ToolbarGroup,{variant:"icon-button-group"},v().createElement(E.ToolbarItem,null,v().createElement(E.Button,{variant:"primary",component:"a",href:"https://console.redhat.com/application-services/streams/kafkas",target:"_blank"},e("createKafkaInstance")))),v().createElement(E.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},v().createElement(Tn,{isCompact:!0})));return v().createElement(E.Toolbar,{id:"toolbar-group-types",collapseListedFiltersBreakpoint:"xl",clearAllFilters:A},v().createElement(E.ToolbarContent,null,V))},yn=[{value:"name",label:"Name"},{value:"status",label:"Status"},{value:"cloudprovider",label:"Cloud Provider"},{value:"region",label:"Region"},{value:"owner",label:"Owner"}],bn=[{value:"aws",label:"Amazon Web Services"}],Sn=[{value:"ready",label:"Ready"},{value:"failed",label:"Failed"},{value:"accepted",label:"Creation pending"},{value:"provisioning",label:"Creation in progress"},{value:"preparing",label:"Creation in progress"},{value:"deprovision",label:"Deletion in progress"}],kn=[{value:"us-east-1",label:"US East, N. Virginia"}],Tn=({isCompact:e=!1})=>{const{request:t,response:n,runQuery:a}=Yt();return v().createElement(Qe,{itemCount:(null==n?void 0:n.total)||0,page:t.page,perPage:t.size,onChange:e=>a(Object.assign(Object.assign({},e),{orderBy:t.orderBy,search:t.search})),isCompact:e})},In=({onModalToggle:e})=>{const{t}=(0,D.useTranslation)();return v().createElement(E.Bullseye,null,v().createElement(E.EmptyState,{variant:E.EmptyStateVariant.large},v().createElement(E.EmptyStateIcon,{icon:f.PlusCircleIcon}),v().createElement(E.Title,{headingLevel:"h1",size:E.TitleSizes.xl},t("noNamespaceAvailable")),v().createElement(E.EmptyStateBody,null,t("namespaceEmptyMsg")),v().createElement(E.Tooltip,{content:v().createElement("div",null,t("namespaceEnabledTooltip"))},v().createElement(E.Button,{variant:"primary",onClick:e},t("createPreviewNamespace")))))},xn=()=>{const{t:e}=(0,D.useTranslation)();return v().createElement(E.Alert,{variant:E.AlertVariant.info,isInline:!0,title:e("namespaceExpireAlert")})},An=n(31293),Pn=({isModalOpen:e,onModalToggle:t,refreshResponse:n})=>{const{t:a}=(0,D.useTranslation)(),[o,c]=(0,g.useState)(""),[i,s]=(0,g.useState)(!1),{connectorsApiBasePath:d,getToken:u}=w(),p=(0,N.useAlert)();(0,g.useEffect)((()=>{c(`preview-namespace-${An.generate()}`)}),[]);const m=(0,g.useCallback)((e=>{n(),s(!1),t(),null==p||p.addAlert({id:"preview-namespace-register-success",variant:E.AlertVariant.success,title:a("namespaceReady"),description:a("creationSuccessAlertDescription",{name:e})})}),[]),f=(0,g.useCallback)((e=>{s(!1),null==p||p.addAlert({id:"preview-namespace-register-error",variant:E.AlertVariant.danger,title:a("somethingWentWrong"),description:e})}),[p,a]);return v().createElement(E.Modal,{variant:E.ModalVariant.medium,title:a("createPreviewNamespace"),isOpen:e,onClose:t,actions:[v().createElement(E.Button,{key:"confirm",variant:"primary",isLoading:i,spinnerAriaValueText:i?a("Loading"):void 0,isDisabled:i,onClick:()=>{s(!0),(({accessToken:e,connectorsApiBasePath:t,evalName:n})=>{const a=new l.ConnectorNamespacesApi(new l.Configuration({accessToken:e,basePath:t}));return(e,t)=>{const o=r().CancelToken.source();return a.createEvaluationNamespace({name:n},{cancelToken:o.token}).then((t=>{e(t.data.name||"")})).catch((e=>{r().isCancel(e)||t(e.response.data.reason)})),()=>{o.cancel("Operation canceled by the user.")}}})({accessToken:u,connectorsApiBasePath:d,evalName:o})(m,f)}},a("create")),v().createElement(E.Button,{key:"cancel",variant:"link",isDisabled:i,onClick:t},a("cancel"))]},v().createElement(xn,null),v().createElement(E.Text,{component:E.TextVariants.h3,className:"pf-c-title pf-m-lg pf-u-pt-lg"},a("namespaceInformation")),v().createElement(E.Form,{className:"pf-u-mt-lg pf-u-mb-lg"},v().createElement(E.FormGroup,{label:a("name"),isRequired:!0,fieldId:"name"},v().createElement(E.Text,{component:E.TextVariants.p},o)),v().createElement(E.FormGroup,{label:a("duration"),isRequired:!0,fieldId:"name"},v().createElement(E.Text,{component:E.TextVariants.p},"48 hours"))),v().createElement(E.Alert,{variant:"info",isInline:!0,isPlain:!0,title:a("namespaceModelAlert")}))};function wn(){return(()=>{const{namespaceRef:e}=Qt();return(0,xe.useSelector)(e,(0,g.useCallback)((e=>e.matches({root:{api:"ready"}})),[e]))})()?v().createElement(Dn,null):null}const Dn=()=>{const{t:e}=(0,D.useTranslation)(),[t,n]=(0,g.useState)(!1),[a,o]=(0,g.useState)(),[r,c]=(0,g.useState)(!1),{response:l,selectedId:s,duplicateMode:d,loading:u,error:p,noResults:m,queryEmpty:h,firstRequest:C,onSelect:y,onDeselect:b,onRefresh:S,runQuery:k}=Ut(),I=(0,g.useCallback)((()=>{n((e=>!e))}),[]),x=t=>{const{hours:n,min:a}=U(new Date(t));return n<0||a<0?e("evalNamespaceExpiredMsg"):e("evalNamespaceExpire",{hours:n,min:a})};return(0,g.useEffect)((()=>{var e;const t=null===(e=null==l?void 0:l.items)||void 0===e?void 0:e.find((e=>"user"===e.tenant.kind&&i().has(e,"expiration")));o(t||void 0)}),[l]),(0,g.useEffect)((()=>{var e;d&&l&&((null===(e=null==l?void 0:l.items)||void 0===e?void 0:e.find((e=>e.id===s)))?y(s):(c(!0),b()))}),[d,l,b]),v().createElement(te,{title:e("namespace"),description:e("namespaceStepDescription")},(()=>{var t;switch(!0){case C:return v().createElement(T.g,null);case h:return v().createElement(v().Fragment,null,v().createElement(Bn,{onModalToggle:I,isEvalPresent:!!a}),v().createElement(Xe,{onClear:()=>k({page:1,size:10})}));case m||p:return v().createElement(v().Fragment,null,v().createElement(Bn,{onModalToggle:I,isEvalPresent:!!a}),v().createElement(In,{onModalToggle:I}));case u:return v().createElement(v().Fragment,null,v().createElement(Bn,{onModalToggle:I,isEvalPresent:!!a}),v().createElement(T.g,null));default:return v().createElement(v().Fragment,null,v().createElement(Bn,{onModalToggle:I,isEvalPresent:!!a}),v().createElement("div",{className:"pf-l-stack__item pf-m-fill"},d&&r&&v().createElement(E.Alert,{variant:"info",className:"pf-u-mb-md",isInline:!0,title:e("duplicateAlertNamespace")}),!!a&&(null==a?void 0:a.id)===s&&v().createElement(E.Alert,{customIcon:v().createElement(f.ClockIcon,null),variant:Z(new Date(a.expiration)),className:"pf-u-mb-md",isInline:!0,title:v().createElement("span",null,x(a.expiration))}),v().createElement(E.Gallery,{hasGutter:!0},null===(t=null==l?void 0:l.items)||void 0===t?void 0:t.map((t=>v().createElement(E.Card,{isHoverable:"ready"===t.status.state,key:t.id,isSelectable:"ready"===t.status.state,isSelected:s===t.id,onClick:()=>{var e;"ready"===(e=t).status.state&&y(e.id)},className:"deleting"===t.status.state?"pf-u-background-color-disabled-color-200":""},v().createElement(E.CardHeader,null,v().createElement(E.Stack,null,v().createElement(E.StackItem,null," ",v().createElement(E.CardTitle,null,t.name)),v().createElement(E.StackItem,null,"disconnected"===t.status.state&&v().createElement("div",{className:"pf-u-pt-md status"},v().createElement(E.Alert,{variant:"info",customIcon:v().createElement(E.Spinner,{size:"md","aria-label":e("Provisioning"),"aria-valuetext":"Please wait..."}),isInline:!0,isPlain:!0,title:e("Provisioning")})),"deleting"===t.status.state&&v().createElement("div",{className:"pf-u-pt-md"},v().createElement(E.Alert,{variant:"danger",isInline:!0,isPlain:!0,title:e("namespaceDeleting")}))))),v().createElement(E.CardBody,null,v().createElement(E.DescriptionList,null,v().createElement(E.DescriptionListGroup,null,v().createElement(E.DescriptionListTerm,null,e("owner")),v().createElement(E.DescriptionListDescription,null,t.owner)),v().createElement(E.DescriptionListGroup,null,v().createElement(E.DescriptionListTerm,null,e("clusterId")),v().createElement(E.DescriptionListDescription,null,t.cluster_id)),v().createElement(E.DescriptionListGroup,null,v().createElement(E.DescriptionListTerm,null,e("created")),v().createElement(E.DescriptionListDescription,null,v().createElement("time",{title:e("{{date}}",{date:new Date(t.created_at)}),dateTime:new Date(t.created_at).toISOString()},e("{{ date, ago }}",{date:new Date(t.created_at)}))))))))))))}})(),v().createElement(Pn,{isModalOpen:t,onModalToggle:I,refreshResponse:()=>{S()}}))},Bn=({onModalToggle:e,isEvalPresent:t})=>{const{request:n,runQuery:a}=Ut(),o=(0,g.useRef)(null),r=dn(a,1e3),c=v().createElement(v().Fragment,null,v().createElement(E.ToolbarItem,null,v().createElement(E.InputGroup,null,v().createElement(E.TextInput,{name:"textInput2",id:"textInput2",type:"search","aria-label":"search input example",onChange:e=>r({size:n.size,page:1,search:{name:e}}),ref:o}),v().createElement(E.Button,{variant:"control","aria-label":"search button for search input"},v().createElement(f.SearchIcon,null))))),i=v().createElement(v().Fragment,null,v().createElement(E.ToolbarToggleGroup,{toggleIcon:v().createElement(f.FilterIcon,null),breakpoint:"xl"},c),v().createElement(E.ToolbarGroup,{variant:"icon-button-group"},v().createElement(E.ToolbarItem,null,v().createElement(E.Tooltip,{content:v().createElement("div",null,t?(0,en.t)("namespaceDisabledTooltip"):(0,en.t)("namespaceEnabledTooltip"))},v().createElement(E.Button,{variant:"secondary",isDisabled:t,onClick:e,ouiaId:"button-create"},(0,en.t)("createPreviewNamespace"))))),v().createElement(E.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},v().createElement(Nn,{isCompact:!0})));return v().createElement(E.Toolbar,{id:"toolbar-group-types",collapseListedFiltersBreakpoint:"xl"},v().createElement(E.ToolbarContent,null,i))},Nn=({isCompact:e=!1})=>{const{request:t,response:n,runQuery:a}=Ut();return v().createElement(Qe,{itemCount:(null==n?void 0:n.total)||0,page:t.page,perPage:t.size,onChange:e=>a(Object.assign(Object.assign({},e),{orderBy:t.orderBy,search:t.search})),isCompact:e})},On=()=>{const[e,t]=v().useState(!1),[n,a]=v().useState(!1),o=v().useRef(),r=v().useRef();const{name:c,userServiceAccount:i,configString:s,kafka:d,namespace:u,connectorType:p}=Xt(),m=p.schema,g=p,h=Object.assign({name:c},{kind:"ConnectorType"},{channels:g.channels},{connector_type_id:p.id},{desired_state:l.ConnectorDesiredState.Ready},{kafka:{id:d.id,url:d.bootstrap_server_host||"demo"}},{namespace_id:u.id},{service_account:{client_id:i.clientId,client_secret:i.clientSecret}},{connector:JSON.parse(s)}),C=J(h);const y=(e,t)=>t?e:function(e){const t=Q(m).concat("clientSecret");return JSON.stringify(e,((e,n)=>-1===t.indexOf(e)?n:"*".repeat(n.length)),2)}(JSON.parse(e)),b=(e,n)=>{((e,t)=>{const n=e.currentTarget.parentElement,a=document.createElement("textarea");a.value=t.toString(),n.appendChild(a),a.select(),document.execCommand("copy"),n.removeChild(a)})(e,n),t(!0)},S=v().createElement(v().Fragment,null,v().createElement(E.CodeBlockAction,null,v().createElement(E.Button,{variant:"plain",ref:r,"aria-label":"show hidden fields icon",onClick:()=>a(!n)},n?v().createElement(f.EyeSlashIcon,null):v().createElement(f.EyeIcon,null)),v().createElement(E.Tooltip,{content:v().createElement("div",null,n?"Hide service account":"Show service account"),reference:r})),v().createElement(E.CodeBlockAction,null,v().createElement(E.ClipboardCopyButton,{id:"copy-button",textId:"code-content","aria-label":"Copy to clipboard",onClick:e=>b(e,y(C,n)),exitDelay:600,maxWidth:"110px",variant:"plain"},e?"Successfully copied to clipboard!":"Copy to clipboard")),v().createElement(E.CodeBlockAction,null,v().createElement(E.Button,{variant:"plain",ref:o,"aria-label":"Download icon",onClick:e=>{return t=e,a=y(C,n),(0,O.__awaiter)(void 0,void 0,void 0,(function*(){const e=t.currentTarget.parentElement,n=new Blob([a],{type:"application/json"}),o=yield URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download="connectorConfig.json",e.appendChild(r),r.click(),e.removeChild(r)}));var t,a}},v().createElement(f.FileDownloadIcon,null)),v().createElement(E.Tooltip,{content:v().createElement("div",null,"Download JSON"),reference:o})));return v().createElement(E.CodeBlock,{actions:S},v().createElement(E.CodeBlockCode,{id:"code-content"},y(C,n)))};function Mn(){var e;const{t}=(0,D.useTranslation)(),[n,a]=(0,g.useState)(!1),[o,r]=(0,g.useState)({clientId:!0,clientSecret:!0}),c=e=>{let t=Object.assign({},o);switch(e.currentTarget.id){case"clientId":t.clientId=!o.clientId,r(t);break;case"clientSecret":t.clientSecret=!o.clientSecret,r(t)}},{kafka:l,namespace:s,connectorType:d,name:u,topic:p,userErrorHandler:m,userServiceAccount:h,configString:C,savingError:y}=Xt(),b=(0,g.useCallback)((()=>a((e=>!e))),[]),S=JSON.parse(C),k=JSON.parse(C).connector,T=JSON.parse(C).kafka,I=d.schema,x=Q(I),A=i().mapKeys(S,((e,t)=>t.replace(/\./g,"_")));try{delete A.error_handler}catch(e){}const P=e=>"*".repeat(e.length);return v().createElement(te,{title:t("review"),description:t(n?"reviewJSONStepDescription":"reviewStepDescription"),component:v().createElement(E.Switch,{id:"toggle-json-view",label:t("viewJSONFormat"),labelOff:t("viewJSONFormat"),isChecked:n,onChange:b,ouiaId:"toggle"})},v().createElement(E.Form,null,y&&v().createElement(E.FormAlert,null,v().createElement(E.Alert,{variant:"danger",title:y,"aria-live":"polite",isInline:!0})),n?v().createElement(On,null):v().createElement(v().Fragment,null,v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("connectorCategory"))),v().createElement(E.GridItem,{span:8},d.description)),v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("kafkaInstance"))),v().createElement(E.GridItem,{span:8},l.name)),v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("namespace"))),v().createElement(E.GridItem,{span:8},s.name)),v().createElement(E.Title,{headingLevel:"h3",size:E.TitleSizes["2xl"]},t("basic")),v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("connectorName"))),v().createElement(E.GridItem,{span:8},u)),v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("type"))),v().createElement(E.GridItem,{span:8},null===(e=d.labels)||void 0===e?void 0:e.map((e=>e)))),(null==h?void 0:h.clientId)&&v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("clientId"))),v().createElement(E.GridItem,{span:8},v().createElement(E.Flex,null,v().createElement(E.FlexItem,null,o.clientId?P(null==h?void 0:h.clientId):null==h?void 0:h.clientId),v().createElement(E.FlexItem,{onClick:c,id:"clientId"},o.clientId?v().createElement(f.EyeIcon,null):v().createElement(f.EyeSlashIcon,null))))),(null==h?void 0:h.clientSecret)&&v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("clientSecret"))),v().createElement(E.GridItem,{span:8},v().createElement(E.Flex,null,v().createElement(E.FlexItem,null,o.clientSecret?P(null==h?void 0:h.clientSecret):null==h?void 0:h.clientSecret),v().createElement(E.FlexItem,{onClick:c,id:"clientSecret"},o.clientSecret?v().createElement(f.EyeIcon,null):v().createElement(f.EyeSlashIcon,null))))),v().createElement(E.Title,{headingLevel:"h3",size:E.TitleSizes["2xl"]},t("connectorSpecific")),k&&Object.keys(k).map((e=>v().createElement(E.Grid,{key:e},v().createElement(E.GridItem,{span:4},v().createElement("strong",null,i().startCase(e))),v().createElement(E.GridItem,{span:8},x.includes(e)?v().createElement(E.Flex,null,v().createElement(E.FlexItem,null,P(k[e]))):k[e])))),T&&Object.keys(T).map((e=>v().createElement(E.Grid,{key:e},v().createElement(E.GridItem,{span:4},v().createElement("strong",null,i().startCase(e))),v().createElement(E.GridItem,{span:8},T[e])))),void 0===k&&Object.keys(A).map((e=>v().createElement(E.Grid,{key:e},v().createElement(E.GridItem,{span:4},v().createElement("strong",null,i().startCase(e))),v().createElement(E.GridItem,{span:8},x.includes(e)?P(A[e]):"object"==typeof A[e]?"data_shape"===e?v().createElement(_n,{data:A[e]}):JSON.stringify(A[e]):A[e])))),m&&v().createElement(v().Fragment,null,v().createElement(E.Title,{headingLevel:"h3",size:E.TitleSizes["2xl"]},t("errorHandling")),v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("errorHandling"))),v().createElement(E.GridItem,{span:8},m)),p&&v().createElement(E.Grid,null,v().createElement(E.GridItem,{span:4},v().createElement("strong",null,t("topic"))),v().createElement(E.GridItem,{span:8},p))))))}const _n=({data:e})=>v().createElement(v().Fragment,null,Object.keys(e).map((t=>v().createElement(E.Grid,{key:t},v().createElement(E.GridItem,{span:2},v().createElement("strong",null,i().startCase(t),":")),v().createElement(E.GridItem,{span:10},"string"==typeof e[t]?e[t]:e[t].format)))));const jn=({onClose:e})=>{const{t}=(0,D.useTranslation)(),n=Jt(),[a,o]=(0,xe.useActor)(n);let{hasCustomConfigurator:r,activeStep:c,configureSteps:i}=(0,xe.useSelector)(n,(0,g.useCallback)((e=>({isLoading:e.matches({configureConnector:"loadConfigurator"}),hasErrors:e.matches("failure"),hasCustomConfigurator:!1!==e.context.Configurator&&void 0!==e.context.Configurator,activeStep:e.context.activeConfigurationStep,configuration:e.context.connectorConfiguration,configureSteps:e.context.configurationSteps,Configurator:e.context.Configurator,configuratorRef:e.children.configuratorRef})),[n]));const l=function(){const{t:e}=(0,D.useTranslation)(),t=Jt(),{isActive:n,canJumpTo:a,enableNext:o}=(0,xe.useSelector)(t,(0,g.useCallback)((e=>({isActive:e.matches("selectKafka"),canJumpTo:Kt.transition(e,"jumpToSelectKafka").changed||e.matches("selectKafka"),enableNext:Kt.transition(e,"next").changed})),[t]));return{name:e("kafkaInstance"),isActive:n,component:v().createElement(j,null,v().createElement(fn,null)),canJumpTo:a,enableNext:o}}(),s=function(){const{t:e}=(0,D.useTranslation)(),t=Jt(),{isActive:n,canJumpTo:a,enableNext:o}=(0,xe.useSelector)(t,(0,g.useCallback)((e=>({isActive:e.matches("basicConfiguration"),canJumpTo:Kt.transition(e,"jumpToBasicConfiguration").changed||e.matches("basicConfiguration"),enableNext:Kt.transition(e,"next").changed,activeStep:e.context.activeConfigurationStep})),[t]));return{name:e("core"),isActive:n,component:v().createElement(j,null,v().createElement(nn,null)),canJumpTo:a,enableNext:o}}(),d=function(){const{t:e}=(0,D.useTranslation)(),t=Jt(),{isActive:n,canJumpTo:a,enableNext:o}=(0,xe.useSelector)(t,(0,g.useCallback)((e=>({isActive:e.matches("configureConnector"),canJumpTo:Kt.transition(e,"jumpToConfigureConnector").changed||e.matches("configureConnector"),enableNext:Kt.transition(e,"next").changed})),[t]));return{name:e("connectorSpecific"),isActive:n,component:v().createElement(j,null,v().createElement(rn,null)),canJumpTo:a,enableNext:o}}(),u=function(){const{t:e}=(0,D.useTranslation)(),t=Jt(),{isActive:n,canJumpTo:a,enableNext:o}=(0,xe.useSelector)(t,(0,g.useCallback)((e=>({isActive:e.matches("errorConfiguration"),canJumpTo:Kt.transition(e,"jumpToErrorConfiguration").changed||e.matches("errorConfiguration"),enableNext:Kt.transition(e,"next").changed,activeStep:e.context.activeConfigurationStep})),[t]));return{name:e("errorHandling"),isActive:n,component:v().createElement(j,null,v().createElement(vn,null)),canJumpTo:a,enableNext:o}}();if("saved"===a.value)return null;const p=e=>Kt.transition(a,{type:"jumpToConfigureConnector",subStep:e}).changed,m=[{name:t("connector"),isActive:a.matches("selectConnector"),component:v().createElement(j,null,v().createElement(un,null)),canJumpTo:Kt.transition(a,"jumpToSelectConnector").changed||a.matches("selectConnector"),enableNext:Kt.transition(a,"next").changed},l,{name:t("namespace"),isActive:a.matches("selectNamespace"),component:v().createElement(j,null,v().createElement(wn,null)),canJumpTo:Kt.transition(a,"jumpToSelectNamespace").changed||a.matches("selectNamespace"),enableNext:Kt.transition(a,"next").changed},{name:t("configuration"),isActive:a.matches("basicConfiguration"),canJumpTo:Kt.transition(a,"jumpToBasicConfiguration").changed||a.matches("basicConfiguration"),steps:(()=>{let e=[s];return r&&void 0!==i&&i&&i.map(((t,n)=>{e.push({name:t,isActive:a.matches("configureConnector")&&c===n,component:v().createElement(j,null,v().createElement(rn,null)),canJumpTo:p(n+1),enableNext:Kt.transition(a,"next").changed})})),(!r&&void 0===i||!1===i)&&(e.push(d),e.push(u)),e})()},{name:t("review"),isActive:a.matches("reviewConfiguration"),component:v().createElement(j,null,v().createElement(Mn,null)),canJumpTo:Kt.transition(a,"jumpToReviewConfiguration").changed||a.matches("reviewConfiguration"),enableNext:Kt.transition(a,"next").changed,nextButtonText:t("createConnector")}],E=lt(m),f=E.reduceRight(((e,t,n)=>t.isActive&&n>e?n:e),-1)+1;return v().createElement(dt,{className:"cos",steps:m,currentStep:f,onNext:()=>o("next"),onBack:()=>o("prev"),onClose:e,onSave:()=>!1,goToStep:e=>{switch(e){case 1:o("jumpToSelectConnector");break;case 2:o("jumpToSelectKafka");break;case 3:o("jumpToSelectNamespace");break;case 4:o("jumpToBasicConfiguration");break;case 5:o("jumpToConfigureConnector");break;case 6:o("jumpToErrorConfiguration");break;case E.length:o("jumpToReviewConfiguration");break;default:e<E.length&&o({type:"jumpToConfigureConnector",subStep:e-6})}},goToStepById:(...e)=>console.log("goToStepById",e),goToStepByName:(...e)=>console.log("goToStepByName",e),hasNoBodyPadding:!0})},Rn=({onSave:e,onClose:t})=>{const{t:n}=(0,D.useTranslation)(),a=(0,N.useConfig)(),{connectorsApiBasePath:o,getToken:r}=w(),[c,i]=(0,g.useState)(!1),l=()=>i(!1);return v().createElement(v().Fragment,null,v().createElement(E.PageSection,{variant:"light",hasShadowBottom:!0},v().createElement(E.Breadcrumb,null,v().createElement(E.BreadcrumbItem,null,v().createElement(B.Link,{to:"/"},n("connectorsInstances"))),v().createElement(E.BreadcrumbItem,{isActive:!0},n("createAConnectorsInstance"))),v().createElement(E.Level,{className:"pf-u-pt-md pf-u-pb-md"},v().createElement(E.Title,{headingLevel:"h1"},n("createAConnectorsInstance")))),v().createElement(E.PageSection,{padding:{default:"noPadding"},style:{zIndex:0},type:"wizard"},v().createElement(Wt,{accessToken:r,connectorsApiBasePath:o,fetchConfigurator:e=>H(e,(null==a?void 0:a.cos.configurators)||{}),onSave:e},v().createElement(jn,{onClose:()=>i(!0)}),v().createElement(E.Modal,{title:n("Leave page?"),variant:"small",isOpen:c,onClose:l,actions:[v().createElement(E.Button,{key:"confirm",variant:"primary",onClick:t},"Confirm"),v().createElement(E.Button,{key:"cancel",variant:"link",onClick:l},"Cancel")]},n("leaveCreateConnectorConfirmModalDescription")))))},Fn=({onSave:e,onClose:t})=>{const{t:n}=(0,D.useTranslation)(),a=(0,N.useAlert)(),o=(0,N.useConfig)(),{connectorsApiBasePath:r,getToken:c}=w(),[i,l]=(0,g.useState)(!1),s=()=>l(!1),[p,m]=(0,g.useState)(),{hash:f}=(0,B.useLocation)(),h=f.split("&")[0].substring(1),C=(0,g.useCallback)((e=>{m(e)}),[]),[y,b]=(0,g.useState)(),S=(0,g.useCallback)((e=>{null==a||a.addAlert({id:"connector-duplicate-error",variant:N.AlertVariant.danger,title:n("somethingWentWrong"),description:e})}),[a,n]),k=(0,g.useCallback)((e=>{b(e)}),[]);return(0,g.useEffect)((()=>{d({accessToken:c,connectorsApiBasePath:r,connectorId:h})(C,S)}),[h]),(0,g.useEffect)((()=>{(null==p?void 0:p.connector_type_id)&&u({accessToken:c,connectorsApiBasePath:r,connectorTypeId:null==p?void 0:p.connector_type_id})(k)}),[p]),v().createElement(v().Fragment,null,v().createElement(E.PageSection,{variant:"light",hasShadowBottom:!0},v().createElement(E.Breadcrumb,null,v().createElement(E.BreadcrumbItem,null,v().createElement(B.Link,{to:"/"},n("connectorsInstances"))),v().createElement(E.BreadcrumbItem,{isActive:!0},n("duplicateConnector"))),v().createElement(E.TextContent,{className:"pf-u-pt-md pf-u-pb-md"},v().createElement(E.Title,{headingLevel:"h1"},n("duplicateConnector")),p&&y?v().createElement(E.Text,null,v().createElement("strong",null,n("Connector"),": "),y.name):null)),v().createElement(E.PageSection,{padding:{default:"noPadding"},style:{zIndex:0},type:"wizard"},p&&y?v().createElement(Wt,{accessToken:c,connectorsApiBasePath:r,fetchConfigurator:e=>H(e,(null==o?void 0:o.cos.configurators)||{}),connectorId:h,connectorData:p,connectorTypeDetails:y,duplicateMode:!0,onSave:e},v().createElement(jn,{onClose:()=>l(!0)}),v().createElement(E.Modal,{title:n("leaveDuplicateConnectorConfirmModalTitle"),variant:"small",isOpen:i,onClose:s,actions:[v().createElement(E.Button,{key:"confirm",variant:"primary",onClick:t},"Confirm"),v().createElement(E.Button,{key:"cancel",variant:"link",onClick:s},"Cancel")]},n("leaveDuplicateConnectorConfirmModalDescription"))):v().createElement(T.g,null)))},Ln=({getToken:e,connectorsApiBasePath:t,kafkaManagementApiBasePath:n})=>{const{t:a}=(0,D.useTranslation)(),o=(0,N.useAlert)(),r=(0,B.useHistory)(),c=(0,g.useCallback)((()=>r.push("/")),[r]),i=(0,g.useCallback)((()=>r.push("/create-connector")),[r]),l=(0,g.useCallback)(((e,t)=>r.push({pathname:`/${e}`,hash:`#${t}`})),[r]),s=(0,g.useCallback)((e=>r.push({pathname:"/duplicate-connector",hash:`#${e}`})),[r]),d=(0,g.useCallback)((e=>{null==o||o.addAlert({id:"connector-created",variant:N.AlertVariant.success,title:a("creationSuccessAlertTitle"),description:a("creationSuccessAlertDescription",{name:e})}),c()}),[o,c,a]);return v().createElement(P,{getToken:e,connectorsApiBasePath:t,kafkaManagementApiBasePath:n},v().createElement(B.Switch,null,v().createElement(B.Route,{path:"/",exact:!0},v().createElement(tt,{onCreateConnector:i,onConnectorDetail:l,onDuplicateConnector:s})),v().createElement(B.Route,{path:"/create-connector"},v().createElement(Rn,{onSave:d,onClose:c})),v().createElement(B.Route,{path:"/duplicate-connector"},v().createElement(Fn,{onSave:d,onClose:c})),v().createElement(B.Route,{path:"/:id/"},v().createElement(Te,{onSave:c}))))}},91031:(e,t,n)=>{n.d(t,{g:()=>c});var a=n(75418),o=n.n(a),r=n(21012);const c=()=>o().createElement(r.EmptyState,null,o().createElement(r.EmptyStateIcon,{variant:"container",component:r.Spinner}),o().createElement(r.Title,{size:"lg",headingLevel:"h4"},"Loading"))},78800:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(59093),o=n(4958),r=n(2899),c=n.n(r),i=n(16486),l=n.n(i),s=n(59600),d=n.n(s),u=n(31521);const p={en:o.Z};c().use(d()).use(l()).use(u.initReactI18next).init({backend:{loadPath:`${n.p}locales/{{lng}}/{{ns}}.json`},fallbackLng:"en",load:"all",debug:!0,ns:["public"],defaultNS:"public",nsSeparator:":",keySeparator:".",interpolation:{defaultVariables:void 0,escapeValue:!1,format:(e,t,n)=>{if((0,a.isDate)(e)&&t){const r=n?p[n]:o.Z;return"short"===t?(0,a.format)(e,"P",{locale:r}):"long"===t?(0,a.format)(e,"PPPP",{locale:r}):"relative"===t?(0,a.formatRelative)(e,new Date,{locale:r}):"ago"===t?(0,a.formatDistance)(e,new Date,{locale:r,addSuffix:!0}):(0,a.format)(e,t,{locale:r})}return e}}});const m=c()}}]);
//# sourceMappingURL=29.9423b4e0.js.map