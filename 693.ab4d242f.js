(self.webpackChunkcos_ui=self.webpackChunkcos_ui||[]).push([[693],{21078:(e,t,n)=>{var r=n(62488),o=n(37285);e.exports=function e(t,n,s,a,i){var l=-1,u=t.length;for(s||(s=o),i||(i=[]);++l<u;){var d=t[l];n>0&&s(d)?n>1?e(d,n-1,s,a,i):r(i,d):a||(i[i.length]=d)}return i}},47816:(e,t,n)=>{var r=n(28483),o=n(3674);e.exports=function(e,t){return e&&r(e,t,o)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},2958:(e,t,n)=>{var r=n(46384),o=n(90939);e.exports=function(e,t,n,s){var a=n.length,i=a,l=!s;if(null==e)return!i;for(e=Object(e);a--;){var u=n[a];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<i;){var d=(u=n[a])[0],c=e[d],h=u[1];if(l&&u[2]){if(void 0===c&&!(d in e))return!1}else{var m=new r;if(s)var p=s(c,h,d,e,t,m);if(!(void 0===p?o(h,c,3,s,m):p))return!1}}return!0}},67206:(e,t,n)=>{var r=n(91573),o=n(16432),s=n(6557),a=n(1469),i=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):i(e)}},91573:(e,t,n)=>{var r=n(2958),o=n(1499),s=n(42634);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:(e,t,n)=>{var r=n(90939),o=n(27361),s=n(79095),a=n(15403),i=n(89162),l=n(42634),u=n(40327);e.exports=function(e,t){return a(e)&&i(t)?l(u(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?s(n,e):r(t,a,3)}}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,n)=>{var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},10611:(e,t,n)=>{var r=n(34865),o=n(71811),s=n(65776),a=n(13218),i=n(40327);e.exports=function(e,t,n,l){if(!a(e))return e;for(var u=-1,d=(t=o(t,e)).length,c=d-1,h=e;null!=h&&++u<d;){var m=i(t[u]),p=n;if("__proto__"===m||"constructor"===m||"prototype"===m)return e;if(u!=c){var g=h[m];void 0===(p=l?l(g,m,h):void 0)&&(p=a(g)?g:s(t[u+1])?[]:{})}r(h,m,p),h=h[m]}return e}},57406:(e,t,n)=>{var r=n(71811),o=n(10928),s=n(40292),a=n(40327);e.exports=function(e,t){return t=r(t,e),null==(e=s(e,t))||delete e[a(o(t))]}},60696:(e,t,n)=>{var r=n(68630);e.exports=function(e){return r(e)?void 0:e}},99021:(e,t,n)=>{var r=n(85564),o=n(45357),s=n(30061);e.exports=function(e){return s(o(e,void 0,r),e+"")}},1499:(e,t,n)=>{var r=n(89162),o=n(3674);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,r(a)]}return t}},222:(e,t,n)=>{var r=n(71811),o=n(35694),s=n(1469),a=n(65776),i=n(41780),l=n(40327);e.exports=function(e,t,n){for(var u=-1,d=(t=r(t,e)).length,c=!1;++u<d;){var h=l(t[u]);if(!(c=null!=e&&n(e,h)))break;e=e[h]}return c||++u!=d?c:!!(d=null==e?0:e.length)&&i(d)&&a(h,d)&&(s(e)||o(e))}},37285:(e,t,n)=>{var r=n(62705),o=n(35694),s=n(1469),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||o(e)||!!(a&&e&&e[a])}},89162:(e,t,n)=>{var r=n(13218);e.exports=function(e){return e==e&&!r(e)}},42634:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},40292:(e,t,n)=>{var r=n(97786),o=n(14259);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},66678:(e,t,n)=>{var r=n(85990);e.exports=function(e){return r(e,4)}},85564:(e,t,n)=>{var r=n(21078);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},79095:(e,t,n)=>{var r=n(13),o=n(222);e.exports=function(e,t){return null!=e&&o(e,t,r)}},10928:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},66604:(e,t,n)=>{var r=n(89465),o=n(47816),s=n(67206);e.exports=function(e,t){var n={};return t=s(t,3),o(e,(function(e,o,s){r(n,o,t(e,o,s))})),n}},50308:e=>{e.exports=function(){}},57557:(e,t,n)=>{var r=n(29932),o=n(85990),s=n(57406),a=n(71811),i=n(98363),l=n(60696),u=n(99021),d=n(46904),c=u((function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,(function(t){return t=a(t,e),u||(u=t.length>1),t})),i(e,d(e),n),u&&(n=o(n,7,l));for(var c=t.length;c--;)s(n,t[c]);return n}));e.exports=c},39601:(e,t,n)=>{var r=n(40371),o=n(79152),s=n(15403),a=n(40327);e.exports=function(e){return s(e)?r(a(e)):o(e)}},31921:(e,t,n)=>{var r=n(10611);e.exports=function(e,t,n,o){return o="function"==typeof o?o:void 0,null==e?e:r(e,t,n,o)}},28693:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Auto:()=>D,AutoForm:()=>A,BaseForm:()=>S,Bridge:()=>$,Quick:()=>j,QuickForm:()=>F,Validated:()=>N,ValidatedForm:()=>I,ValidatedQuickForm:()=>k,changedKeys:()=>f,connectField:()=>K,context:()=>b,createAutoField:()=>W,filterDOMProps:()=>H,joinName:()=>g,randomIds:()=>O,useField:()=>q,useForm:()=>R});var r=n(66678),o=n.n(r),s=n(18446),a=n.n(s),i=n(57557),l=n.n(i),u=n(31921),d=n.n(u),c=n(27361),h=n.n(c),m=n(75418),p=n.n(m);function g(...e){const t=[];for(let n=0;n!==e.length;++n){const r=e[n];(r||0===r)&&("string"==typeof r?-1!==r.indexOf(".")?t.push(...r.split(".")):t.push(r):Array.isArray(r)?e.splice(n--,1,...r):t.push(""+r))}return null===e[0]?t:t.join(".")}function v(e){return!(!e||e!==Object(e)||e instanceof Date)}function f(e,t,n){if(!v(t)||n&&typeof t!=typeof n)return a()(t,n)?[]:[e];const r=[e];if(v(n)){for(const o in t)o in n&&a()(t[o],n[o])||r.push(g(e,o));for(const o in n)o in t||r.push(g(e,o));1===r.length&&r.pop()}else for(const n in t)r.push(g(e,n));return r}const b=(0,m.createContext)(null);function C(e){let t=0;return()=>`${e}-${("000"+(t++).toString(36)).slice(-4)}`}const x=C("uniforms");function O(e=x()){return C(e)}class S extends m.Component{constructor(e){super(e),this.state={changed:!1,changedMap:Object.create(null),resetCount:0,submitted:!1,submitting:!1},this.mounted=!1,this.randomId=O(this.props.id),this.onReset=this.reset=this.onReset.bind(this),this.onChange=this.change=this.onChange.bind(this),this.onSubmit=this.submit=this.onSubmit.bind(this);const t=this.getModel.bind(this);this.getModel=(e,n=t(e))=>void 0!==e&&this.props.modelTransform?this.props.modelTransform(e,n):n}componentDidMount(){this.mounted=!0}componentDidUpdate(e,t,n){}componentWillUnmount(){this.mounted=!1,this.delayId&&clearTimeout(this.delayId)}getContext(){return{changed:this.state.changed,changedMap:this.state.changedMap,error:this.getContextError(),model:this.getContextModel(),name:this.getContextName(),onChange:this.getContextOnChange(),onSubmit:this.getContextOnSubmit(),randomId:this.randomId,schema:this.getContextSchema(),state:this.getContextState(),submitting:this.state.submitting,validating:!1,submitted:this.state.submitted}}getContextName(){return[]}getContextError(){return this.props.error}getContextModel(){return this.getModel("form")}getContextState(){return{disabled:!!this.props.disabled,label:!!this.props.label,placeholder:!!this.props.placeholder,readOnly:!!this.props.readOnly,showInlineError:!!this.props.showInlineError}}getContextSchema(){return this.props.schema}getContextOnChange(){return this.onChange}getContextOnSubmit(){return this.onSubmit}getModel(e,t=this.props.model){return t}getNativeFormProps(){const e=l()(this.props,["autosave","autosaveDelay","disabled","error","label","model","modelTransform","onChange","onSubmit","placeholder","readOnly","schema","showInlineError"]);return Object.assign(Object.assign({},e),{onSubmit:this.onSubmit,key:`reset-${this.state.resetCount}`})}onChange(e,t){if(this.mounted){const n=f(e,t,h()(this.getModel(),e));0!==n.length&&this.setState((e=>e.changed&&n.every((t=>!!h()(e.changedMap,t)))?null:{changed:!0,changedMap:n.reduce(((e,t)=>d()(e,t,{},o())),o()(e.changedMap))}))}this.props.onChange&&this.props.onChange(e,t),this.mounted&&this.props.autosave&&(this.delayId&&(this.delayId=clearTimeout(this.delayId)),this.delayId=setTimeout((()=>{this.setState((()=>null),(()=>{this.onSubmit()}))}),this.props.autosaveDelay))}__reset(e){return{changed:!1,changedMap:Object.create(null),resetCount:e.resetCount+1,submitted:!1,submitting:!1}}onReset(){this.setState(this.__reset)}onSubmit(e){e&&(e.preventDefault(),e.stopPropagation()),this.setState((e=>e.submitted?null:{submitted:!0}));const t=this.props.onSubmit(this.getModel("submit"));return t instanceof Promise?(this.setState({submitting:!0}),t.finally((()=>{this.setState({submitting:!1})}))):Promise.resolve()}render(){return p().createElement(b.Provider,{value:this.getContext()},p().createElement("form",Object.assign({},this.getNativeFormProps())))}}S.displayName="Form",S.defaultProps={autosave:!1,autosaveDelay:0,error:null,label:!0,model:Object.create(null),noValidate:!0,onSubmit(){}};var y=n(70655);function j(e){class t extends e{getNativeFormProps(){const e=super.getNativeFormProps(),{autoField:t=this.getAutoField(),errorsField:n=this.getErrorsField(),submitField:r=this.getSubmitField()}=e,o=(0,y.__rest)(e,["autoField","errorsField","submitField"]);return o.children||(o.children=this.getContextSchema().getSubfields().map((e=>p().createElement(t,{key:e,name:e}))).concat([p().createElement(n,{key:"$ErrorsField"}),p().createElement(r,{key:"$SubmitField"})])),o}getAutoField(){return()=>null}getErrorsField(){return()=>null}getSubmitField(){return()=>null}}return t.Quick=j,t.displayName=`Quick${e.displayName}`,t}const F=j(S);var M=n(50361),E=n.n(M),V=n(50308),P=n.n(V);function N(e){class t extends e{constructor(e){super(e),this.state=Object.assign(Object.assign({},this.state),{error:null,validate:!1,validating:!1,validator:this.getContextSchema().getValidator(e.validator)}),this.onValidate=this.validate=this.onValidate.bind(this),this.onValidateModel=this.validateModel=this.onValidateModel.bind(this)}getContextError(){var e;return null!==(e=super.getContextError())&&void 0!==e?e:this.state.error}getContext(){return Object.assign(Object.assign({},super.getContext()),{validating:this.state.validating})}getNativeFormProps(){return l()(super.getNativeFormProps(),["onValidate","validate","validator"])}componentDidUpdate(e,t,n){super.componentDidUpdate(e,t,n);const{model:r,schema:o,validate:s,validator:i}=this.props;o!==e.schema||i!==e.validator?this.setState({validator:o.getValidator(i)},(()=>{_(s,this.state.validate)&&this.onValidate()})):!a()(r,e.model)&&_(s,this.state.validate)&&this.onValidateModel(r)}onChange(e,t){_(this.props.validate,this.state.validate)&&this.onValidate(e,t),super.onChange(e,t)}__reset(e){return Object.assign(Object.assign({},super.__reset(e)),{error:null,validate:!1,validating:!1})}onSubmit(e){e&&(e.preventDefault(),e.stopPropagation()),this.setState({submitted:!0,validate:!0});const t=this.onValidate().then((e=>null!==e?Promise.reject(e):super.onSubmit().catch((e=>{throw this.setState({error:e}),e}))));return t.catch(P()),t}onValidate(e,t){let n=this.getContextModel();return n&&e&&(n=d()(o()(n),e,E()(t),o())),this.onValidateModel(n)}onValidateModel(e){const t=this.getModel("validate",e),n=function(e){function t(t,n){return t instanceof Promise?(e(),t.then(n)):n(t)}return t}((()=>{this.setState({validating:!0})}));return n(this.state.validator(t),((e=null)=>n(this.props.onValidate(t,e),((e=null)=>{var t;return e=this.props.error===e?null:e,this.setState((t=>t.error!==e||t.validating?{error:e,validating:!1}:null)),Promise.resolve(null!==(t=this.props.error)&&void 0!==t?t:e)}))))}}return t.Validated=N,t.displayName=`Validated${e.displayName}`,t.defaultProps=Object.assign(Object.assign({},e.defaultProps),{onValidate:(e,t)=>t,validate:"onChangeAfterSubmit"}),t}function _(e,t){return"onChange"===e||"onChangeAfterSubmit"===e&&t}const I=N(S),k=N(j(S));function D(e){class t extends e{constructor(e){super(e),this.state=Object.assign(Object.assign({},this.state),{model:e.model})}componentDidUpdate(e,t,n){const{model:r}=this.props;a()(r,e.model)||this.setState({model:r}),super.componentDidUpdate(e,t,n)}getNativeFormProps(){return l()(super.getNativeFormProps(),["onChangeModel"])}getModel(e){return this.state.model}onChange(e,t){super.onChange(e,t),this.setState((n=>({model:d()(o()(n.model),e,t,o())})),(()=>{this.props.onChangeModel&&this.props.onChangeModel(this.state.model)}))}__reset(e){return Object.assign(Object.assign({},super.__reset(e)),{model:this.props.model})}}return t.Auto=D,t.displayName=`Auto${e.displayName}`,t}const A=D(k);var w=n(41143),T=n.n(w);class ${constructor(...e){T()(this.constructor!==$,"Bridge cannot be instantiated (args=%o).",{args:e})}getError(e,t){return T()(!1,"%s have not implemented `getError` method (args=%o).",this.constructor.name,{name:e,error:t})}getErrorMessage(e,t){return T()(!1,"%s have not implemented `getErrorMessage` method (args=%o).",this.constructor.name,{name:e,error:t})}getErrorMessages(e){return T()(!1,"%s have not implemented `getErrorMessages` method (args=%o).",this.constructor.name,{error:e})}getField(e){return T()(!1,"%s have not implemented `getField` method (args=%o).",this.constructor.name,{name:e})}getInitialValue(e,t){return T()(!1,"%s have not implemented `getInitialValue` method (args=%o).",this.constructor.name,{name:e,props:t})}getProps(e,t){return T()(!1,"%s have not implemented `getProps` method (args=%o).",this.constructor.name,{name:e,props:t})}getSubfields(e){return T()(!1,"%s have not implemented `getSubfields` method (args=%o).",this.constructor.name,{name:e})}getType(e){return T()(!1,"%s have not implemented `getType` method (args=%o).",this.constructor.name,{name:e})}getValidator(e){return T()(!1,"%s have not implemented `getValidator` method (args=%o).",this.constructor.name,{options:e})}}var U=n(66604),Q=n.n(U);function R(){const e=(0,m.useContext)(b);return T()(null!==e,"useForm must be used within a form."),e}function B(e,t,n,r){const o=!0===e||void 0===e,s=!0===t||void 0===t,a=s?r:t;return[""===e||!1===e||null===e||o&&(s||!n)?"":o?a:e,a]}function q(e,t,n){var r;const o=R(),s=!1!==(null==n?void 0:n.initialValue),a=s?(0,m.useRef)(!1):{current:!1},i=g((null==n?void 0:n.absoluteName)?"":o.name,e),l=Q()(o.state,((e,n)=>{const r=t[n];return null!=r?!!r:e})),u=!!h()(o.changedMap,i),d=o.schema.getError(i,o.error),c=o.schema.getErrorMessage(i,o.error),p=o.schema.getField(i),v=o.schema.getType(i),f=o.schema.getSubfields(i),b=o.schema.getProps(i,Object.assign(Object.assign({},l),t)),[C,x]=B(t.label,b.label,l.label,""),[O]=B(t.placeholder,b.placeholder,l.placeholder,C||x),S=(0,m.useMemo)((()=>o.randomId()),[]),y=(0,m.useCallback)(((e,t=i)=>{a.current=!0,o.onChange(t,e)}),[o.onChange,i]),j=h()(o.model,i);let F,M=null!==(r=t.value)&&void 0!==r?r:j;s&&(a.current||(void 0===M?(M=o.schema.getInitialValue(i,t),F=M):void 0!==t.value&&t.value!==j&&(F=t.value)),(0,m.useEffect)((()=>{var e;(null!==(e=t.required)&&void 0!==e?e:b.required)&&void 0!==F&&y(F)}),[]));return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({id:S},l),{changed:u,error:d,errorMessage:c,field:p,fieldType:v,fields:f,onChange:y,value:M}),b),t),{label:C,name:i,placeholder:O}),o]}function K(e,t){function n(n){const[r,o]=q(n.name,n,t),s=""!==n.name,a=Object.keys(o.state).some((e=>{const t=n[e];return null!=t}));if(!a&&!s)return p().createElement(e,Object.assign({},n,r));const i=Object.assign({},o);return a&&(i.state=Q()(i.state,((e,t)=>{const r=n[t];return null!=r?!!r:e}))),s&&(i.name=i.name.concat(n.name)),p().createElement(b.Provider,{value:i},p().createElement(e,Object.assign({},n,r)))}return n.displayName=`${e.displayName||e.name}Field`,Object.assign(n,{Component:e,options:t})}function W(e){const t=(0,m.createContext)(e);return Object.assign((function(e){var n,r;const[o,s]=q(e.name,e),a=(0,m.useContext)(t),i=null!==(n=o.component)&&void 0!==n?n:a(o,s);return T()(i,"AutoField received no component for: %s",o.name),"options"in i&&"leaf"===(null===(r=i.options)||void 0===r?void 0:r.kind)?(0,m.createElement)(i.Component,o):(0,m.createElement)(i,e)}),{componentDetectorContext:t,defaultComponentDetector:e})}const z=[],G=new Set,H=Object.assign((function(e){const t=Object.assign({},e);for(const n in e)G.has(n)&&delete t[n];return t}),{register(...e){e.forEach((e=>{G.has(e)||(z.push(e),G.add(e))})),z.sort()},registered:z});H.register("changed","error","errorMessage","field","fieldType","fields","initialCount","name","onChange","transform","value","disabled","label","placeholder","showInlineError","component","allowedValues")}}]);
//# sourceMappingURL=693.ab4d242f.js.map