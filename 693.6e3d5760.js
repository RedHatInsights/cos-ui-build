(self.webpackChunkcos_ui=self.webpackChunkcos_ui||[]).push([[693],{21078:(t,e,n)=>{var r=n(62488),o=n(37285);t.exports=function t(e,n,i,a,s){var u=-1,l=e.length;for(i||(i=o),s||(s=[]);++u<l;){var d=e[u];n>0&&i(d)?n>1?t(d,n-1,i,a,s):r(s,d):a||(s[s.length]=d)}return s}},47816:(t,e,n)=>{var r=n(28483),o=n(3674);t.exports=function(t,e){return t&&r(t,e,o)}},13:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},2958:(t,e,n)=>{var r=n(46384),o=n(90939);t.exports=function(t,e,n,i){var a=n.length,s=a,u=!i;if(null==t)return!s;for(t=Object(t);a--;){var l=n[a];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var d=(l=n[a])[0],p=t[d],c=l[1];if(u&&l[2]){if(void 0===p&&!(d in t))return!1}else{var h=new r;if(i)var f=i(p,c,d,t,e,h);if(!(void 0===f?o(c,p,3,i,h):f))return!1}}return!0}},67206:(t,e,n)=>{var r=n(91573),o=n(16432),i=n(6557),a=n(1469),s=n(39601);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?a(t)?o(t[0],t[1]):r(t):s(t)}},91573:(t,e,n)=>{var r=n(2958),o=n(1499),i=n(42634);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},16432:(t,e,n)=>{var r=n(90939),o=n(27361),i=n(79095),a=n(15403),s=n(89162),u=n(42634),l=n(40327);t.exports=function(t,e){return a(t)&&s(e)?u(l(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,3)}}},40371:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},79152:(t,e,n)=>{var r=n(97786);t.exports=function(t){return function(e){return r(e,t)}}},10611:(t,e,n)=>{var r=n(34865),o=n(71811),i=n(65776),a=n(13218),s=n(40327);t.exports=function(t,e,n,u){if(!a(t))return t;for(var l=-1,d=(e=o(e,t)).length,p=d-1,c=t;null!=c&&++l<d;){var h=s(e[l]),f=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(l!=p){var m=c[h];void 0===(f=u?u(m,h,c):void 0)&&(f=a(m)?m:i(e[l+1])?[]:{})}r(c,h,f),c=c[h]}return t}},57406:(t,e,n)=>{var r=n(71811),o=n(10928),i=n(40292),a=n(40327);t.exports=function(t,e){return e=r(e,t),null==(t=i(t,e))||delete t[a(o(e))]}},60696:(t,e,n)=>{var r=n(68630);t.exports=function(t){return r(t)?void 0:t}},99021:(t,e,n)=>{var r=n(85564),o=n(45357),i=n(30061);t.exports=function(t){return i(o(t,void 0,r),t+"")}},1499:(t,e,n)=>{var r=n(89162),o=n(3674);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},222:(t,e,n)=>{var r=n(71811),o=n(35694),i=n(1469),a=n(65776),s=n(41780),u=n(40327);t.exports=function(t,e,n){for(var l=-1,d=(e=r(e,t)).length,p=!1;++l<d;){var c=u(e[l]);if(!(p=null!=t&&n(t,c)))break;t=t[c]}return p||++l!=d?p:!!(d=null==t?0:t.length)&&s(d)&&a(c,d)&&(i(t)||o(t))}},37285:(t,e,n)=>{var r=n(62705),o=n(35694),i=n(1469),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},89162:(t,e,n)=>{var r=n(13218);t.exports=function(t){return t==t&&!r(t)}},42634:t=>{t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},40292:(t,e,n)=>{var r=n(97786),o=n(14259);t.exports=function(t,e){return e.length<2?t:r(t,o(e,0,-1))}},66678:(t,e,n)=>{var r=n(85990);t.exports=function(t){return r(t,4)}},85564:(t,e,n)=>{var r=n(21078);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},79095:(t,e,n)=>{var r=n(13),o=n(222);t.exports=function(t,e){return null!=t&&o(t,e,r)}},10928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},66604:(t,e,n)=>{var r=n(89465),o=n(47816),i=n(67206);t.exports=function(t,e){var n={};return e=i(e,3),o(t,(function(t,o,i){r(n,o,e(t,o,i))})),n}},50308:t=>{t.exports=function(){}},57557:(t,e,n)=>{var r=n(29932),o=n(85990),i=n(57406),a=n(71811),s=n(98363),u=n(60696),l=n(99021),d=n(46904),p=l((function(t,e){var n={};if(null==t)return n;var l=!1;e=r(e,(function(e){return e=a(e,t),l||(l=e.length>1),e})),s(t,d(t),n),l&&(n=o(n,7,u));for(var p=e.length;p--;)i(n,e[p]);return n}));t.exports=p},39601:(t,e,n)=>{var r=n(40371),o=n(79152),i=n(15403),a=n(40327);t.exports=function(t){return i(t)?r(a(t)):o(t)}},31921:(t,e,n)=>{var r=n(10611);t.exports=function(t,e,n,o){return o="function"==typeof o?o:void 0,null==t?t:r(t,e,n,o)}},28693:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Auto:()=>D,AutoForm:()=>A,BaseForm:()=>S,Bridge:()=>U,Quick:()=>F,QuickForm:()=>M,Validated:()=>O,ValidatedForm:()=>k,ValidatedQuickForm:()=>j,changedKeys:()=>y,connectField:()=>K,context:()=>_,createAutoField:()=>W,filterDOMProps:()=>H,joinName:()=>g,randomIds:()=>x,useField:()=>$,useForm:()=>R});var r=n(70655),o=n(66678),i=n.n(o),a=n(18446),s=n.n(a),u=n(57557),l=n.n(u),d=n(31921),p=n.n(d),c=n(27361),h=n.n(c),f=n(75418),m=n.n(f);function g(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],o=0;o!==t.length;++o){var i=t[o];(i||0===i)&&("string"==typeof i?-1!==i.indexOf(".")?n.push.apply(n,i.split(".")):n.push(i):Array.isArray(i)?t.splice.apply(t,(0,r.__spreadArray)([o--,1],i)):n.push(""+i))}return null===t[0]?n:n.join(".")}function v(t){return!(!t||t!==Object(t)||t instanceof Date)}function y(t,e,n){if(!v(e)||n&&typeof e!=typeof n)return s()(e,n)?[]:[t];var r=[t];if(v(n)){for(var o in e)o in n&&s()(e[o],n[o])||r.push(g(t,o));for(var o in n)o in e||r.push(g(t,o));1===r.length&&r.pop()}else for(var o in e)r.push(g(t,o));return r}var _=(0,f.createContext)(null);function b(t){var e=0;return function(){return t+"-"+("000"+(e++).toString(36)).slice(-4)}}var C=b("uniforms");function x(t){return void 0===t&&(t=C()),b(t)}var S=function(t){function e(e){var n=t.call(this,e)||this;n.state={changed:!1,changedMap:Object.create(null),resetCount:0,submitted:!1,submitting:!1},n.mounted=!1,n.randomId=x(n.props.id),n.onReset=n.reset=n.onReset.bind(n),n.onChange=n.change=n.onChange.bind(n),n.onSubmit=n.submit=n.onSubmit.bind(n);var r=n.getModel.bind(n);return n.getModel=function(t,e){return void 0===e&&(e=r(t)),void 0!==t&&n.props.modelTransform?n.props.modelTransform(t,e):e},n}return(0,r.__extends)(e,t),e.prototype.componentDidMount=function(){this.mounted=!0},e.prototype.componentDidUpdate=function(t,e,n){},e.prototype.componentWillUnmount=function(){this.mounted=!1,this.delayId&&clearTimeout(this.delayId)},e.prototype.getContext=function(){return{changed:this.state.changed,changedMap:this.state.changedMap,error:this.getContextError(),model:this.getContextModel(),name:this.getContextName(),onChange:this.getContextOnChange(),onSubmit:this.getContextOnSubmit(),randomId:this.randomId,schema:this.getContextSchema(),state:this.getContextState(),submitting:this.state.submitting,validating:!1,submitted:this.state.submitted}},e.prototype.getContextName=function(){return[]},e.prototype.getContextError=function(){return this.props.error},e.prototype.getContextModel=function(){return this.getModel("form")},e.prototype.getContextState=function(){return{disabled:!!this.props.disabled,label:!!this.props.label,placeholder:!!this.props.placeholder,readOnly:!!this.props.readOnly,showInlineError:!!this.props.showInlineError}},e.prototype.getContextSchema=function(){return this.props.schema},e.prototype.getContextOnChange=function(){return this.onChange},e.prototype.getContextOnSubmit=function(){return this.onSubmit},e.prototype.getModel=function(t,e){return void 0===e&&(e=this.props.model),e},e.prototype.getNativeFormProps=function(){var t=l()(this.props,["autosave","autosaveDelay","disabled","error","label","model","modelTransform","onChange","onSubmit","placeholder","readOnly","schema","showInlineError"]);return(0,r.__assign)((0,r.__assign)({},t),{onSubmit:this.onSubmit,key:"reset-"+this.state.resetCount})},e.prototype.onChange=function(t,e){var n=this;if(this.mounted){var r=y(t,e,h()(this.getModel(),t));0!==r.length&&this.setState((function(t){return t.changed&&r.every((function(e){return!!h()(t.changedMap,e)}))?null:{changed:!0,changedMap:r.reduce((function(t,e){return p()(t,e,{},i())}),i()(t.changedMap))}}))}this.props.onChange&&this.props.onChange(t,e),this.mounted&&this.props.autosave&&(this.delayId&&(this.delayId=clearTimeout(this.delayId)),this.delayId=setTimeout((function(){n.setState((function(){return null}),(function(){n.onSubmit()}))}),this.props.autosaveDelay))},e.prototype.__reset=function(t){return{changed:!1,changedMap:Object.create(null),resetCount:t.resetCount+1,submitted:!1,submitting:!1}},e.prototype.onReset=function(){this.setState(this.__reset)},e.prototype.onSubmit=function(t){var e=this;t&&(t.preventDefault(),t.stopPropagation()),this.setState((function(t){return t.submitted?null:{submitted:!0}}));var n=this.props.onSubmit(this.getModel("submit"));return n instanceof Promise?(this.setState({submitting:!0}),n.finally((function(){e.setState({submitting:!1})}))):Promise.resolve()},e.prototype.render=function(){return m().createElement(_.Provider,{value:this.getContext()},m().createElement("form",(0,r.__assign)({},this.getNativeFormProps())))},e.displayName="Form",e.defaultProps={autosave:!1,autosaveDelay:0,error:null,label:!0,model:Object.create(null),noValidate:!0,onSubmit:function(){}},e}(f.Component);function F(t){return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(n,e),n.prototype.getNativeFormProps=function(){var t=e.prototype.getNativeFormProps.call(this),n=t.autoField,o=void 0===n?this.getAutoField():n,i=t.errorsField,a=void 0===i?this.getErrorsField():i,s=t.submitField,u=void 0===s?this.getSubmitField():s,l=(0,r.__rest)(t,["autoField","errorsField","submitField"]);return l.children||(l.children=this.getContextSchema().getSubfields().map((function(t){return m().createElement(o,{key:t,name:t})})).concat([m().createElement(a,{key:"$ErrorsField"}),m().createElement(u,{key:"$SubmitField"})])),l},n.prototype.getAutoField=function(){return function(){return null}},n.prototype.getErrorsField=function(){return function(){return null}},n.prototype.getSubmitField=function(){return function(){return null}},n.Quick=F,n.displayName="Quick"+t.displayName,n}(t)}var M=F(S),E=n(50361),V=n.n(E),P=n(50308),N=n.n(P);function O(t){return function(e){function n(t){var n=e.call(this,t)||this;return n.state=(0,r.__assign)((0,r.__assign)({},n.state),{error:null,validate:!1,validating:!1,validator:n.getContextSchema().getValidator(t.validator)}),n.onValidate=n.validate=n.onValidate.bind(n),n.onValidateModel=n.validateModel=n.onValidateModel.bind(n),n}return(0,r.__extends)(n,e),n.prototype.getContextError=function(){var t;return null!==(t=e.prototype.getContextError.call(this))&&void 0!==t?t:this.state.error},n.prototype.getContext=function(){return(0,r.__assign)((0,r.__assign)({},e.prototype.getContext.call(this)),{validating:this.state.validating})},n.prototype.getNativeFormProps=function(){return l()(e.prototype.getNativeFormProps.call(this),["onValidate","validate","validator"])},n.prototype.componentDidUpdate=function(t,n,r){var o=this;e.prototype.componentDidUpdate.call(this,t,n,r);var i=this.props,a=i.model,u=i.schema,l=i.validate,d=i.validator;u!==t.schema||d!==t.validator?this.setState({validator:u.getValidator(d)},(function(){I(l,o.state.validate)&&o.onValidate()})):!s()(a,t.model)&&I(l,this.state.validate)&&this.onValidateModel(a)},n.prototype.onChange=function(t,n){I(this.props.validate,this.state.validate)&&this.onValidate(t,n),e.prototype.onChange.call(this,t,n)},n.prototype.__reset=function(t){return(0,r.__assign)((0,r.__assign)({},e.prototype.__reset.call(this,t)),{error:null,validate:!1,validating:!1})},n.prototype.onSubmit=function(t){var n=this;t&&(t.preventDefault(),t.stopPropagation()),this.setState({submitted:!0,validate:!0});var r=this.onValidate().then((function(t){return null!==t?Promise.reject(t):e.prototype.onSubmit.call(n).catch((function(t){throw n.setState({error:t}),t}))}));return r.catch(N()),r},n.prototype.onValidate=function(t,e){var n=this.getContextModel();return n&&t&&(n=p()(i()(n),t,V()(e),i())),this.onValidateModel(n)},n.prototype.onValidateModel=function(t){var e=this,n=this.getModel("validate",t),r=function(t){function e(e,n){return e instanceof Promise?(t(),e.then(n)):n(e)}return e}((function(){e.setState({validating:!0})}));return r(this.state.validator(n),(function(t){return void 0===t&&(t=null),r(e.props.onValidate(n,t),(function(t){var n;return void 0===t&&(t=null),t=e.props.error===t?null:t,e.setState((function(e){return e.error!==t||e.validating?{error:t,validating:!1}:null})),Promise.resolve(null!==(n=e.props.error)&&void 0!==n?n:t)}))}))},n.Validated=O,n.displayName="Validated"+t.displayName,n.defaultProps=(0,r.__assign)((0,r.__assign)({},t.defaultProps),{onValidate:function(t,e){return e},validate:"onChangeAfterSubmit"}),n}(t)}function I(t,e){return"onChange"===t||"onChangeAfterSubmit"===t&&e}var k=O(S),j=O(F(S));function D(t){return function(e){function n(t){var n=e.call(this,t)||this;return n.state=(0,r.__assign)((0,r.__assign)({},n.state),{model:t.model}),n}return(0,r.__extends)(n,e),n.prototype.componentDidUpdate=function(t,n,r){var o=this.props.model;s()(o,t.model)||this.setState({model:o}),e.prototype.componentDidUpdate.call(this,t,n,r)},n.prototype.getNativeFormProps=function(){return l()(e.prototype.getNativeFormProps.call(this),["onChangeModel"])},n.prototype.getModel=function(t){return this.state.model},n.prototype.onChange=function(t,n){var r=this;e.prototype.onChange.call(this,t,n),this.setState((function(e){return{model:p()(i()(e.model),t,n,i())}}),(function(){r.props.onChangeModel&&r.props.onChangeModel(r.state.model)}))},n.prototype.__reset=function(t){return(0,r.__assign)((0,r.__assign)({},e.prototype.__reset.call(this,t)),{model:this.props.model})},n.Auto=D,n.displayName="Auto"+t.displayName,n}(t)}var A=D(j),w=n(41143),T=n.n(w),U=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];T()(this.constructor!==t,"Bridge cannot be instantiated (args=%o).",{args:e})}return t.prototype.getError=function(t,e){return T()(!1,"%s have not implemented `getError` method (args=%o).",this.constructor.name,{name:t,error:e})},t.prototype.getErrorMessage=function(t,e){return T()(!1,"%s have not implemented `getErrorMessage` method (args=%o).",this.constructor.name,{name:t,error:e})},t.prototype.getErrorMessages=function(t){return T()(!1,"%s have not implemented `getErrorMessages` method (args=%o).",this.constructor.name,{error:t})},t.prototype.getField=function(t){return T()(!1,"%s have not implemented `getField` method (args=%o).",this.constructor.name,{name:t})},t.prototype.getInitialValue=function(t,e){return T()(!1,"%s have not implemented `getInitialValue` method (args=%o).",this.constructor.name,{name:t,props:e})},t.prototype.getProps=function(t,e){return T()(!1,"%s have not implemented `getProps` method (args=%o).",this.constructor.name,{name:t,props:e})},t.prototype.getSubfields=function(t){return T()(!1,"%s have not implemented `getSubfields` method (args=%o).",this.constructor.name,{name:t})},t.prototype.getType=function(t){return T()(!1,"%s have not implemented `getType` method (args=%o).",this.constructor.name,{name:t})},t.prototype.getValidator=function(t){return T()(!1,"%s have not implemented `getValidator` method (args=%o).",this.constructor.name,{options:t})},t}(),Q=n(66604),B=n.n(Q);function R(){var t=(0,f.useContext)(_);return T()(null!==t,"useForm must be used within a form."),t}function q(t,e,n,r){var o=!0===t||void 0===t,i=!0===e||void 0===e,a=i?r:e;return[""===t||!1===t||null===t||o&&(i||!n)?"":o?a:t,a]}function $(t,e,n){var o,i,a=R(),s=g((null==n?void 0:n.absoluteName)?"":a.name,t),u=B()(a.state,(function(t,n){var r=e[n];return null!=r?!!r:t})),l=!!h()(a.changedMap,s),d=a.schema.getError(s,a.error),p=a.schema.getErrorMessage(s,a.error),c=a.schema.getField(s),m=a.schema.getType(s),v=a.schema.getSubfields(s),y=a.schema.getProps(s,(0,r.__assign)((0,r.__assign)({},u),e)),_=q(e.label,y.label,u.label,""),b=_[0],C=_[1],x=q(e.placeholder,y.placeholder,u.placeholder,b||C)[0],S=(0,f.useMemo)((function(){return a.randomId()}),[]),F=(0,f.useCallback)((function(t,e){void 0===e&&(e=s),a.onChange(e,t)}),[a.onChange,s]),M=h()(a.model,s),E=null!==(o=e.value)&&void 0!==o?o:M;return void 0===E?(E=a.schema.getInitialValue(s,e),i=E):void 0!==e.value&&e.value!==M&&(i=e.value),!1!==(null==n?void 0:n.initialValue)&&(0,f.useEffect)((function(){var t;(null!==(t=e.required)&&void 0!==t?t:y.required)&&void 0!==i&&F(i)}),[]),[(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({id:S},u),{changed:l,error:d,errorMessage:p,field:c,fieldType:m,fields:v,onChange:F,value:E}),y),e),{label:b,name:s,placeholder:x}),a]}function K(t,e){function n(n){var o=$(n.name,n,e),i=o[0],a=o[1],s=""!==n.name,u=Object.keys(a.state).some((function(t){var e=n[t];return null!=e}));if(!u&&!s)return m().createElement(t,(0,r.__assign)({},n,i));var l=(0,r.__assign)({},a);return u&&(l.state=B()(l.state,(function(t,e){var r=n[e];return null!=r?!!r:t}))),s&&(l.name=l.name.concat(n.name)),m().createElement(_.Provider,{value:l},m().createElement(t,(0,r.__assign)({},n,i)))}return n.displayName=(t.displayName||t.name)+"Field",Object.assign(n,{Component:t,options:e})}function W(t){var e=(0,f.createContext)(t);return Object.assign((function(t){var n,r,o=$(t.name,t),i=o[0],a=o[1],s=(0,f.useContext)(e),u=null!==(n=i.component)&&void 0!==n?n:s(i,a);return T()(u,"AutoField received no component for: %s",i.name),"options"in u&&"leaf"===(null===(r=u.options)||void 0===r?void 0:r.kind)?(0,f.createElement)(u.Component,i):(0,f.createElement)(u,t)}),{componentDetectorContext:e,defaultComponentDetector:t})}var z=[],G=new Set,H=Object.assign((function(t){var e=(0,r.__assign)({},t);for(var n in t)G.has(n)&&delete e[n];return e}),{register:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach((function(t){G.has(t)||(z.push(t),G.add(t))})),z.sort()},registered:z});H.register("changed","error","errorMessage","field","fieldType","fields","initialCount","name","onChange","transform","value","disabled","label","placeholder","showInlineError","component","allowedValues")}}]);
//# sourceMappingURL=693.6e3d5760.js.map