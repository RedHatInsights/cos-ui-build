"use strict";(self.webpackChunkcos_ui=self.webpackChunkcos_ui||[]).push([[688],{3054:(e,t,n)=>{n.r(t);var o=n(75418),a=n.n(o),r=n(66235),i=n(47091),l=(n(49901),n(74651),n(18391),n(56594),n(94694),n(99521),n(15202),n(70655)),c=n(21012),s=n(46332);const u=({children:e})=>{const[t,n]=(0,o.useState)([]),[r,i]=(0,o.useState)([]);(0,o.useEffect)((()=>{const e=r.map((e=>e.key)),n=t.filter((t=>!e.includes(null==t?void 0:t.id))).map((e=>{const{id:t=""}=e,n=setTimeout((()=>l(t)),8e3);return{key:e.id,timeOut:n}}));return i([...r,...n]),()=>r.forEach((e=>(null==e?void 0:e.timeOut)&&clearTimeout(e.timeOut)))}),[t]);const l=e=>{n((t=>[...t.filter((t=>t.id!==e))])),i((t=>[...t.filter((t=>t.key===e))]))};return a().createElement(s.AlertContext.Provider,{value:{addAlert:e=>{const o=(new Date).getTime().toString();n([...t,Object.assign(Object.assign({},e),{id:o})])}}},a().createElement(d,{alerts:t,onCloseAlert:l}),e)},d=({alerts:e,onCloseAlert:t})=>a().createElement(c.AlertGroup,{isToast:!0},e.map((e=>{var{id:n,variant:o,title:r,description:i,dataTestId:u}=e,d=(0,l.__rest)(e,["id","variant","title","description","dataTestId"]);return a().createElement(c.Alert,Object.assign({key:n,isLiveRegion:!0,variant:s.AlertVariant[o],variantLabel:"",title:r,actionClose:a().createElement(c.AlertActionCloseButton,{title:r,onClose:()=>t(n)}),"data-testid":u},d),i)})));var m=n(31521),p=n(98068);const v=n.p+"f940137c.svg",g=({children:e})=>{const[t,n]=(0,o.useState)(!0),[r,i]=(0,o.useState)(!0),[l,s]=(0,o.useState)(!1),{t:u}=(0,m.useTranslation)(),d=a().createElement(c.PageHeaderTools,null,"email"),v=a().createElement(c.PageHeader,{logo:a().createElement(h,null),showNavToggle:!0,isNavOpen:t,headerTools:d,onNavToggle:r?()=>{s(!l)}:()=>{n(!t)},"aria-label":"global_navigation"}),g=a().createElement(c.Nav,{id:"nav-primary-simple",role:"navigation",theme:"dark","aria-label":"global"},a().createElement(c.NavList,{id:"nav-list-simple"},a().createElement(c.NavItem,{id:"connectors"},a().createElement(p.NavLink,{to:"/",activeClassName:"pf-m-current"},u("managedConnectors"))))),E=a().createElement(c.PageSidebar,{theme:"dark",nav:g,isNavOpen:r?l:t});return a().createElement(c.Page,{mainContainerId:"primary-app-container",role:"main",header:v,sidebar:E,onPageResize:e=>{i(e.mobileView)}},e)};function h(){const e=(0,p.useHistory)();return a().createElement("img",{src:v,onClick:function(){e.push("/")},alt:"PatternFly Logo"})}var E=n(91031),b=n(78800),f=n(73941),k=n(32385),y=n.n(k);let P;const _=()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return P||(yield z()),P})),z=()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){try{P=new(y())({realm:"redhat-external",url:"https://sso.redhat.com/auth/",clientId:"cloud-services",promiseType:"native"}),P&&(yield P.init({onLoad:"login-required",promiseType:"native"}))}catch(e){P=void 0,console.warn("Auth: Unable to initialize keycloak. Client side will not be configured to use authentication",e)}})),A=()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return yield null==P?void 0:P.updateToken(50),(null==P?void 0:P.token)?P.token:(console.error("No keycloak token available"),"foo")})),C=a().createContext({keycloak:void 0}),T=e=>{const t={kas:{getToken:A},getUsername:()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return yield null==P?void 0:P.updateToken(50),(null==P?void 0:P.tokenParsed)?P.tokenParsed:(console.error("No keycloak token available"),{})})).then((e=>e.username))};return a().createElement(s.AuthContext.Provider,{value:t},e.children)};let w;const B=()=>{const[e,t]=(0,o.useState)(!1),n=(0,o.useCallback)((()=>"/"),[]);(0,o.useEffect)((()=>{(0,l.__awaiter)(void 0,void 0,void 0,(function*(){w=yield _(),t(!0)}))}),[]);return a().createElement(C.Provider,{value:{keycloak:w,profile:null==w?void 0:w.profile}},a().createElement(T,null,a().createElement(s.BasenameContext.Provider,{value:{getBasename:n}},a().createElement(s.ConfigContext.Provider,{value:{cos:{apiBasePath:"https://cos-fleet-manager-cos.rh-fuse-153f1de160110098c1928a6c05e19444-0000.eu-de.containers.appdomain.cloud",configurators:{"debezium-mongodb-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"},"debezium-mysql-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"},"debezium-postgres-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"}}}}},a().createElement(m.I18nextProvider,{i18n:b.Z},a().createElement(u,null,a().createElement(a().Suspense,{fallback:a().createElement(E.g,null)},a().createElement(p.BrowserRouter,null,a().createElement(g,null,e?a().createElement(N,null):a().createElement(c.Spinner,null))))))))))},N=()=>{const e=(0,s.useAuth)(),t=(0,s.useConfig)();return a().createElement(f.e,{getToken:()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return(yield null==e?void 0:e.kas.getToken())||""})),connectorsApiBasePath:(null==t?void 0:t.cos.apiBasePath)||"",kafkaManagementApiBasePath:"https://api.openshift.com"})},S=()=>{const e=(0,o.useCallback)((()=>"/"),[]),t={kas:{getToken:()=>Promise.resolve("dummy")},getUsername:()=>Promise.resolve("username")};return a().createElement(s.AuthContext.Provider,{value:t},a().createElement(s.BasenameContext.Provider,{value:{getBasename:e}},a().createElement(s.ConfigContext.Provider,{value:{cos:{apiBasePath:"localhost",configurators:{"debezium-mongodb-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"},"debezium-mysql-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"},"debezium-postgres-1.9.0.Alpha1":{remoteEntry:"https://qaprodauth.cloud.redhat.com/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js",scope:"debezium_ui",module:"./config"}}}}},a().createElement(m.I18nextProvider,{i18n:b.Z},a().createElement(u,null,a().createElement(a().Suspense,{fallback:a().createElement(E.g,null)},a().createElement(p.BrowserRouter,null,a().createElement(g,null,a().createElement(x,null)))))))))},x=()=>{const e=(0,s.useAuth)(),t=(0,s.useConfig)();return a().createElement(f.e,{getToken:()=>(0,l.__awaiter)(void 0,void 0,void 0,(function*(){return(yield null==e?void 0:e.kas.getToken())||""})),connectorsApiBasePath:(null==t?void 0:t.cos.apiBasePath)||"",kafkaManagementApiBasePath:"https://api.openshift.com"})};"MISSING_ENV_VAR".DEMO_APP?((0,i.XY)({iframe:!1}),r.render(o.createElement(B,null),document.getElementById("root"))):r.render(o.createElement(S,null),document.getElementById("root"))}}]);
//# sourceMappingURL=688.2597d7dd.js.map