{"version":3,"sources":["webpack://cos-ui/./node_modules/@xstate/inspect/es/_virtual/_tslib.js","webpack://cos-ui/./node_modules/@xstate/inspect/es/utils.js","webpack://cos-ui/./node_modules/@xstate/inspect/es/browser.js","webpack://cos-ui/./node_modules/@xstate/inspect/es/inspectMachine.js","webpack://cos-ui/./node_modules/fast-safe-stringify/index.js","webpack://cos-ui/./node_modules/js-sha256/src/sha256.js","webpack://cos-ui/./node_modules/keycloak-js/dist/keycloak.js","webpack://cos-ui/./node_modules/keycloak-js/node_modules/base64-js/index.js","webpack://cos-ui/./node_modules/xstate/lib/utils.js"],"names":["Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","getLazy","value","stringify","JSON","e","serviceMap","Map","defaultInspectorOptions","url","iframe","document","querySelector","devTools","services","serviceListeners","Set","register","service","add","set","sessionId","forEach","listener","onStop","delete","unregister","onRegister","unsubscribe","globalThis","__xstate__","inspect","options","_a","withDefaults","URL","getFinalOptions","targetWindow","client","inspectMachine","sub","createMachine","initial","context","undefined","states","pendingConnection","connected","on","actions","ctx","send","_","event","scxmlEventObject","parse","get","origin","unload","type","disconnect","disconnected","entry","target","machine","state","initialState","createInspectMachine","inspectService","interpret","start","listeners","subscribe","next","messageHandler","data","contentWindow","postMessage","inspectEvent","window","addEventListener","id","parent","_event","originalSend","bind","payload","toSCXMLEvent","toEventObject","setAttribute","String","open","onError","onComplete","observer","toObserver","removeEventListener","console","warn","module","exports","default","stable","deterministicStringify","stableStringify","arr","replacerStack","obj","replacer","spacer","res","decirc","replaceGetterValues","part","pop","defineProperty","val","k","stack","propertyDescriptor","getOwnPropertyDescriptor","configurable","push","Array","isArray","keys","key","compareFunction","a","b","tmp","deterministicDecirc","toJSON","sort","v","splice","ERROR","WINDOW","root","JS_SHA256_NO_WINDOW","WEB_WORKER","self","NODE_JS","JS_SHA256_NO_NODE_JS","process","versions","node","g","COMMON_JS","JS_SHA256_NO_COMMON_JS","AMD","ARRAY_BUFFER","JS_SHA256_NO_ARRAY_BUFFER","ArrayBuffer","HEX_CHARS","split","EXTRA","SHIFT","K","OUTPUT_TYPES","blocks","toString","JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW","isView","buffer","constructor","createOutputMethod","outputType","is224","message","Sha256","update","createMethod","method","nodeWrap","create","crypto","eval","Buffer","algorithm","nodeMethod","createHash","digest","Error","Uint8Array","createHmacOutputMethod","HmacSha256","createHmacMethod","sharedMemory","h0","h1","h2","h3","h4","h5","h6","h7","block","bytes","hBytes","finalized","hashed","first","code","index","charCodeAt","array","oKeyPad","iKeyPad","inner","notString","lastByteIndex","hash","finalize","j","s0","s1","maj","t1","ab","da","cd","bc","c","d","f","h","hex","arrayBuffer","dataView","DataView","setUint32","innerHash","sha256","sha224","hmac","sha256_imported","base64js_imported","Keycloak","config","adapter","callbackStorage","kc","refreshQueue","loginIframe","enable","callbackList","interval","scripts","getElementsByTagName","src","indexOf","iframeVersion","substring","useNonce","logInfo","createLogger","info","logWarn","generateRandomData","len","msCrypto","getRandomValues","Math","floor","random","generateCodeVerifier","generateRandomString","alphabet","randomData","chars","fromCharCode","generatePkceChallenge","pkceMethod","codeVerifier","hashBytes","fromByteArray","replace","getRealmUrl","authServerUrl","charAt","encodeURIComponent","realm","getOrigin","location","protocol","hostname","port","processCallback","oauth","promise","error","prompt","timeLocal","Date","getTime","errorData","error_description","onAuthError","setError","setSuccess","flow","access_token","id_token","authSuccess","params","endpoints","token","req","XMLHttpRequest","setRequestHeader","clientId","redirectUri","pkceCodeVerifier","withCredentials","onreadystatechange","readyState","status","tokenResponse","responseText","scheduleCheckIframe","accessToken","refreshToken","idToken","fulfillPromise","setToken","tokenParsed","nonce","storedNonce","refreshTokenParsed","idTokenParsed","clearToken","onAuthSuccess","loadConfig","configUrl","createPromise","setupOidcEndoints","oidcConfiguration","authorize","authorization_endpoint","token_endpoint","logout","end_session_endpoint","checkSessionIframe","check_session_iframe","userinfo","userinfo_endpoint","fileLoaded","oidcProvider","oidcProviderConfigUrl","match","substr","xhr","responseURL","startsWith","tokenTimeoutHandle","clearTimeout","decodeToken","session_state","authenticated","subject","realmAccess","realm_access","resourceAccess","resource_access","timeSkew","iat","onTokenExpired","expiresIn","round","setTimeout","str","slice","decodeURIComponent","escape","atob","createUUID","hexDigits","join","parseCallback","parseCallbackUrl","oauthState","valid","supportedParams","newUrl","parsed","queryIndex","fragmentIndex","responseMode","parseCallbackParams","paramsString","oauthParams","result","internal","useNativePromise","createNativePromise","createLegacyPromise","resolve","reject","Promise","success","successCallback","errorCallback","callback","setupCheckLoginIframe","createElement","onload","authUrl","iframeOrigin","style","display","body","appendChild","messageCallback","source","callbacks","checkLoginIframe","unchanged","msg","loadAdapter","login","createLoginUrl","createLogoutUrl","createRegisterUrl","accountManagement","accountUrl","createAccountUrl","href","encodeHash","cordovaOpenWindowWrapper","loginUrl","cordova","InAppBrowser","shallowCloneCordovaOptions","userOptions","cordovaOptions","reduce","optionName","formatCordovaOptions","createCordovaOptions","hidden","ref","completed","closed","closeBrowser","close","reason","logoutUrl","registerUrl","universalLinks","plugins","browsertab","openUrl","init","initOptions","createCallbackStorage","Cordova","checkLoginIframeInterval","promiseType","onLoad","loginRequired","responseType","silentCheckSsoRedirectUri","enableLogging","initPromise","onReady","configPromise","doLogin","then","catch","checkSsoSilently","ifrm","removeChild","processInit","history","replaceState","updateToken","baseUrl","scope","callbackState","action","maxAge","loginHint","idpHint","locale","hasRealmRole","role","access","roles","hasResourceRole","resource","loadUserProfile","profile","loadUserInfo","userInfo","isTokenExpired","minValidity","ceil","isNaN","exec","onAuthRefreshSuccess","onAuthRefreshError","onAuthLogout","LocalStorage","localStorage","setItem","removeItem","cs","clearExpired","time","getItem","expires","err","CookieStorage","getCookie","setCookie","cookieExpiration","minutes","exp","setTime","name","ca","cookie","expirationDate","toUTCString","fn","factory","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","end","num","output","_tslib","constants","environment","toStatePath","stateId","delimiter","isStateLike","toStateValue","stateValue","pathToStateValue","statePath","marker","mapValues","collection","iteratee","collectionKeys","flatten","concat","__spreadArray","__read","toArrayStrict","toArray","updateHistoryStates","hist","subHist","subStateValue","isString","current","isFunction","IS_PRODUCTION","condition","args","symbolObservable","Symbol","observable","isMachine","uniqueId","currentId","__assign","evaluateGuard","guard","guards","guardMeta","cond","DEFAULT_GUARD_TYPE","predicate","condFn","getEventType","isActor","isBehavior","transition","isBuiltInEvent","eventType","test","isObservable","isPromiseLike","mapContext","mapper","e_5","_b","__values","_c","done","subMapper","e_5_1","return","mapFilterValues","e_1","item","e_1_1","matchesState","parentStateId","childStateId","STATE_DELIMITER","parentStateValue","childStateValue","every","nestedPath","props","accessorProp","object","e_3","props_2","props_2_1","prop","e_3_1","normalizeTarget","TARGETLESS_KEY","partition","items","e_6","truthy","falsy","items_1","items_1_1","e_6_1","path","e_2","props_1","props_1_1","e_2_1","reportUnhandledExceptionOnInvocation","originalError","currentError","originalStackTrace","stackTrace","toGuard","guardMap","toInvokeSource","nextHandler","errorHandler","completionHandler","noop","complete","scxmlEvent","$$type","eventObject","toStatePaths","map","subPath","toTransitionConfigArray","configLike","transitionLike","updateContext","assignActions","acc","assignAction","e_7","assignment","meta","partialUpdate","propAssignment","e_7_1","updateHistoryValue"],"mappings":"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","file":"73.309256a2.js","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nexport { __assign };\n","import { __assign } from './_virtual/_tslib.js';\nimport { createMachine, State } from 'xstate';\nimport safeStringify from 'fast-safe-stringify';\n\nfunction getLazy(value) {\r\n    return typeof value === 'function' ? value() : value;\r\n}\r\nfunction stringify(value) {\r\n    try {\r\n        return JSON.stringify(value);\r\n    }\r\n    catch (e) {\r\n        return safeStringify(value);\r\n    }\r\n}\r\nfunction isReceiverEvent(event) {\r\n    if (!event) {\r\n        return false;\r\n    }\r\n    try {\r\n        if (typeof event === 'object' &&\r\n            'type' in event &&\r\n            event.type.startsWith('service.')) {\r\n            return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n    return false;\r\n}\r\nfunction parseState(stateJSON) {\r\n    var state = State.create(JSON.parse(stateJSON));\r\n    delete state.history;\r\n    return state;\r\n}\r\nfunction parseReceiverEvent(event) {\r\n    switch (event.type) {\r\n        case 'service.event':\r\n            return __assign(__assign({}, event), { event: JSON.parse(event.event) });\r\n        case 'service.register':\r\n            return __assign(__assign({}, event), { machine: createMachine(JSON.parse(event.machine)), state: parseState(event.state) });\r\n        case 'service.state':\r\n            return __assign(__assign({}, event), { state: parseState(event.state) });\r\n        default:\r\n            return event;\r\n    }\r\n}\n\nexport { getLazy, isReceiverEvent, parseReceiverEvent, parseState, stringify };\n","import { __assign } from './_virtual/_tslib.js';\nimport { interpret } from 'xstate';\nimport { toSCXMLEvent, toEventObject, toObserver } from 'xstate/lib/utils';\nimport { getLazy, stringify, isReceiverEvent, parseReceiverEvent } from './utils.js';\nimport { createInspectMachine } from './inspectMachine.js';\n\nvar serviceMap = new Map();\r\nfunction createDevTools() {\r\n    var services = new Set();\r\n    var serviceListeners = new Set();\r\n    return {\r\n        services: services,\r\n        register: function (service) {\r\n            services.add(service);\r\n            serviceMap.set(service.sessionId, service);\r\n            serviceListeners.forEach(function (listener) { return listener(service); });\r\n            service.onStop(function () {\r\n                services.delete(service);\r\n                serviceMap.delete(service.sessionId);\r\n            });\r\n        },\r\n        unregister: function (service) {\r\n            services.delete(service);\r\n            serviceMap.delete(service.sessionId);\r\n        },\r\n        onRegister: function (listener) {\r\n            serviceListeners.add(listener);\r\n            services.forEach(function (service) { return listener(service); });\r\n            return {\r\n                unsubscribe: function () {\r\n                    serviceListeners.delete(listener);\r\n                }\r\n            };\r\n        }\r\n    };\r\n}\r\nvar defaultInspectorOptions = {\r\n    url: 'https://statecharts.io/inspect',\r\n    iframe: function () {\r\n        return document.querySelector('iframe[data-xstate]');\r\n    },\r\n    devTools: function () {\r\n        var devTools = createDevTools();\r\n        globalThis.__xstate__ = devTools;\r\n        return devTools;\r\n    }\r\n};\r\nvar getFinalOptions = function (options) {\r\n    var withDefaults = __assign(__assign({}, defaultInspectorOptions), options);\r\n    return __assign(__assign({}, withDefaults), { url: new URL(withDefaults.url), iframe: getLazy(withDefaults.iframe), devTools: getLazy(withDefaults.devTools) });\r\n};\r\nfunction inspect(options) {\r\n    var _a = getFinalOptions(options), iframe = _a.iframe, url = _a.url, devTools = _a.devTools;\r\n    if (iframe === null) {\r\n        console.warn('No suitable <iframe> found to embed the inspector. Please pass an <iframe> element to `inspect(iframe)` or create an <iframe data-xstate></iframe> element.');\r\n        return undefined;\r\n    }\r\n    var inspectMachine = createInspectMachine(devTools);\r\n    var inspectService = interpret(inspectMachine).start();\r\n    var listeners = new Set();\r\n    var sub = inspectService.subscribe(function (state) {\r\n        listeners.forEach(function (listener) { return listener.next(state); });\r\n    });\r\n    var targetWindow;\r\n    var client;\r\n    var messageHandler = function (event) {\r\n        if (typeof event.data === 'object' &&\r\n            event.data !== null &&\r\n            'type' in event.data) {\r\n            if (iframe && !targetWindow) {\r\n                targetWindow = iframe.contentWindow;\r\n            }\r\n            if (!client) {\r\n                client = {\r\n                    send: function (e) {\r\n                        targetWindow.postMessage(e, url.origin);\r\n                    }\r\n                };\r\n            }\r\n            var inspectEvent = __assign(__assign({}, event.data), { client: client });\r\n            inspectService.send(inspectEvent);\r\n        }\r\n    };\r\n    window.addEventListener('message', messageHandler);\r\n    window.addEventListener('unload', function () {\r\n        inspectService.send({ type: 'unload' });\r\n    });\r\n    devTools.onRegister(function (service) {\r\n        var _a;\r\n        inspectService.send({\r\n            type: 'service.register',\r\n            machine: stringify(service.machine),\r\n            state: stringify(service.state || service.initialState),\r\n            sessionId: service.sessionId,\r\n            id: service.id,\r\n            parent: (_a = service.parent) === null || _a === void 0 ? void 0 : _a.sessionId\r\n        });\r\n        inspectService.send({\r\n            type: 'service.event',\r\n            event: stringify((service.state || service.initialState)._event),\r\n            sessionId: service.sessionId\r\n        });\r\n        // monkey-patch service.send so that we know when an event was sent\r\n        // to a service *before* it is processed, since other events might occur\r\n        // while the sent one is being processed, which throws the order off\r\n        var originalSend = service.send.bind(service);\r\n        service.send = function inspectSend(event, payload) {\r\n            inspectService.send({\r\n                type: 'service.event',\r\n                event: stringify(toSCXMLEvent(toEventObject(event, payload))),\r\n                sessionId: service.sessionId\r\n            });\r\n            return originalSend(event, payload);\r\n        };\r\n        service.subscribe(function (state) {\r\n            // filter out synchronous notification from within `.start()` call when the `service.state` has not yet been assigned\r\n            if (state === undefined) {\r\n                return;\r\n            }\r\n            inspectService.send({\r\n                type: 'service.state',\r\n                state: stringify(state),\r\n                sessionId: service.sessionId\r\n            });\r\n        });\r\n        service.onStop(function () {\r\n            inspectService.send({\r\n                type: 'service.stop',\r\n                sessionId: service.sessionId\r\n            });\r\n        });\r\n    });\r\n    if (iframe) {\r\n        iframe.addEventListener('load', function () {\r\n            targetWindow = iframe.contentWindow;\r\n        });\r\n        iframe.setAttribute('src', String(url));\r\n    }\r\n    else {\r\n        targetWindow = window.open(String(url), 'xstateinspector');\r\n    }\r\n    return {\r\n        send: function (event) {\r\n            inspectService.send(event);\r\n        },\r\n        subscribe: function (next, onError, onComplete) {\r\n            var observer = toObserver(next, onError, onComplete);\r\n            listeners.add(observer);\r\n            observer.next(inspectService.state);\r\n            return {\r\n                unsubscribe: function () {\r\n                    listeners.delete(observer);\r\n                }\r\n            };\r\n        },\r\n        disconnect: function () {\r\n            inspectService.send('disconnect');\r\n            window.removeEventListener('message', messageHandler);\r\n            sub.unsubscribe();\r\n        }\r\n    };\r\n}\r\nfunction createWindowReceiver(options) {\r\n    var _a = options || {}, _b = _a.window, ownWindow = _b === void 0 ? window : _b, _c = _a.targetWindow, targetWindow = _c === void 0 ? window.self === window.top ? window.opener : window.parent : _c;\r\n    var observers = new Set();\r\n    var latestEvent;\r\n    var handler = function (event) {\r\n        var data = event.data;\r\n        if (isReceiverEvent(data)) {\r\n            latestEvent = parseReceiverEvent(data);\r\n            observers.forEach(function (listener) { return listener.next(latestEvent); });\r\n        }\r\n    };\r\n    ownWindow.addEventListener('message', handler);\r\n    var actorRef = {\r\n        id: 'xstate.windowReceiver',\r\n        send: function (event) {\r\n            if (!targetWindow) {\r\n                return;\r\n            }\r\n            targetWindow.postMessage(event, '*');\r\n        },\r\n        subscribe: function (next, onError, onComplete) {\r\n            var observer = toObserver(next, onError, onComplete);\r\n            observers.add(observer);\r\n            return {\r\n                unsubscribe: function () {\r\n                    observers.delete(observer);\r\n                }\r\n            };\r\n        },\r\n        stop: function () {\r\n            observers.clear();\r\n            ownWindow.removeEventListener('message', handler);\r\n        },\r\n        getSnapshot: function () {\r\n            return latestEvent;\r\n        }\r\n    };\r\n    actorRef.send({\r\n        type: 'xstate.inspecting'\r\n    });\r\n    return actorRef;\r\n}\r\nfunction createWebSocketReceiver(options) {\r\n    var _a = options.protocol, protocol = _a === void 0 ? 'ws' : _a;\r\n    var ws = new WebSocket(protocol + \"://\" + options.server);\r\n    var observers = new Set();\r\n    var latestEvent;\r\n    var actorRef = {\r\n        id: 'xstate.webSocketReceiver',\r\n        send: function (event) {\r\n            ws.send(JSON.stringify(event));\r\n        },\r\n        subscribe: function (next, onError, onComplete) {\r\n            var observer = toObserver(next, onError, onComplete);\r\n            observers.add(observer);\r\n            return {\r\n                unsubscribe: function () {\r\n                    observers.delete(observer);\r\n                }\r\n            };\r\n        },\r\n        getSnapshot: function () {\r\n            return latestEvent;\r\n        }\r\n    };\r\n    ws.onopen = function () {\r\n        actorRef.send({\r\n            type: 'xstate.inspecting'\r\n        });\r\n    };\r\n    ws.onmessage = function (event) {\r\n        if (typeof event.data !== 'string') {\r\n            return;\r\n        }\r\n        try {\r\n            var eventObject = JSON.parse(event.data);\r\n            if (isReceiverEvent(latestEvent)) {\r\n                latestEvent = parseReceiverEvent(eventObject);\r\n                observers.forEach(function (observer) {\r\n                    observer.next(latestEvent);\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n    ws.onerror = function (err) {\r\n        observers.forEach(function (observer) {\r\n            var _a;\r\n            (_a = observer.error) === null || _a === void 0 ? void 0 : _a.call(observer, err);\r\n        });\r\n    };\r\n    return actorRef;\r\n}\n\nexport { createDevTools, createWebSocketReceiver, createWindowReceiver, inspect, serviceMap };\n","import { createMachine, assign } from 'xstate';\nimport { stringify } from './utils.js';\n\nfunction createInspectMachine(devTools) {\r\n    if (devTools === void 0) { devTools = globalThis.__xstate__; }\r\n    var serviceMap = new Map();\r\n    // Listen for services being registered and index them\r\n    // by their sessionId for quicker lookup\r\n    var sub = devTools.onRegister(function (service) {\r\n        serviceMap.set(service.sessionId, service);\r\n    });\r\n    return createMachine({\r\n        initial: 'pendingConnection',\r\n        context: {\r\n            client: undefined\r\n        },\r\n        states: {\r\n            pendingConnection: {},\r\n            connected: {\r\n                on: {\r\n                    'service.state': {\r\n                        actions: function (ctx, e) { return ctx.client.send(e); }\r\n                    },\r\n                    'service.event': {\r\n                        actions: function (ctx, e) { return ctx.client.send(e); }\r\n                    },\r\n                    'service.register': {\r\n                        actions: function (ctx, e) { return ctx.client.send(e); }\r\n                    },\r\n                    'service.stop': {\r\n                        actions: function (ctx, e) { return ctx.client.send(e); }\r\n                    },\r\n                    'xstate.event': {\r\n                        actions: function (_, e) {\r\n                            var event = e.event;\r\n                            var scxmlEventObject = JSON.parse(event);\r\n                            var service = serviceMap.get(scxmlEventObject.origin);\r\n                            service === null || service === void 0 ? void 0 : service.send(scxmlEventObject);\r\n                        }\r\n                    },\r\n                    unload: {\r\n                        actions: function (ctx) {\r\n                            ctx.client.send({ type: 'xstate.disconnect' });\r\n                        }\r\n                    },\r\n                    disconnect: 'disconnected'\r\n                }\r\n            },\r\n            disconnected: {\r\n                entry: function () {\r\n                    sub.unsubscribe();\r\n                },\r\n                type: 'final'\r\n            }\r\n        },\r\n        on: {\r\n            'xstate.inspecting': {\r\n                target: '.connected',\r\n                actions: [\r\n                    assign({\r\n                        client: function (_, e) { return e.client; }\r\n                    }),\r\n                    function (ctx) {\r\n                        devTools.services.forEach(function (service) {\r\n                            var _a;\r\n                            (_a = ctx.client) === null || _a === void 0 ? void 0 : _a.send({\r\n                                type: 'service.register',\r\n                                machine: stringify(service.machine),\r\n                                state: stringify(service.state || service.initialState),\r\n                                sessionId: service.sessionId\r\n                            });\r\n                        });\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    });\r\n}\n\nexport { createInspectMachine };\n","module.exports = stringify\nstringify.default = stringify\nstringify.stable = deterministicStringify\nstringify.stableStringify = deterministicStringify\n\nvar arr = []\nvar replacerStack = []\n\n// Regular stringify\nfunction stringify (obj, replacer, spacer) {\n  decirc(obj, '', [], undefined)\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(obj, replacer, spacer)\n    } else {\n      res = JSON.stringify(obj, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\nfunction decirc (val, k, stack, parent) {\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n        if (propertyDescriptor.get !== undefined) {\n          if (propertyDescriptor.configurable) {\n            Object.defineProperty(parent, k, { value: '[Circular]' })\n            arr.push([parent, k, val, propertyDescriptor])\n          } else {\n            replacerStack.push([val, k])\n          }\n        } else {\n          parent[k] = '[Circular]'\n          arr.push([parent, k, val])\n        }\n        return\n      }\n    }\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, stack, val)\n      }\n    } else {\n      var keys = Object.keys(val)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        decirc(val[key], key, stack, val)\n      }\n    }\n    stack.pop()\n  }\n}\n\n// Stable-stringify\nfunction compareFunction (a, b) {\n  if (a < b) {\n    return -1\n  }\n  if (a > b) {\n    return 1\n  }\n  return 0\n}\n\nfunction deterministicStringify (obj, replacer, spacer) {\n  var tmp = deterministicDecirc(obj, '', [], undefined) || obj\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(tmp, replacer, spacer)\n    } else {\n      res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    // Ensure that we restore the object as it was.\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction deterministicDecirc (val, k, stack, parent) {\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n        if (propertyDescriptor.get !== undefined) {\n          if (propertyDescriptor.configurable) {\n            Object.defineProperty(parent, k, { value: '[Circular]' })\n            arr.push([parent, k, val, propertyDescriptor])\n          } else {\n            replacerStack.push([val, k])\n          }\n        } else {\n          parent[k] = '[Circular]'\n          arr.push([parent, k, val])\n        }\n        return\n      }\n    }\n    try {\n      if (typeof val.toJSON === 'function') {\n        return\n      }\n    } catch (_) {\n      return\n    }\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, stack, val)\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {}\n      var keys = Object.keys(val).sort(compareFunction)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        deterministicDecirc(val[key], key, stack, val)\n        tmp[key] = val[key]\n      }\n      if (parent !== undefined) {\n        arr.push([parent, k, val])\n        parent[k] = tmp\n      } else {\n        return tmp\n      }\n    }\n    stack.pop()\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as [Circular]\nfunction replaceGetterValues (replacer) {\n  replacer = replacer !== undefined ? replacer : function (k, v) { return v }\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i]\n        if (part[1] === key && part[0] === val) {\n          val = '[Circular]'\n          replacerStack.splice(i, 1)\n          break\n        }\n      }\n    }\n    return replacer.call(this, key, val)\n  }\n}\n","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","/*\n * Copyright 2016 Red Hat, Inc. and/or its affiliates\n * and other contributors as indicated by the @author tags.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root, factory) {\n    if ( typeof exports === 'object' ) {\n        if ( typeof module === 'object' ) {\n            module.exports = factory( require(\"js-sha256\"), require(\"base64-js\") );    \n        } else {\n            exports[\"keycloak\"] = factory( require(\"js-sha256\"), require(\"base64-js\") );    \n        }\n    } else {\n        /**\n        * [js-sha256]{@link https://github.com/emn178/js-sha256}\n        *\n        * @version 0.9.0\n        * @author Chen, Yi-Cyuan [emn178@gmail.com]\n        * @copyright Chen, Yi-Cyuan 2014-2017\n        * @license MIT\n        */\n        !function () { \"use strict\"; function t(t, i) { i ? (d[0] = d[16] = d[1] = d[2] = d[3] = d[4] = d[5] = d[6] = d[7] = d[8] = d[9] = d[10] = d[11] = d[12] = d[13] = d[14] = d[15] = 0, this.blocks = d) : this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t ? (this.h0 = 3238371032, this.h1 = 914150663, this.h2 = 812702999, this.h3 = 4144912697, this.h4 = 4290775857, this.h5 = 1750603025, this.h6 = 1694076839, this.h7 = 3204075428) : (this.h0 = 1779033703, this.h1 = 3144134277, this.h2 = 1013904242, this.h3 = 2773480762, this.h4 = 1359893119, this.h5 = 2600822924, this.h6 = 528734635, this.h7 = 1541459225), this.block = this.start = this.bytes = this.hBytes = 0, this.finalized = this.hashed = !1, this.first = !0, this.is224 = t } function i(i, r, s) { var e, n = typeof i; if (\"string\" === n) { var o, a = [], u = i.length, c = 0; for (e = 0; e < u; ++e)(o = i.charCodeAt(e)) < 128 ? a[c++] = o : o < 2048 ? (a[c++] = 192 | o >> 6, a[c++] = 128 | 63 & o) : o < 55296 || o >= 57344 ? (a[c++] = 224 | o >> 12, a[c++] = 128 | o >> 6 & 63, a[c++] = 128 | 63 & o) : (o = 65536 + ((1023 & o) << 10 | 1023 & i.charCodeAt(++e)), a[c++] = 240 | o >> 18, a[c++] = 128 | o >> 12 & 63, a[c++] = 128 | o >> 6 & 63, a[c++] = 128 | 63 & o); i = a } else { if (\"object\" !== n) throw new Error(h); if (null === i) throw new Error(h); if (f && i.constructor === ArrayBuffer) i = new Uint8Array(i); else if (!(Array.isArray(i) || f && ArrayBuffer.isView(i))) throw new Error(h) } i.length > 64 && (i = new t(r, !0).update(i).array()); var y = [], p = []; for (e = 0; e < 64; ++e) { var l = i[e] || 0; y[e] = 92 ^ l, p[e] = 54 ^ l } t.call(this, r, s), this.update(p), this.oKeyPad = y, this.inner = !0, this.sharedMemory = s } var h = \"input is invalid type\", r = \"object\" == typeof window, s = r ? window : {}; s.JS_SHA256_NO_WINDOW && (r = !1); var e = !r && \"object\" == typeof self, n = !s.JS_SHA256_NO_NODE_JS && \"object\" == typeof process && process.versions && process.versions.node; n ? s = global : e && (s = self); var o = !s.JS_SHA256_NO_COMMON_JS && \"object\" == typeof module && module.exports, a = \"function\" == typeof define && define.amd, f = !s.JS_SHA256_NO_ARRAY_BUFFER && \"undefined\" != typeof ArrayBuffer, u = \"0123456789abcdef\".split(\"\"), c = [-2147483648, 8388608, 32768, 128], y = [24, 16, 8, 0], p = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298], l = [\"hex\", \"array\", \"digest\", \"arrayBuffer\"], d = []; !s.JS_SHA256_NO_NODE_JS && Array.isArray || (Array.isArray = function (t) { return \"[object Array]\" === Object.prototype.toString.call(t) }), !f || !s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW && ArrayBuffer.isView || (ArrayBuffer.isView = function (t) { return \"object\" == typeof t && t.buffer && t.buffer.constructor === ArrayBuffer }); var A = function (i, h) { return function (r) { return new t(h, !0).update(r)[i]() } }, w = function (i) { var h = A(\"hex\", i); n && (h = b(h, i)), h.create = function () { return new t(i) }, h.update = function (t) { return h.create().update(t) }; for (var r = 0; r < l.length; ++r) { var s = l[r]; h[s] = A(s, i) } return h }, b = function (t, i) { var r = eval(\"require('crypto')\"), s = eval(\"require('buffer').Buffer\"), e = i ? \"sha224\" : \"sha256\", n = function (i) { if (\"string\" == typeof i) return r.createHash(e).update(i, \"utf8\").digest(\"hex\"); if (null === i || void 0 === i) throw new Error(h); return i.constructor === ArrayBuffer && (i = new Uint8Array(i)), Array.isArray(i) || ArrayBuffer.isView(i) || i.constructor === s ? r.createHash(e).update(new s(i)).digest(\"hex\") : t(i) }; return n }, v = function (t, h) { return function (r, s) { return new i(r, h, !0).update(s)[t]() } }, _ = function (t) { var h = v(\"hex\", t); h.create = function (h) { return new i(h, t) }, h.update = function (t, i) { return h.create(t).update(i) }; for (var r = 0; r < l.length; ++r) { var s = l[r]; h[s] = v(s, t) } return h }; t.prototype.update = function (t) { if (!this.finalized) { var i, r = typeof t; if (\"string\" !== r) { if (\"object\" !== r) throw new Error(h); if (null === t) throw new Error(h); if (f && t.constructor === ArrayBuffer) t = new Uint8Array(t); else if (!(Array.isArray(t) || f && ArrayBuffer.isView(t))) throw new Error(h); i = !0 } for (var s, e, n = 0, o = t.length, a = this.blocks; n < o;) { if (this.hashed && (this.hashed = !1, a[0] = this.block, a[16] = a[1] = a[2] = a[3] = a[4] = a[5] = a[6] = a[7] = a[8] = a[9] = a[10] = a[11] = a[12] = a[13] = a[14] = a[15] = 0), i) for (e = this.start; n < o && e < 64; ++n)a[e >> 2] |= t[n] << y[3 & e++]; else for (e = this.start; n < o && e < 64; ++n)(s = t.charCodeAt(n)) < 128 ? a[e >> 2] |= s << y[3 & e++] : s < 2048 ? (a[e >> 2] |= (192 | s >> 6) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]) : s < 55296 || s >= 57344 ? (a[e >> 2] |= (224 | s >> 12) << y[3 & e++], a[e >> 2] |= (128 | s >> 6 & 63) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]) : (s = 65536 + ((1023 & s) << 10 | 1023 & t.charCodeAt(++n)), a[e >> 2] |= (240 | s >> 18) << y[3 & e++], a[e >> 2] |= (128 | s >> 12 & 63) << y[3 & e++], a[e >> 2] |= (128 | s >> 6 & 63) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]); this.lastByteIndex = e, this.bytes += e - this.start, e >= 64 ? (this.block = a[16], this.start = e - 64, this.hash(), this.hashed = !0) : this.start = e } return this.bytes > 4294967295 && (this.hBytes += this.bytes / 4294967296 << 0, this.bytes = this.bytes % 4294967296), this } }, t.prototype.finalize = function () { if (!this.finalized) { this.finalized = !0; var t = this.blocks, i = this.lastByteIndex; t[16] = this.block, t[i >> 2] |= c[3 & i], this.block = t[16], i >= 56 && (this.hashed || this.hash(), t[0] = this.block, t[16] = t[1] = t[2] = t[3] = t[4] = t[5] = t[6] = t[7] = t[8] = t[9] = t[10] = t[11] = t[12] = t[13] = t[14] = t[15] = 0), t[14] = this.hBytes << 3 | this.bytes >>> 29, t[15] = this.bytes << 3, this.hash() } }, t.prototype.hash = function () { var t, i, h, r, s, e, n, o, a, f = this.h0, u = this.h1, c = this.h2, y = this.h3, l = this.h4, d = this.h5, A = this.h6, w = this.h7, b = this.blocks; for (t = 16; t < 64; ++t)i = ((s = b[t - 15]) >>> 7 | s << 25) ^ (s >>> 18 | s << 14) ^ s >>> 3, h = ((s = b[t - 2]) >>> 17 | s << 15) ^ (s >>> 19 | s << 13) ^ s >>> 10, b[t] = b[t - 16] + i + b[t - 7] + h << 0; for (a = u & c, t = 0; t < 64; t += 4)this.first ? (this.is224 ? (e = 300032, w = (s = b[0] - 1413257819) - 150054599 << 0, y = s + 24177077 << 0) : (e = 704751109, w = (s = b[0] - 210244248) - 1521486534 << 0, y = s + 143694565 << 0), this.first = !1) : (i = (f >>> 2 | f << 30) ^ (f >>> 13 | f << 19) ^ (f >>> 22 | f << 10), r = (e = f & u) ^ f & c ^ a, w = y + (s = w + (h = (l >>> 6 | l << 26) ^ (l >>> 11 | l << 21) ^ (l >>> 25 | l << 7)) + (l & d ^ ~l & A) + p[t] + b[t]) << 0, y = s + (i + r) << 0), i = (y >>> 2 | y << 30) ^ (y >>> 13 | y << 19) ^ (y >>> 22 | y << 10), r = (n = y & f) ^ y & u ^ e, A = c + (s = A + (h = (w >>> 6 | w << 26) ^ (w >>> 11 | w << 21) ^ (w >>> 25 | w << 7)) + (w & l ^ ~w & d) + p[t + 1] + b[t + 1]) << 0, i = ((c = s + (i + r) << 0) >>> 2 | c << 30) ^ (c >>> 13 | c << 19) ^ (c >>> 22 | c << 10), r = (o = c & y) ^ c & f ^ n, d = u + (s = d + (h = (A >>> 6 | A << 26) ^ (A >>> 11 | A << 21) ^ (A >>> 25 | A << 7)) + (A & w ^ ~A & l) + p[t + 2] + b[t + 2]) << 0, i = ((u = s + (i + r) << 0) >>> 2 | u << 30) ^ (u >>> 13 | u << 19) ^ (u >>> 22 | u << 10), r = (a = u & c) ^ u & y ^ o, l = f + (s = l + (h = (d >>> 6 | d << 26) ^ (d >>> 11 | d << 21) ^ (d >>> 25 | d << 7)) + (d & A ^ ~d & w) + p[t + 3] + b[t + 3]) << 0, f = s + (i + r) << 0; this.h0 = this.h0 + f << 0, this.h1 = this.h1 + u << 0, this.h2 = this.h2 + c << 0, this.h3 = this.h3 + y << 0, this.h4 = this.h4 + l << 0, this.h5 = this.h5 + d << 0, this.h6 = this.h6 + A << 0, this.h7 = this.h7 + w << 0 }, t.prototype.hex = function () { this.finalize(); var t = this.h0, i = this.h1, h = this.h2, r = this.h3, s = this.h4, e = this.h5, n = this.h6, o = this.h7, a = u[t >> 28 & 15] + u[t >> 24 & 15] + u[t >> 20 & 15] + u[t >> 16 & 15] + u[t >> 12 & 15] + u[t >> 8 & 15] + u[t >> 4 & 15] + u[15 & t] + u[i >> 28 & 15] + u[i >> 24 & 15] + u[i >> 20 & 15] + u[i >> 16 & 15] + u[i >> 12 & 15] + u[i >> 8 & 15] + u[i >> 4 & 15] + u[15 & i] + u[h >> 28 & 15] + u[h >> 24 & 15] + u[h >> 20 & 15] + u[h >> 16 & 15] + u[h >> 12 & 15] + u[h >> 8 & 15] + u[h >> 4 & 15] + u[15 & h] + u[r >> 28 & 15] + u[r >> 24 & 15] + u[r >> 20 & 15] + u[r >> 16 & 15] + u[r >> 12 & 15] + u[r >> 8 & 15] + u[r >> 4 & 15] + u[15 & r] + u[s >> 28 & 15] + u[s >> 24 & 15] + u[s >> 20 & 15] + u[s >> 16 & 15] + u[s >> 12 & 15] + u[s >> 8 & 15] + u[s >> 4 & 15] + u[15 & s] + u[e >> 28 & 15] + u[e >> 24 & 15] + u[e >> 20 & 15] + u[e >> 16 & 15] + u[e >> 12 & 15] + u[e >> 8 & 15] + u[e >> 4 & 15] + u[15 & e] + u[n >> 28 & 15] + u[n >> 24 & 15] + u[n >> 20 & 15] + u[n >> 16 & 15] + u[n >> 12 & 15] + u[n >> 8 & 15] + u[n >> 4 & 15] + u[15 & n]; return this.is224 || (a += u[o >> 28 & 15] + u[o >> 24 & 15] + u[o >> 20 & 15] + u[o >> 16 & 15] + u[o >> 12 & 15] + u[o >> 8 & 15] + u[o >> 4 & 15] + u[15 & o]), a }, t.prototype.toString = t.prototype.hex, t.prototype.digest = function () { this.finalize(); var t = this.h0, i = this.h1, h = this.h2, r = this.h3, s = this.h4, e = this.h5, n = this.h6, o = this.h7, a = [t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, i >> 24 & 255, i >> 16 & 255, i >> 8 & 255, 255 & i, h >> 24 & 255, h >> 16 & 255, h >> 8 & 255, 255 & h, r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, 255 & r, s >> 24 & 255, s >> 16 & 255, s >> 8 & 255, 255 & s, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, n >> 24 & 255, n >> 16 & 255, n >> 8 & 255, 255 & n]; return this.is224 || a.push(o >> 24 & 255, o >> 16 & 255, o >> 8 & 255, 255 & o), a }, t.prototype.array = t.prototype.digest, t.prototype.arrayBuffer = function () { this.finalize(); var t = new ArrayBuffer(this.is224 ? 28 : 32), i = new DataView(t); return i.setUint32(0, this.h0), i.setUint32(4, this.h1), i.setUint32(8, this.h2), i.setUint32(12, this.h3), i.setUint32(16, this.h4), i.setUint32(20, this.h5), i.setUint32(24, this.h6), this.is224 || i.setUint32(28, this.h7), t }, i.prototype = new t, i.prototype.finalize = function () { if (t.prototype.finalize.call(this), this.inner) { this.inner = !1; var i = this.array(); t.call(this, this.is224, this.sharedMemory), this.update(this.oKeyPad), this.update(i), t.prototype.finalize.call(this) } }; var B = w(); B.sha256 = B, B.sha224 = w(!0), B.sha256.hmac = _(), B.sha224.hmac = _(!0), o ? module.exports = B : (s.sha256 = B.sha256, s.sha224 = B.sha224, a && define(function () { return B })) }();\n\n        /**\n         * [base64-js]{@link https://github.com/beatgammit/base64-js}\n         *\n         * @version v1.3.0 \n         * @author Kirill, Fomichev\n         * @copyright Kirill, Fomichev 2014\n         * @license MIT\n         */\n        (function (r) { if (typeof exports === \"object\" && typeof module !== \"undefined\") { module.exports = r() } else if (typeof define === \"function\" && define.amd) { define([], r) } else { var e; if (typeof window !== \"undefined\") { e = window } else if (typeof global !== \"undefined\") { e = global } else if (typeof self !== \"undefined\") { e = self } else { e = this } e.base64js = r() } })(function () { var r, e, n; return function () { function r(e, n, t) { function o(f, i) { if (!n[f]) { if (!e[f]) { var u = \"function\" == typeof require && require; if (!i && u) return u(f, !0); if (a) return a(f, !0); var v = new Error(\"Cannot find module '\" + f + \"'\"); throw v.code = \"MODULE_NOT_FOUND\", v } var d = n[f] = { exports: {} }; e[f][0].call(d.exports, function (r) { var n = e[f][1][r]; return o(n || r) }, d, d.exports, r, e, n, t) } return n[f].exports } for (var a = \"function\" == typeof require && require, f = 0; f < t.length; f++)o(t[f]); return o } return r }()({ \"/\": [function (r, e, n) { \"use strict\"; n.byteLength = d; n.toByteArray = h; n.fromByteArray = p; var t = []; var o = []; var a = typeof Uint8Array !== \"undefined\" ? Uint8Array : Array; var f = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"; for (var i = 0, u = f.length; i < u; ++i) { t[i] = f[i]; o[f.charCodeAt(i)] = i } o[\"-\".charCodeAt(0)] = 62; o[\"_\".charCodeAt(0)] = 63; function v(r) { var e = r.length; if (e % 4 > 0) { throw new Error(\"Invalid string. Length must be a multiple of 4\") } var n = r.indexOf(\"=\"); if (n === -1) n = e; var t = n === e ? 0 : 4 - n % 4; return [n, t] } function d(r) { var e = v(r); var n = e[0]; var t = e[1]; return (n + t) * 3 / 4 - t } function c(r, e, n) { return (e + n) * 3 / 4 - n } function h(r) { var e; var n = v(r); var t = n[0]; var f = n[1]; var i = new a(c(r, t, f)); var u = 0; var d = f > 0 ? t - 4 : t; for (var h = 0; h < d; h += 4) { e = o[r.charCodeAt(h)] << 18 | o[r.charCodeAt(h + 1)] << 12 | o[r.charCodeAt(h + 2)] << 6 | o[r.charCodeAt(h + 3)]; i[u++] = e >> 16 & 255; i[u++] = e >> 8 & 255; i[u++] = e & 255 } if (f === 2) { e = o[r.charCodeAt(h)] << 2 | o[r.charCodeAt(h + 1)] >> 4; i[u++] = e & 255 } if (f === 1) { e = o[r.charCodeAt(h)] << 10 | o[r.charCodeAt(h + 1)] << 4 | o[r.charCodeAt(h + 2)] >> 2; i[u++] = e >> 8 & 255; i[u++] = e & 255 } return i } function s(r) { return t[r >> 18 & 63] + t[r >> 12 & 63] + t[r >> 6 & 63] + t[r & 63] } function l(r, e, n) { var t; var o = []; for (var a = e; a < n; a += 3) { t = (r[a] << 16 & 16711680) + (r[a + 1] << 8 & 65280) + (r[a + 2] & 255); o.push(s(t)) } return o.join(\"\") } function p(r) { var e; var n = r.length; var o = n % 3; var a = []; var f = 16383; for (var i = 0, u = n - o; i < u; i += f) { a.push(l(r, i, i + f > u ? u : i + f)) } if (o === 1) { e = r[n - 1]; a.push(t[e >> 2] + t[e << 4 & 63] + \"==\") } else if (o === 2) { e = (r[n - 2] << 8) + r[n - 1]; a.push(t[e >> 10] + t[e >> 4 & 63] + t[e << 2 & 63] + \"=\") } return a.join(\"\") } }, {}] }, {}, [])(\"/\") });\n\n        var Keycloak = factory( root[\"sha256\"], root[\"base64js\"] );\n        root[\"Keycloak\"] = Keycloak;\n\n        if ( typeof define === \"function\" && define.amd ) { \n            define( \"keycloak\", [], function () { return Keycloak; } );\n        }\n    }\n})(window, function (sha256_imported, base64js_imported) {\n    function Keycloak (config) {\n        if (!(this instanceof Keycloak)) {\n            return new Keycloak(config);\n        }\n\n        var kc = this;\n        var adapter;\n        var refreshQueue = [];\n        var callbackStorage;\n\n        var loginIframe = {\n            enable: true,\n            callbackList: [],\n            interval: 5\n        };\n\n        var scripts = document.getElementsByTagName('script');\n        for (var i = 0; i < scripts.length; i++) {\n            if ((scripts[i].src.indexOf('keycloak.js') !== -1 || scripts[i].src.indexOf('keycloak.min.js') !== -1) && scripts[i].src.indexOf('version=') !== -1) {\n                kc.iframeVersion = scripts[i].src.substring(scripts[i].src.indexOf('version=') + 8).split('&')[0];\n            }\n        }\n\n        var useNonce = true;\n        var logInfo = createLogger(console.info);\n        var logWarn = createLogger(console.warn);\n        \n        kc.init = function (initOptions) {\n            kc.authenticated = false;\n\n            callbackStorage = createCallbackStorage();\n            var adapters = ['default', 'cordova', 'cordova-native'];\n\n            if (initOptions && adapters.indexOf(initOptions.adapter) > -1) {\n                adapter = loadAdapter(initOptions.adapter);\n            } else if (initOptions && typeof initOptions.adapter === \"object\") {\n                adapter = initOptions.adapter;\n            } else {\n                if (window.Cordova || window.cordova) {\n                    adapter = loadAdapter('cordova');\n                } else {\n                    adapter = loadAdapter();\n                }\n            }\n\n            if (initOptions) {\n                if (typeof initOptions.useNonce !== 'undefined') {\n                    useNonce = initOptions.useNonce;\n                }\n\n                if (typeof initOptions.checkLoginIframe !== 'undefined') {\n                    loginIframe.enable = initOptions.checkLoginIframe;\n                }\n\n                if (initOptions.checkLoginIframeInterval) {\n                    loginIframe.interval = initOptions.checkLoginIframeInterval;\n                }\n\n                if (initOptions.promiseType === 'native') {\n                    kc.useNativePromise = true;\n                } else {\n                    console.warn('[KEYCLOAK] Using legacy promises is deprecated and will be removed in future versions. You can opt in to using native promises by setting `promiseType` to \\'native\\' when initializing Keycloak.');\n                    kc.useNativePromise = false;\n                }\n\n                if (initOptions.onLoad === 'login-required') {\n                    kc.loginRequired = true;\n                }\n\n                if (initOptions.responseMode) {\n                    if (initOptions.responseMode === 'query' || initOptions.responseMode === 'fragment') {\n                        kc.responseMode = initOptions.responseMode;\n                    } else {\n                        throw 'Invalid value for responseMode';\n                    }\n                }\n\n                if (initOptions.flow) {\n                    switch (initOptions.flow) {\n                        case 'standard':\n                            kc.responseType = 'code';\n                            break;\n                        case 'implicit':\n                            kc.responseType = 'id_token token';\n                            break;\n                        case 'hybrid':\n                            kc.responseType = 'code id_token token';\n                            break;\n                        default:\n                            throw 'Invalid value for flow';\n                    }\n                    kc.flow = initOptions.flow;\n                }\n\n                if (initOptions.timeSkew != null) {\n                    kc.timeSkew = initOptions.timeSkew;\n                }\n\n                if(initOptions.redirectUri) {\n                    kc.redirectUri = initOptions.redirectUri;\n                }\n\n                if (initOptions.silentCheckSsoRedirectUri) {\n                    kc.silentCheckSsoRedirectUri = initOptions.silentCheckSsoRedirectUri;\n                }\n\n                if (initOptions.pkceMethod) {\n                    if (initOptions.pkceMethod !== \"S256\") {\n                        throw 'Invalid value for pkceMethod';\n                    }\n                    kc.pkceMethod = initOptions.pkceMethod;\n                }\n\n                if (typeof initOptions.enableLogging === 'boolean') {\n                    kc.enableLogging = initOptions.enableLogging;\n                } else {\n                    kc.enableLogging = false;\n                }\n            }\n\n            if (!kc.responseMode) {\n                kc.responseMode = 'fragment';\n            }\n            if (!kc.responseType) {\n                kc.responseType = 'code';\n                kc.flow = 'standard';\n            }\n\n            var promise = createPromise(false);\n\n            var initPromise = createPromise(true);\n            initPromise.promise.success(function() {\n                kc.onReady && kc.onReady(kc.authenticated);\n                promise.setSuccess(kc.authenticated);\n            }).error(function(errorData) {\n                promise.setError(errorData);\n            });\n\n            var configPromise = loadConfig(config);\n\n            function onLoad() {\n                var doLogin = function(prompt) {\n                    if (!prompt) {\n                        options.prompt = 'none';\n                    }\n                    if (kc.useNativePromise) {\n                        kc.login(options).then(function () {\n                            initPromise.setSuccess();\n                        }).catch(function () {\n                            initPromise.setError();\n                        });\n                    } else {\n                        kc.login(options).success(function () {\n                            initPromise.setSuccess();\n                        }).error(function () {\n                            initPromise.setError();\n                        });\n                    }\n                }\n\n                var checkSsoSilently = function() {\n                    var ifrm = document.createElement(\"iframe\");\n                    var src = kc.createLoginUrl({prompt: 'none', redirectUri: kc.silentCheckSsoRedirectUri});\n                    ifrm.setAttribute(\"src\", src);\n                    ifrm.setAttribute(\"title\", \"keycloak-silent-check-sso\");\n                    ifrm.style.display = \"none\";\n                    document.body.appendChild(ifrm);\n\n                    var messageCallback = function(event) {\n                        if (event.origin !== window.location.origin || ifrm.contentWindow !== event.source) {\n                            return;\n                        }\n\n                        var oauth = parseCallback(event.data);\n                        processCallback(oauth, initPromise);\n\n                        document.body.removeChild(ifrm);\n                        window.removeEventListener(\"message\", messageCallback);\n                    };\n\n                    window.addEventListener(\"message\", messageCallback);\n                };\n\n                var options = {};\n                switch (initOptions.onLoad) {\n                    case 'check-sso':\n                        if (loginIframe.enable) {\n                            setupCheckLoginIframe().success(function() {\n                                checkLoginIframe().success(function (unchanged) {\n                                    if (!unchanged) {\n                                        kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                                    } else {\n                                        initPromise.setSuccess();\n                                    }\n                                }).error(function () {\n                                    initPromise.setError();\n                                });\n                            });\n                        } else {\n                            kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                        }\n                        break;\n                    case 'login-required':\n                        doLogin(true);\n                        break;\n                    default:\n                        throw 'Invalid value for onLoad';\n                }\n            }\n\n            function processInit() {\n                var callback = parseCallback(window.location.href);\n\n                if (callback) {\n                    window.history.replaceState(window.history.state, null, callback.newUrl);\n                }\n\n                if (callback && callback.valid) {\n                    return setupCheckLoginIframe().success(function() {\n                        processCallback(callback, initPromise);\n                    }).error(function (e) {\n                        initPromise.setError();\n                    });\n                } else if (initOptions) {\n                    if (initOptions.token && initOptions.refreshToken) {\n                        setToken(initOptions.token, initOptions.refreshToken, initOptions.idToken);\n\n                        if (loginIframe.enable) {\n                            setupCheckLoginIframe().success(function() {\n                                checkLoginIframe().success(function (unchanged) {\n                                    if (unchanged) {\n                                        kc.onAuthSuccess && kc.onAuthSuccess();\n                                        initPromise.setSuccess();\n                                        scheduleCheckIframe();\n                                    } else {\n                                        initPromise.setSuccess();\n                                    }\n                                }).error(function () {\n                                    initPromise.setError();\n                                });\n                            });\n                        } else {\n                            kc.updateToken(-1).success(function() {\n                                kc.onAuthSuccess && kc.onAuthSuccess();\n                                initPromise.setSuccess();\n                            }).error(function() {\n                                kc.onAuthError && kc.onAuthError();\n                                if (initOptions.onLoad) {\n                                    onLoad();\n                                } else {\n                                    initPromise.setError();\n                                }\n                            });\n                        }\n                    } else if (initOptions.onLoad) {\n                        onLoad();\n                    } else {\n                        initPromise.setSuccess();\n                    }\n                } else {\n                    initPromise.setSuccess();\n                }\n            }\n\n            configPromise.success(processInit);\n            configPromise.error(function() {\n                promise.setError();\n            });\n\n            return promise.promise;\n        }\n\n        kc.login = function (options) {\n            return adapter.login(options);\n        }\n\n        function generateRandomData(len) {\n            // use web crypto APIs if possible\n            var array = null;\n            var crypto = window.crypto || window.msCrypto;\n            if (crypto && crypto.getRandomValues && window.Uint8Array) {\n                array = new Uint8Array(len);\n                crypto.getRandomValues(array);\n                return array;\n            }\n\n            // fallback to Math random\n            array = new Array(len);\n            for (var j = 0; j < array.length; j++) {\n                array[j] = Math.floor(256 * Math.random());\n            }\n            return array;\n        }\n\n        function generateCodeVerifier(len) {\n            return generateRandomString(len, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789');\n        }\n\n        function generateRandomString(len, alphabet){\n            var randomData = generateRandomData(len);\n            var chars = new Array(len);\n            for (var i = 0; i < len; i++) {\n                chars[i] = alphabet.charCodeAt(randomData[i] % alphabet.length);\n            }\n            return String.fromCharCode.apply(null, chars);\n        }\n\n        function generatePkceChallenge(pkceMethod, codeVerifier) {\n            switch (pkceMethod) {\n                // The use of the \"plain\" method is considered insecure and therefore not supported.\n                case \"S256\":\n                    // hash codeVerifier, then encode as url-safe base64 without padding\n                    var hashBytes = new Uint8Array(sha256_imported.arrayBuffer(codeVerifier));\n                    var encodedHash = base64js_imported.fromByteArray(hashBytes)\n                        .replace(/\\+/g, '-')\n                        .replace(/\\//g, '_')\n                        .replace(/\\=/g, '');\n                    return encodedHash;\n                default:\n                    throw 'Invalid value for pkceMethod';\n            }\n        }\n\n        kc.createLoginUrl = function(options) {\n            var state = createUUID();\n            var nonce = createUUID();\n\n            var redirectUri = adapter.redirectUri(options);\n\n            var callbackState = {\n                state: state,\n                nonce: nonce,\n                redirectUri: encodeURIComponent(redirectUri)\n            };\n\n            if (options && options.prompt) {\n                callbackState.prompt = options.prompt;\n            }\n\n            var baseUrl;\n            if (options && options.action == 'register') {\n                baseUrl = kc.endpoints.register();\n            } else {\n                baseUrl = kc.endpoints.authorize();\n            }\n\n            var scope;\n            if (options && options.scope) {\n                if (options.scope.indexOf(\"openid\") != -1) {\n                    scope = options.scope;\n                } else {\n                    scope = \"openid \" + options.scope;\n                }\n            } else {\n                scope = \"openid\";\n            }\n\n            var url = baseUrl\n                + '?client_id=' + encodeURIComponent(kc.clientId)\n                + '&redirect_uri=' + encodeURIComponent(redirectUri)\n                + '&state=' + encodeURIComponent(state)\n                + '&response_mode=' + encodeURIComponent(kc.responseMode)\n                + '&response_type=' + encodeURIComponent(kc.responseType)\n                + '&scope=' + encodeURIComponent(scope);\n            if (useNonce) {\n                url = url + '&nonce=' + encodeURIComponent(nonce);\n            }\n\n            if (options && options.prompt) {\n                url += '&prompt=' + encodeURIComponent(options.prompt);\n            }\n\n            if (options && options.maxAge) {\n                url += '&max_age=' + encodeURIComponent(options.maxAge);\n            }\n\n            if (options && options.loginHint) {\n                url += '&login_hint=' + encodeURIComponent(options.loginHint);\n            }\n\n            if (options && options.idpHint) {\n                url += '&kc_idp_hint=' + encodeURIComponent(options.idpHint);\n            }\n\n            if (options && options.locale) {\n                url += '&ui_locales=' + encodeURIComponent(options.locale);\n            }\n\n            if (kc.pkceMethod) {\n                var codeVerifier = generateCodeVerifier(96);\n                callbackState.pkceCodeVerifier = codeVerifier;\n                var pkceChallenge = generatePkceChallenge(kc.pkceMethod, codeVerifier);\n                url += '&code_challenge=' + pkceChallenge;\n                url += '&code_challenge_method=' + kc.pkceMethod;\n            }\n\n            callbackStorage.add(callbackState);\n\n            return url;\n        }\n\n        kc.logout = function(options) {\n            return adapter.logout(options);\n        }\n\n        kc.createLogoutUrl = function(options) {\n            var url = kc.endpoints.logout()\n                + '?redirect_uri=' + encodeURIComponent(adapter.redirectUri(options, false));\n\n            return url;\n        }\n\n        kc.register = function (options) {\n            return adapter.register(options);\n        }\n\n        kc.createRegisterUrl = function(options) {\n            if (!options) {\n                options = {};\n            }\n            options.action = 'register';\n            return kc.createLoginUrl(options);\n        }\n\n        kc.createAccountUrl = function(options) {\n            var realm = getRealmUrl();\n            var url = undefined;\n            if (typeof realm !== 'undefined') {\n                url = realm\n                + '/account'\n                + '?referrer=' + encodeURIComponent(kc.clientId)\n                + '&referrer_uri=' + encodeURIComponent(adapter.redirectUri(options));\n            }\n            return url;\n        }\n\n        kc.accountManagement = function() {\n            return adapter.accountManagement();\n        }\n\n        kc.hasRealmRole = function (role) {\n            var access = kc.realmAccess;\n            return !!access && access.roles.indexOf(role) >= 0;\n        }\n\n        kc.hasResourceRole = function(role, resource) {\n            if (!kc.resourceAccess) {\n                return false;\n            }\n\n            var access = kc.resourceAccess[resource || kc.clientId];\n            return !!access && access.roles.indexOf(role) >= 0;\n        }\n\n        kc.loadUserProfile = function() {\n            var url = getRealmUrl() + '/account';\n            var req = new XMLHttpRequest();\n            req.open('GET', url, true);\n            req.setRequestHeader('Accept', 'application/json');\n            req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n            var promise = createPromise(false);\n\n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n                        kc.profile = JSON.parse(req.responseText);\n                        promise.setSuccess(kc.profile);\n                    } else {\n                        promise.setError();\n                    }\n                }\n            }\n\n            req.send();\n\n            return promise.promise;\n        }\n\n        kc.loadUserInfo = function() {\n            var url = kc.endpoints.userinfo();\n            var req = new XMLHttpRequest();\n            req.open('GET', url, true);\n            req.setRequestHeader('Accept', 'application/json');\n            req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n            var promise = createPromise(false);\n\n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n                        kc.userInfo = JSON.parse(req.responseText);\n                        promise.setSuccess(kc.userInfo);\n                    } else {\n                        promise.setError();\n                    }\n                }\n            }\n\n            req.send();\n\n            return promise.promise;\n        }\n\n        kc.isTokenExpired = function(minValidity) {\n            if (!kc.tokenParsed || (!kc.refreshToken && kc.flow != 'implicit' )) {\n                throw 'Not authenticated';\n            }\n\n            if (kc.timeSkew == null) {\n                logInfo('[KEYCLOAK] Unable to determine if token is expired as timeskew is not set');\n                return true;\n            }\n\n            var expiresIn = kc.tokenParsed['exp'] - Math.ceil(new Date().getTime() / 1000) + kc.timeSkew;\n            if (minValidity) {\n                if (isNaN(minValidity)) {\n                    throw 'Invalid minValidity';\n                }\n                expiresIn -= minValidity;\n            }\n            return expiresIn < 0;\n        }\n\n        kc.updateToken = function(minValidity) {\n            var promise = createPromise(false);\n\n            if (!kc.refreshToken) {\n                promise.setError();\n                return promise.promise;\n            }\n\n            minValidity = minValidity || 5;\n\n            var exec = function() {\n                var refreshToken = false;\n                if (minValidity == -1) {\n                    refreshToken = true;\n                    logInfo('[KEYCLOAK] Refreshing token: forced refresh');\n                } else if (!kc.tokenParsed || kc.isTokenExpired(minValidity)) {\n                    refreshToken = true;\n                    logInfo('[KEYCLOAK] Refreshing token: token expired');\n                }\n\n                if (!refreshToken) {\n                    promise.setSuccess(false);\n                } else {\n                    var params = 'grant_type=refresh_token&' + 'refresh_token=' + kc.refreshToken;\n                    var url = kc.endpoints.token();\n\n                    refreshQueue.push(promise);\n\n                    if (refreshQueue.length == 1) {\n                        var req = new XMLHttpRequest();\n                        req.open('POST', url, true);\n                        req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n                        req.withCredentials = true;\n\n                        params += '&client_id=' + encodeURIComponent(kc.clientId);\n\n                        var timeLocal = new Date().getTime();\n\n                        req.onreadystatechange = function () {\n                            if (req.readyState == 4) {\n                                if (req.status == 200) {\n                                    logInfo('[KEYCLOAK] Token refreshed');\n\n                                    timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n                                    var tokenResponse = JSON.parse(req.responseText);\n\n                                    setToken(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], timeLocal);\n\n                                    kc.onAuthRefreshSuccess && kc.onAuthRefreshSuccess();\n                                    for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                        p.setSuccess(true);\n                                    }\n                                } else {\n                                    logWarn('[KEYCLOAK] Failed to refresh token');\n\n                                    if (req.status == 400) {\n                                        kc.clearToken();\n                                    }\n\n                                    kc.onAuthRefreshError && kc.onAuthRefreshError();\n                                    for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                        p.setError(true);\n                                    }\n                                }\n                            }\n                        };\n\n                        req.send(params);\n                    }\n                }\n            }\n\n            if (loginIframe.enable) {\n                var iframePromise = checkLoginIframe();\n                iframePromise.success(function() {\n                    exec();\n                }).error(function() {\n                    promise.setError();\n                });\n            } else {\n                exec();\n            }\n\n            return promise.promise;\n        }\n\n        kc.clearToken = function() {\n            if (kc.token) {\n                setToken(null, null, null);\n                kc.onAuthLogout && kc.onAuthLogout();\n                if (kc.loginRequired) {\n                    kc.login();\n                }\n            }\n        }\n\n        function getRealmUrl() {\n            if (typeof kc.authServerUrl !== 'undefined') {\n                if (kc.authServerUrl.charAt(kc.authServerUrl.length - 1) == '/') {\n                    return kc.authServerUrl + 'realms/' + encodeURIComponent(kc.realm);\n                } else {\n                    return kc.authServerUrl + '/realms/' + encodeURIComponent(kc.realm);\n                }\n            } else {\n            \treturn undefined;\n            }\n        }\n\n        function getOrigin() {\n            if (!window.location.origin) {\n                return window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');\n            } else {\n                return window.location.origin;\n            }\n        }\n\n        function processCallback(oauth, promise) {\n            var code = oauth.code;\n            var error = oauth.error;\n            var prompt = oauth.prompt;\n\n            var timeLocal = new Date().getTime();\n\n            if (error) {\n                if (prompt != 'none') {\n                    var errorData = { error: error, error_description: oauth.error_description };\n                    kc.onAuthError && kc.onAuthError(errorData);\n                    promise && promise.setError(errorData);\n                } else {\n                    promise && promise.setSuccess();\n                }\n                return;\n            } else if ((kc.flow != 'standard') && (oauth.access_token || oauth.id_token)) {\n                authSuccess(oauth.access_token, null, oauth.id_token, true);\n            }\n\n            if ((kc.flow != 'implicit') && code) {\n                var params = 'code=' + code + '&grant_type=authorization_code';\n                var url = kc.endpoints.token();\n\n                var req = new XMLHttpRequest();\n                req.open('POST', url, true);\n                req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n                params += '&client_id=' + encodeURIComponent(kc.clientId);\n                params += '&redirect_uri=' + oauth.redirectUri;\n\n                if (oauth.pkceCodeVerifier) {\n                    params += '&code_verifier=' + oauth.pkceCodeVerifier;\n                }\n\n                req.withCredentials = true;\n\n                req.onreadystatechange = function() {\n                    if (req.readyState == 4) {\n                        if (req.status == 200) {\n\n                            var tokenResponse = JSON.parse(req.responseText);\n                            authSuccess(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], kc.flow === 'standard');\n                            scheduleCheckIframe();\n                        } else {\n                            kc.onAuthError && kc.onAuthError();\n                            promise && promise.setError();\n                        }\n                    }\n                };\n\n                req.send(params);\n            }\n\n            function authSuccess(accessToken, refreshToken, idToken, fulfillPromise) {\n                timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n                setToken(accessToken, refreshToken, idToken, timeLocal);\n\n                if (useNonce && ((kc.tokenParsed && kc.tokenParsed.nonce != oauth.storedNonce) ||\n                    (kc.refreshTokenParsed && kc.refreshTokenParsed.nonce != oauth.storedNonce) ||\n                    (kc.idTokenParsed && kc.idTokenParsed.nonce != oauth.storedNonce))) {\n\n                    logInfo('[KEYCLOAK] Invalid nonce, clearing token');\n                    kc.clearToken();\n                    promise && promise.setError();\n                } else {\n                    if (fulfillPromise) {\n                        kc.onAuthSuccess && kc.onAuthSuccess();\n                        promise && promise.setSuccess();\n                    }\n                }\n            }\n\n        }\n\n        function loadConfig(url) {\n            var promise = createPromise(true);\n            var configUrl;\n\n            if (!config) {\n                configUrl = 'keycloak.json';\n            } else if (typeof config === 'string') {\n                configUrl = config;\n            }\n\n            function setupOidcEndoints(oidcConfiguration) {\n                if (! oidcConfiguration) {\n                    kc.endpoints = {\n                        authorize: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/auth';\n                        },\n                        token: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/token';\n                        },\n                        logout: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/logout';\n                        },\n                        checkSessionIframe: function() {\n                            var src = getRealmUrl() + '/protocol/openid-connect/login-status-iframe.html';\n                            if (kc.iframeVersion) {\n                              src = src + '?version=' + kc.iframeVersion;\n                            }\n                            return src;\n                        },\n                        register: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/registrations';\n                        },\n                        userinfo: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/userinfo';\n                        }\n                    };\n                } else {\n                    kc.endpoints = {\n                        authorize: function() {\n                            return oidcConfiguration.authorization_endpoint;\n                        },\n                        token: function() {\n                            return oidcConfiguration.token_endpoint;\n                        },\n                        logout: function() {\n                            if (!oidcConfiguration.end_session_endpoint) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.end_session_endpoint;\n                        },\n                        checkSessionIframe: function() {\n                            if (!oidcConfiguration.check_session_iframe) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.check_session_iframe;\n                        },\n                        register: function() {\n                            throw 'Redirection to \"Register user\" page not supported in standard OIDC mode';\n                        },\n                        userinfo: function() {\n                            if (!oidcConfiguration.userinfo_endpoint) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.userinfo_endpoint;\n                        }\n                    }\n                }\n            }\n\n            if (configUrl) {\n                var req = new XMLHttpRequest();\n                req.open('GET', configUrl, true);\n                req.setRequestHeader('Accept', 'application/json');\n\n                req.onreadystatechange = function () {\n                    if (req.readyState == 4) {\n                        if (req.status == 200 || fileLoaded(req)) {\n                            var config = JSON.parse(req.responseText);\n\n                            kc.authServerUrl = config['auth-server-url'];\n                            kc.realm = config['realm'];\n                            kc.clientId = config['resource'];\n                            setupOidcEndoints(null);\n                            promise.setSuccess();\n                        } else {\n                            promise.setError();\n                        }\n                    }\n                };\n\n                req.send();\n            } else {\n                if (!config.clientId) {\n                    throw 'clientId missing';\n                }\n\n                kc.clientId = config.clientId;\n\n                var oidcProvider = config['oidcProvider'];\n                if (!oidcProvider) {\n                    if (!config['url']) {\n                        var scripts = document.getElementsByTagName('script');\n                        for (var i = 0; i < scripts.length; i++) {\n                            if (scripts[i].src.match(/.*keycloak\\.js/)) {\n                                config.url = scripts[i].src.substr(0, scripts[i].src.indexOf('/js/keycloak.js'));\n                                break;\n                            }\n                        }\n                    }\n                    if (!config.realm) {\n                        throw 'realm missing';\n                    }\n\n                    kc.authServerUrl = config.url;\n                    kc.realm = config.realm;\n                    setupOidcEndoints(null);\n                    promise.setSuccess();\n                } else {\n                    if (typeof oidcProvider === 'string') {\n                        var oidcProviderConfigUrl;\n                        if (oidcProvider.charAt(oidcProvider.length - 1) == '/') {\n                            oidcProviderConfigUrl = oidcProvider + '.well-known/openid-configuration';\n                        } else {\n                            oidcProviderConfigUrl = oidcProvider + '/.well-known/openid-configuration';\n                        }\n                        var req = new XMLHttpRequest();\n                        req.open('GET', oidcProviderConfigUrl, true);\n                        req.setRequestHeader('Accept', 'application/json');\n\n                        req.onreadystatechange = function () {\n                            if (req.readyState == 4) {\n                                if (req.status == 200 || fileLoaded(req)) {\n                                    var oidcProviderConfig = JSON.parse(req.responseText);\n                                    setupOidcEndoints(oidcProviderConfig);\n                                    promise.setSuccess();\n                                } else {\n                                    promise.setError();\n                                }\n                            }\n                        };\n\n                        req.send();\n                    } else {\n                        setupOidcEndoints(oidcProvider);\n                        promise.setSuccess();\n                    }\n                }\n            }\n\n            return promise.promise;\n        }\n\n        function fileLoaded(xhr) {\n            return xhr.status == 0 && xhr.responseText && xhr.responseURL.startsWith('file:');\n        }\n\n        function setToken(token, refreshToken, idToken, timeLocal) {\n            if (kc.tokenTimeoutHandle) {\n                clearTimeout(kc.tokenTimeoutHandle);\n                kc.tokenTimeoutHandle = null;\n            }\n\n            if (refreshToken) {\n                kc.refreshToken = refreshToken;\n                kc.refreshTokenParsed = decodeToken(refreshToken);\n            } else {\n                delete kc.refreshToken;\n                delete kc.refreshTokenParsed;\n            }\n\n            if (idToken) {\n                kc.idToken = idToken;\n                kc.idTokenParsed = decodeToken(idToken);\n            } else {\n                delete kc.idToken;\n                delete kc.idTokenParsed;\n            }\n\n            if (token) {\n                kc.token = token;\n                kc.tokenParsed = decodeToken(token);\n                kc.sessionId = kc.tokenParsed.session_state;\n                kc.authenticated = true;\n                kc.subject = kc.tokenParsed.sub;\n                kc.realmAccess = kc.tokenParsed.realm_access;\n                kc.resourceAccess = kc.tokenParsed.resource_access;\n\n                if (timeLocal) {\n                    kc.timeSkew = Math.floor(timeLocal / 1000) - kc.tokenParsed.iat;\n                }\n\n                if (kc.timeSkew != null) {\n                    logInfo('[KEYCLOAK] Estimated time difference between browser and server is ' + kc.timeSkew + ' seconds');\n\n                    if (kc.onTokenExpired) {\n                        var expiresIn = (kc.tokenParsed['exp'] - (new Date().getTime() / 1000) + kc.timeSkew) * 1000;\n                        logInfo('[KEYCLOAK] Token expires in ' + Math.round(expiresIn / 1000) + ' s');\n                        if (expiresIn <= 0) {\n                            kc.onTokenExpired();\n                        } else {\n                            kc.tokenTimeoutHandle = setTimeout(kc.onTokenExpired, expiresIn);\n                        }\n                    }\n                }\n            } else {\n                delete kc.token;\n                delete kc.tokenParsed;\n                delete kc.subject;\n                delete kc.realmAccess;\n                delete kc.resourceAccess;\n\n                kc.authenticated = false;\n            }\n        }\n\n        function decodeToken(str) {\n            str = str.split('.')[1];\n\n            str = str.replace('/-/g', '+');\n            str = str.replace('/_/g', '/');\n            switch (str.length % 4)\n            {\n                case 0:\n                    break;\n                case 2:\n                    str += '==';\n                    break;\n                case 3:\n                    str += '=';\n                    break;\n                default:\n                    throw 'Invalid token';\n            }\n\n            str = (str + '===').slice(0, str.length + (str.length % 4));\n            str = str.replace(/-/g, '+').replace(/_/g, '/');\n\n            str = decodeURIComponent(escape(atob(str)));\n\n            str = JSON.parse(str);\n            return str;\n        }\n\n        function createUUID() {\n            var hexDigits = '0123456789abcdef';\n            var s = generateRandomString(36, hexDigits).split(\"\");\n            s[14] = '4';\n            s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\n            s[8] = s[13] = s[18] = s[23] = '-';\n            var uuid = s.join('');\n            return uuid;\n        }\n\n        function parseCallback(url) {\n            var oauth = parseCallbackUrl(url);\n            if (!oauth) {\n                return;\n            }\n\n            var oauthState = callbackStorage.get(oauth.state);\n\n            if (oauthState) {\n                oauth.valid = true;\n                oauth.redirectUri = oauthState.redirectUri;\n                oauth.storedNonce = oauthState.nonce;\n                oauth.prompt = oauthState.prompt;\n                oauth.pkceCodeVerifier = oauthState.pkceCodeVerifier;\n            }\n\n            return oauth;\n        }\n\n        function parseCallbackUrl(url) {\n            var supportedParams;\n            switch (kc.flow) {\n                case 'standard':\n                    supportedParams = ['code', 'state', 'session_state'];\n                    break;\n                case 'implicit':\n                    supportedParams = ['access_token', 'token_type', 'id_token', 'state', 'session_state', 'expires_in'];\n                    break;\n                case 'hybrid':\n                    supportedParams = ['access_token', 'id_token', 'code', 'state', 'session_state'];\n                    break;\n            }\n\n            supportedParams.push('error');\n            supportedParams.push('error_description');\n            supportedParams.push('error_uri');\n\n            var queryIndex = url.indexOf('?');\n            var fragmentIndex = url.indexOf('#');\n\n            var newUrl;\n            var parsed;\n\n            if (kc.responseMode === 'query' && queryIndex !== -1) {\n                newUrl = url.substring(0, queryIndex);\n                parsed = parseCallbackParams(url.substring(queryIndex + 1, fragmentIndex !== -1 ? fragmentIndex : url.length), supportedParams);\n                if (parsed.paramsString !== '') {\n                    newUrl += '?' + parsed.paramsString;\n                }\n                if (fragmentIndex !== -1) {\n                    newUrl += url.substring(fragmentIndex);\n                }\n            } else if (kc.responseMode === 'fragment' && fragmentIndex !== -1) {\n                newUrl = url.substring(0, fragmentIndex);\n                parsed = parseCallbackParams(url.substring(fragmentIndex + 1), supportedParams);\n                if (parsed.paramsString !== '') {\n                    newUrl += '#' + parsed.paramsString;\n                }\n            }\n\n            if (parsed && parsed.oauthParams) {\n                if (kc.flow === 'standard' || kc.flow === 'hybrid') {\n                    if ((parsed.oauthParams.code || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                        parsed.oauthParams.newUrl = newUrl;\n                        return parsed.oauthParams;\n                    }\n                } else if (kc.flow === 'implicit') {\n                    if ((parsed.oauthParams.access_token || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                        parsed.oauthParams.newUrl = newUrl;\n                        return parsed.oauthParams;\n                    }\n                }\n            }\n        }\n\n        function parseCallbackParams(paramsString, supportedParams) {\n            var p = paramsString.split('&');\n            var result = {\n                paramsString: '',\n                oauthParams: {}\n            }\n            for (var i = 0; i < p.length; i++) {\n                var t = p[i].split('=');\n                if (supportedParams.indexOf(t[0]) !== -1) {\n                    result.oauthParams[t[0]] = t[1];\n                } else {\n                    if (result.paramsString !== '') {\n                        result.paramsString += '&';\n                    }\n                    result.paramsString += p[i];\n                }\n            }\n            return result;\n        }\n\n        function createPromise(internal) {\n            if (!internal && kc.useNativePromise) {\n                return createNativePromise();\n            } else {\n                return createLegacyPromise();\n            }\n        }\n\n        function createNativePromise() {\n            // Need to create a native Promise which also preserves the\n            // interface of the custom promise type previously used by the API\n            var p = {\n                setSuccess: function(result) {\n                    p.resolve(result);\n                },\n\n                setError: function(result) {\n                    p.reject(result);\n                }\n            };\n            p.promise = new Promise(function(resolve, reject) {\n                p.resolve = resolve;\n                p.reject = reject;\n            });\n            return p;\n        }\n\n        function createLegacyPromise() {\n            var p = {\n                setSuccess: function(result) {\n                    p.success = true;\n                    p.result = result;\n                    if (p.successCallback) {\n                        p.successCallback(result);\n                    }\n                },\n\n                setError: function(result) {\n                    p.error = true;\n                    p.result = result;\n                    if (p.errorCallback) {\n                        p.errorCallback(result);\n                    }\n                },\n\n                promise: {\n                    success: function(callback) {\n                        if (p.success) {\n                            callback(p.result);\n                        } else if (!p.error) {\n                            p.successCallback = callback;\n                        }\n                        return p.promise;\n                    },\n                    error: function(callback) {\n                        if (p.error) {\n                            callback(p.result);\n                        } else if (!p.success) {\n                            p.errorCallback = callback;\n                        }\n                        return p.promise;\n                    }\n                }\n            }\n            return p;\n        }\n\n        function setupCheckLoginIframe() {\n            var promise = createPromise(true);\n\n            if (!loginIframe.enable) {\n                promise.setSuccess();\n                return promise.promise;\n            }\n\n            if (loginIframe.iframe) {\n                promise.setSuccess();\n                return promise.promise;\n            }\n\n            var iframe = document.createElement('iframe');\n            loginIframe.iframe = iframe;\n\n            iframe.onload = function() {\n                var authUrl = kc.endpoints.authorize();\n                if (authUrl.charAt(0) === '/') {\n                    loginIframe.iframeOrigin = getOrigin();\n                } else {\n                    loginIframe.iframeOrigin = authUrl.substring(0, authUrl.indexOf('/', 8));\n                }\n                promise.setSuccess();\n            }\n\n            var src = kc.endpoints.checkSessionIframe();\n            iframe.setAttribute('src', src );\n            iframe.setAttribute('title', 'keycloak-session-iframe' );\n            iframe.style.display = 'none';\n            document.body.appendChild(iframe);\n\n            var messageCallback = function(event) {\n                if ((event.origin !== loginIframe.iframeOrigin) || (loginIframe.iframe.contentWindow !== event.source)) {\n                    return;\n                }\n\n                if (!(event.data == 'unchanged' || event.data == 'changed' || event.data == 'error')) {\n                    return;\n                }\n\n\n                if (event.data != 'unchanged') {\n                    kc.clearToken();\n                }\n\n                var callbacks = loginIframe.callbackList.splice(0, loginIframe.callbackList.length);\n\n                for (var i = callbacks.length - 1; i >= 0; --i) {\n                    var promise = callbacks[i];\n                    if (event.data == 'error') {\n                        promise.setError();\n                    } else {\n                        promise.setSuccess(event.data == 'unchanged');\n                    }\n                }\n            };\n\n            window.addEventListener('message', messageCallback, false);\n\n            return promise.promise;\n        }\n\n        function scheduleCheckIframe() {\n            if (loginIframe.enable) {\n                if (kc.token) {\n                    setTimeout(function() {\n                        checkLoginIframe().success(function(unchanged) {\n                            if (unchanged) {\n                                scheduleCheckIframe();\n                            }\n                        });\n                    }, loginIframe.interval * 1000);\n                }\n            }\n        }\n\n        function checkLoginIframe() {\n            var promise = createPromise(true);\n\n            if (loginIframe.iframe && loginIframe.iframeOrigin ) {\n                var msg = kc.clientId + ' ' + (kc.sessionId ? kc.sessionId : '');\n                loginIframe.callbackList.push(promise);\n                var origin = loginIframe.iframeOrigin;\n                if (loginIframe.callbackList.length == 1) {\n                    loginIframe.iframe.contentWindow.postMessage(msg, origin);\n                }\n            } else {\n                promise.setSuccess();\n            }\n\n            return promise.promise;\n        }\n\n        function loadAdapter(type) {\n            if (!type || type == 'default') {\n                return {\n                    login: function(options) {\n                        window.location.replace(kc.createLoginUrl(options));\n                        return createPromise(false).promise;\n                    },\n\n                    logout: function(options) {\n                        window.location.replace(kc.createLogoutUrl(options));\n                        return createPromise(false).promise;\n                    },\n\n                    register: function(options) {\n                        window.location.replace(kc.createRegisterUrl(options));\n                        return createPromise(false).promise;\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            window.location.href = accountUrl;\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return createPromise(false).promise;\n                    },\n\n                    redirectUri: function(options, encodeHash) {\n                        if (arguments.length == 1) {\n                            encodeHash = true;\n                        }\n\n                        if (options && options.redirectUri) {\n                            return options.redirectUri;\n                        } else if (kc.redirectUri) {\n                            return kc.redirectUri;\n                        } else {\n                            return location.href;\n                        }\n                    }\n                };\n            }\n\n            if (type == 'cordova') {\n                loginIframe.enable = false;\n                var cordovaOpenWindowWrapper = function(loginUrl, target, options) {\n                    if (window.cordova && window.cordova.InAppBrowser) {\n                        // Use inappbrowser for IOS and Android if available\n                        return window.cordova.InAppBrowser.open(loginUrl, target, options);\n                    } else {\n                        return window.open(loginUrl, target, options);\n                    }\n                };\n\n                var shallowCloneCordovaOptions = function (userOptions) {\n                    if (userOptions && userOptions.cordovaOptions) {\n                        return Object.keys(userOptions.cordovaOptions).reduce(function (options, optionName) {\n                            options[optionName] = userOptions.cordovaOptions[optionName];\n                            return options;\n                        }, {});\n                    } else {\n                        return {};\n                    }\n                };\n\n                var formatCordovaOptions = function (cordovaOptions) {\n                    return Object.keys(cordovaOptions).reduce(function (options, optionName) {\n                        options.push(optionName+\"=\"+cordovaOptions[optionName]);\n                        return options;\n                    }, []).join(\",\");\n                };\n\n                var createCordovaOptions = function (userOptions) {\n                    var cordovaOptions = shallowCloneCordovaOptions(userOptions);\n                    cordovaOptions.location = 'no';\n                    if (userOptions && userOptions.prompt == 'none') {\n                        cordovaOptions.hidden = 'yes';\n                    }\n                    return formatCordovaOptions(cordovaOptions);\n                };\n\n                return {\n                    login: function(options) {\n                        var promise = createPromise(false);\n\n                        var cordovaOptions = createCordovaOptions(options);\n                        var loginUrl = kc.createLoginUrl(options);\n                        var ref = cordovaOpenWindowWrapper(loginUrl, '_blank', cordovaOptions);\n                        var completed = false;\n\n                        var closed = false;\n                        var closeBrowser = function() {\n                            closed = true;\n                            ref.close();\n                        };\n\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                var callback = parseCallback(event.url);\n                                processCallback(callback, promise);\n                                closeBrowser();\n                                completed = true;\n                            }\n                        });\n\n                        ref.addEventListener('loaderror', function(event) {\n                            if (!completed) {\n                                if (event.url.indexOf('http://localhost') == 0) {\n                                    var callback = parseCallback(event.url);\n                                    processCallback(callback, promise);\n                                    closeBrowser();\n                                    completed = true;\n                                } else {\n                                    promise.setError();\n                                    closeBrowser();\n                                }\n                            }\n                        });\n\n                        ref.addEventListener('exit', function(event) {\n                            if (!closed) {\n                                promise.setError({\n                                    reason: \"closed_by_user\"\n                                });\n                            }\n                        });\n\n                        return promise.promise;\n                    },\n\n                    logout: function(options) {\n                        var promise = createPromise(false);\n\n                        var logoutUrl = kc.createLogoutUrl(options);\n                        var ref = cordovaOpenWindowWrapper(logoutUrl, '_blank', 'location=no,hidden=yes');\n\n                        var error;\n\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                            }\n                        });\n\n                        ref.addEventListener('loaderror', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                            } else {\n                                error = true;\n                                ref.close();\n                            }\n                        });\n\n                        ref.addEventListener('exit', function(event) {\n                            if (error) {\n                                promise.setError();\n                            } else {\n                                kc.clearToken();\n                                promise.setSuccess();\n                            }\n                        });\n\n                        return promise.promise;\n                    },\n\n                    register : function(options) {\n                        var promise = createPromise(false);\n                        var registerUrl = kc.createRegisterUrl();\n                        var cordovaOptions = createCordovaOptions(options);\n                        var ref = cordovaOpenWindowWrapper(registerUrl, '_blank', cordovaOptions);\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                                var oauth = parseCallback(event.url);\n                                processCallback(oauth, promise);\n                            }\n                        });\n                        return promise.promise;\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            var ref = cordovaOpenWindowWrapper(accountUrl, '_blank', 'location=no');\n                            ref.addEventListener('loadstart', function(event) {\n                                if (event.url.indexOf('http://localhost') == 0) {\n                                    ref.close();\n                                }\n                            });\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                    },\n\n                    redirectUri: function(options) {\n                        return 'http://localhost';\n                    }\n                }\n            }\n\n            if (type == 'cordova-native') {\n                loginIframe.enable = false;\n\n                return {\n                    login: function(options) {\n                        var promise = createPromise(false);\n                        var loginUrl = kc.createLoginUrl(options);\n\n                        universalLinks.subscribe('keycloak', function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        });\n\n                        window.cordova.plugins.browsertab.openUrl(loginUrl);\n                        return promise.promise;\n                    },\n\n                    logout: function(options) {\n                        var promise = createPromise(false);\n                        var logoutUrl = kc.createLogoutUrl(options);\n\n                        universalLinks.subscribe('keycloak', function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            kc.clearToken();\n                            promise.setSuccess();\n                        });\n\n                        window.cordova.plugins.browsertab.openUrl(logoutUrl);\n                        return promise.promise;\n                    },\n\n                    register : function(options) {\n                        var promise = createPromise(false);\n                        var registerUrl = kc.createRegisterUrl(options);\n                        universalLinks.subscribe('keycloak' , function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        });\n                        window.cordova.plugins.browsertab.openUrl(registerUrl);\n                        return promise.promise;\n\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            window.cordova.plugins.browsertab.openUrl(accountUrl);\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                    },\n\n                    redirectUri: function(options) {\n                        if (options && options.redirectUri) {\n                            return options.redirectUri;\n                        } else if (kc.redirectUri) {\n                            return kc.redirectUri;\n                        } else {\n                            return \"http://localhost\";\n                        }\n                    }\n                }\n            }\n\n            throw 'invalid adapter type: ' + type;\n        }\n\n        var LocalStorage = function() {\n            if (!(this instanceof LocalStorage)) {\n                return new LocalStorage();\n            }\n\n            localStorage.setItem('kc-test', 'test');\n            localStorage.removeItem('kc-test');\n\n            var cs = this;\n\n            function clearExpired() {\n                var time = new Date().getTime();\n                for (var i = 0; i < localStorage.length; i++)  {\n                    var key = localStorage.key(i);\n                    if (key && key.indexOf('kc-callback-') == 0) {\n                        var value = localStorage.getItem(key);\n                        if (value) {\n                            try {\n                                var expires = JSON.parse(value).expires;\n                                if (!expires || expires < time) {\n                                    localStorage.removeItem(key);\n                                }\n                            } catch (err) {\n                                localStorage.removeItem(key);\n                            }\n                        }\n                    }\n                }\n            }\n\n            cs.get = function(state) {\n                if (!state) {\n                    return;\n                }\n\n                var key = 'kc-callback-' + state;\n                var value = localStorage.getItem(key);\n                if (value) {\n                    localStorage.removeItem(key);\n                    value = JSON.parse(value);\n                }\n\n                clearExpired();\n                return value;\n            };\n\n            cs.add = function(state) {\n                clearExpired();\n\n                var key = 'kc-callback-' + state.state;\n                state.expires = new Date().getTime() + (60 * 60 * 1000);\n                localStorage.setItem(key, JSON.stringify(state));\n            };\n        };\n\n        var CookieStorage = function() {\n            if (!(this instanceof CookieStorage)) {\n                return new CookieStorage();\n            }\n\n            var cs = this;\n\n            cs.get = function(state) {\n                if (!state) {\n                    return;\n                }\n\n                var value = getCookie('kc-callback-' + state);\n                setCookie('kc-callback-' + state, '', cookieExpiration(-100));\n                if (value) {\n                    return JSON.parse(value);\n                }\n            };\n\n            cs.add = function(state) {\n                setCookie('kc-callback-' + state.state, JSON.stringify(state), cookieExpiration(60));\n            };\n\n            cs.removeItem = function(key) {\n                setCookie(key, '', cookieExpiration(-100));\n            };\n\n            var cookieExpiration = function (minutes) {\n                var exp = new Date();\n                exp.setTime(exp.getTime() + (minutes*60*1000));\n                return exp;\n            };\n\n            var getCookie = function (key) {\n                var name = key + '=';\n                var ca = document.cookie.split(';');\n                for (var i = 0; i < ca.length; i++) {\n                    var c = ca[i];\n                    while (c.charAt(0) == ' ') {\n                        c = c.substring(1);\n                    }\n                    if (c.indexOf(name) == 0) {\n                        return c.substring(name.length, c.length);\n                    }\n                }\n                return '';\n            };\n\n            var setCookie = function (key, value, expirationDate) {\n                var cookie = key + '=' + value + '; '\n                    + 'expires=' + expirationDate.toUTCString() + '; ';\n                document.cookie = cookie;\n            }\n        };\n\n        function createCallbackStorage() {\n            try {\n                return new LocalStorage();\n            } catch (err) {\n            }\n\n            return new CookieStorage();\n        }\n\n        function createLogger(fn) {\n            return function() {\n                if (kc.enableLogging) {\n                    fn.apply(console, Array.prototype.slice.call(arguments));\n                }\n            };\n        }\n    }\n\n    return Keycloak;\n})\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar _tslib = require('./_virtual/_tslib.js');\nvar constants = require('./constants.js');\nvar environment = require('./environment.js');\n\nfunction keys(value) {\n  return Object.keys(value);\n}\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = constants.STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\" + event : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\" + stateId + \"' is not a valid state path.\");\n  }\n}\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = _tslib.__values(keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = _tslib.__values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = _tslib.__values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, _tslib.__spreadArray([], _tslib.__read(array)));\n}\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = _tslib.__values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\nfunction isBehavior(value) {\n  return value !== null && typeof value === 'object' && 'transition' in value && typeof value.transition === 'function';\n}\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = _tslib.__read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = _tslib.__values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\nfunction updateContext(context, _event, assignActions, state) {\n  if (!environment.IS_PRODUCTION) {\n    exports.warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = _tslib.__values(keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\nexports.warn = function () {};\n\nif (!environment.IS_PRODUCTION) {\n  exports.warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \" + message];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isString(value) {\n  return typeof value === 'string';\n} // export function memoizedGetter<T, TP extends { prototype: object }>(\n//   o: TP,\n//   property: string,\n//   getter: () => T\n// ): void {\n//   Object.defineProperty(o.prototype, property, {\n//     get: getter,\n//     enumerable: false,\n//     configurable: false\n//   });\n// }\n\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: constants.DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: constants.DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\nfunction isMachine(value) {\n  try {\n    return '__xstatenode' in value;\n  } catch (e) {\n    return false;\n  }\n}\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return _tslib.__assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return _tslib.__assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return _tslib.__assign(_tslib.__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\nfunction normalizeTarget(target) {\n  if (target === undefined || target === constants.TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!environment.IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\" + originalError.stack + \"'\" : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\" + id + \"', error was '\" + originalError + \"'.\" + originalStackTrace);\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\" + currentError.stack + \"'\" : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\" + id + \"'. \" + (\"Original error: '\" + originalError + \"'. \" + originalStackTrace + \" Current error is '\" + currentError + \"'.\" + stackTrace));\n    }\n  }\n}\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === constants.DEFAULT_GUARD_TYPE) {\n    return ((guards === null || guards === void 0 ? void 0 : guards[guard.name]) || guard.predicate)(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\" + guard.type + \"' is not implemented on machine '\" + machine.id + \"'.\");\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  if (typeof nextHandler === 'object') {\n    return nextHandler;\n  }\n\n  var noop = function () {\n    return void 0;\n  };\n\n  return {\n    next: nextHandler,\n    error: errorHandler || noop,\n    complete: completionHandler || noop\n  };\n}\n\nexports.evaluateGuard = evaluateGuard;\nexports.flatten = flatten;\nexports.getEventType = getEventType;\nexports.isActor = isActor;\nexports.isArray = isArray;\nexports.isBehavior = isBehavior;\nexports.isBuiltInEvent = isBuiltInEvent;\nexports.isFunction = isFunction;\nexports.isMachine = isMachine;\nexports.isObservable = isObservable;\nexports.isPromiseLike = isPromiseLike;\nexports.isStateLike = isStateLike;\nexports.isString = isString;\nexports.keys = keys;\nexports.mapContext = mapContext;\nexports.mapFilterValues = mapFilterValues;\nexports.mapValues = mapValues;\nexports.matchesState = matchesState;\nexports.nestedPath = nestedPath;\nexports.normalizeTarget = normalizeTarget;\nexports.partition = partition;\nexports.path = path;\nexports.pathToStateValue = pathToStateValue;\nexports.reportUnhandledExceptionOnInvocation = reportUnhandledExceptionOnInvocation;\nexports.symbolObservable = symbolObservable;\nexports.toArray = toArray;\nexports.toArrayStrict = toArrayStrict;\nexports.toEventObject = toEventObject;\nexports.toGuard = toGuard;\nexports.toInvokeSource = toInvokeSource;\nexports.toObserver = toObserver;\nexports.toSCXMLEvent = toSCXMLEvent;\nexports.toStatePath = toStatePath;\nexports.toStatePaths = toStatePaths;\nexports.toStateValue = toStateValue;\nexports.toTransitionConfigArray = toTransitionConfigArray;\nexports.uniqueId = uniqueId;\nexports.updateContext = updateContext;\nexports.updateHistoryStates = updateHistoryStates;\nexports.updateHistoryValue = updateHistoryValue;\n"],"sourceRoot":""}