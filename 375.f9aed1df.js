"use strict";(self.webpackChunkcos_ui=self.webpackChunkcos_ui||[]).push([[375,496],{25375:(e,t,n)=>{n.r(t),n.d(t,{AppFederated:()=>Ut,default:()=>Zt});var a=n(70655),o=n(75418),r=n.n(o),i=n(11593),s=n(98068),c=n(11272),l=n(21012),u=n(92563),d=n(41428),p=n(66310),m=n(67328),g=n.n(m),v=n(7431),f=n(55277);const C=(0,p.createModel)({accessToken:()=>Promise.resolve(""),basePath:"",connector:{}},{events:{"connector.start":()=>({}),"connector.stop":()=>({}),"connector.remove":()=>({}),"connector.select":()=>({}),"connector.actionSuccess":e=>e,"connector.actionError":e=>e},actions:{notifySuccess:()=>({}),notifyError:()=>({}),notifySelect:({connector:e})=>({connector:e})}}),E=C.assign(((e,t)=>({connector:t.connector})),"connector.actionSuccess"),h=C.createMachine({id:"connector",initial:"verify",context:C.initialContext,states:{verify:{always:[{target:"ready",cond:"isReady"},{target:"stopped",cond:"isStopped"},{target:"deleted",cond:"isDeleted"}]},ready:{on:{"connector.stop":"stoppingConnector","connector.remove":"deletingConnector"}},stopped:{on:{"connector.start":"startingConnector","connector.remove":"deletingConnector"}},deleted:{},startingConnector:{invoke:{id:"startingConnectorCb",src:e=>(({accessToken:e,basePath:t,connector:n})=>{const a=new v.ConnectorsApi(new v.Configuration({accessToken:e,basePath:t}));return e=>{const t=g().CancelToken.source();return a.patchConnector(n.id,{desired_state:"ready"},void 0,{cancelToken:t.token,headers:{"Content-type":"application/merge-patch+json"}}).then((t=>{e({type:"connector.actionSuccess",connector:t.data})})).catch((t=>{g().isCancel(t)||e({type:"connector.actionError",error:t.response.data.reason})})),()=>{t.cancel("Operation canceled by the user.")}}})({accessToken:e.accessToken,basePath:e.basePath,connector:e.connector})},on:{"connector.actionSuccess":{target:"verify",actions:[E,"notifySuccess"]},"connector.actionError":{target:"verify",actions:"notifyError"}}},stoppingConnector:{invoke:{id:"stoppingConnectorCb",src:e=>(({accessToken:e,basePath:t,connector:n})=>{const a=new v.ConnectorsApi(new v.Configuration({accessToken:e,basePath:t}));return e=>{const t=g().CancelToken.source();return a.patchConnector(n.id,{desired_state:"stopped"},void 0,{cancelToken:t.token,headers:{"Content-type":"application/merge-patch+json"}}).then((t=>{e({type:"connector.actionSuccess",connector:t.data})})).catch((t=>{g().isCancel(t)||e({type:"connector.actionError",error:t.response.data.reason})})),()=>{t.cancel("Operation canceled by the user.")}}})({accessToken:e.accessToken,basePath:e.basePath,connector:e.connector})},on:{"connector.actionSuccess":{target:"verify",actions:["updateState","notifySuccess"]},"connector.actionError":{target:"verify",actions:"notifyError"}}},deletingConnector:{invoke:{id:"deletingConnectorCb",src:e=>(({accessToken:e,basePath:t,connector:n})=>{const a=new v.ConnectorsApi(new v.Configuration({accessToken:e,basePath:t}));return e=>{const t=g().CancelToken.source();return a.deleteConnector(n.id,void 0,{cancelToken:t.token}).then((()=>{e({type:"connector.actionSuccess",connector:Object.assign(Object.assign({},n),{status:"deleting",desired_state:"deleted"})})})).catch((t=>{g().isCancel(t)||e({type:"connector.actionError",error:t.response.data.reason})})),()=>{t.cancel("Operation canceled by the user.")}}})({accessToken:e.accessToken,basePath:e.basePath,connector:e.connector})},on:{"connector.actionSuccess":{target:"deleted",actions:["updateState","notifySuccess"]},"connector.actionError":{target:"verify",actions:"notifyError"}}}},on:{"connector.select":{actions:"notifySelect"}}},{guards:{isReady:e=>"ready"===e.connector.desired_state,isStopped:e=>"stopped"===e.connector.desired_state,isDeleted:e=>"deleted"===e.connector.desired_state},actions:{notifySuccess:(0,d.sendParent)("actionSuccess"),notifyError:(0,d.sendParent)("actionFailure"),notifySelect:(0,d.sendParent)((({connector:e})=>({type:"selectConnector",connector:e})))}});var y=n(91999);const b=({name:e,status:t})=>{const n=function(e){var t;const{t:n}=(0,i.useTranslation)(),a=[{value:T.Ready,label:n("Running")},{value:T.Failed,label:n("Failed")},{value:T.Assigning,label:n("Creation pending")},{value:T.Assigned,label:n("Creation in progress")},{value:T.Updating,label:n("Creation in progress")},{value:T.Provisioning,label:n("Creation in progress")},{value:T.Deleting,label:n("Deleting")},{value:T.Deleted,label:n("Deleted")}];return(null===(t=a.find((t=>t.value===e)))||void 0===t?void 0:t.label)||e}(t);return r().createElement(l.Flex,null,r().createElement(l.FlexItem,{spacer:{default:"spacerSm"}},r().createElement(S,{name:e,status:t})),r().createElement(l.FlexItem,null,n))},S=({name:e,status:t})=>{switch(null==t?void 0:t.toLowerCase()){case"ready":return r().createElement(y.CheckCircleIcon,{className:"cos--connectors__table--icon--completed"});case"failed":return r().createElement(y.ExclamationCircleIcon,{className:"cos--connectors__table--icon--failed"});case"accepted":return r().createElement(y.PendingIcon,null);case"provisioning":case"preparing":return r().createElement(l.Spinner,{size:"md","aria-label":e,"aria-valuetext":"Creation in progress"});case"deprovision":case"deleted":return null}return r().createElement(y.PendingIcon,null)};var T;!function(e){e.Ready="ready",e.Failed="failed",e.Assigning="assigning",e.Assigned="assigned",e.Updating="updating",e.Provisioning="provisioning",e.Deleting="deleting",e.Deleted="deleted"}(T||(T={}));const k=({children:e,connector:t,onClose:n})=>r().createElement(l.Drawer,{isExpanded:void 0!==t},r().createElement(l.DrawerContent,{panelContent:t?r().createElement(I,{name:t.metadata.name,bootstrapServer:t.kafka.bootstrap_server,kafkaId:t.metadata.kafka_id,owner:t.metadata.owner,cluster:t.deployment_location.cluster_id,createdAt:new Date(t.metadata.created_at),updatedAt:new Date(t.metadata.updated_at),status:t.status,onClose:n}):void 0},e)),I=({name:e,bootstrapServer:t,kafkaId:n,owner:a,cluster:s,createdAt:c,updatedAt:u,status:d,onClose:p})=>{const{t:m}=(0,i.useTranslation)(),[g,v]=(0,o.useState)(0),f=(e,t)=>r().createElement(r().Fragment,null,t&&r().createElement(r().Fragment,null,r().createElement(l.TextListItem,{component:l.TextListItemVariants.dt},e),r().createElement(l.TextListItem,{component:l.TextListItemVariants.dd},t)));return r().createElement(l.DrawerPanelContent,{widths:{default:"width_50"}},r().createElement(l.DrawerHead,null,r().createElement(l.TextContent,null,r().createElement(l.Text,{component:l.TextVariants.small,className:"connector-drawer__header-text"},"Connector name"),r().createElement(l.Flex,null,r().createElement(l.FlexItem,null,r().createElement(l.Title,{headingLevel:"h2",size:l.TitleSizes.xl,className:"connector-drawer__header-title"},e)),r().createElement(l.FlexItem,{spacer:{default:"spacerSm"}},r().createElement(b,{name:e,status:d})))),r().createElement(l.DrawerActions,null,r().createElement(l.DrawerCloseButton,{onClick:p}))),r().createElement(l.DrawerPanelBody,null,r().createElement(l.Tabs,{activeKey:g,onSelect:(e,t)=>{v(t)}},r().createElement(l.Tab,{eventKey:0,title:r().createElement(l.TabTitleText,null,m("Details"))},r().createElement("div",{className:"connector-drawer__tab-content"},r().createElement(l.TextContent,null,r().createElement(l.TextList,{component:l.TextListVariants.dl},f("Bootstrap server",t),f("Connector",e),f("Kafka_instance",n),f("Targeted OSD Cluster",s),f("Owner",a),f("Time created",r().createElement("time",{title:m("{{date}}",{date:c}),dateTime:c.toISOString()},m("{{ date, ago }}",{date:c}))),f("Time updated",r().createElement("time",{title:m("{{date}}",{date:u}),dateTime:u.toISOString()},m("{{ date, ago }}",{date:u}))))))))))};var x=n(45496);function w(e,t,n){const a=(0,p.createModel)({request:{page:1,size:10},response:void 0,pollingEnabled:(null==n?void 0:n.pollingEnabled)||!1,onBeforeSetResponse:null==n?void 0:n.onBeforeSetResponse,dataTransformer:t},{events:Object.assign({},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e}),actions:{notifyReady:()=>({}),notifyLoading:()=>({}),notifySuccess:()=>({}),notifyError:()=>({}),forwardUnknownEventsToParent:()=>({})}}),o=a.assign(((e,t)=>{var n,a;return t.page!==e.request.page?{}:(e.onBeforeSetResponse&&e.onBeforeSetResponse(null===(n=e.response)||void 0===n?void 0:n.items),{response:{items:null===(a=t.items)||void 0===a?void 0:a.map((t=>e.dataTransformer(t))),total:t.total,error:void 0}})}),"api.setResponse"),r=a.assign((e=>{e.actor&&e.actor.stop&&e.actor.stop();return{actor:(0,x.spawn)(u(e))}})),i=a.assign(((e,t)=>{var n,a;return t.page!==e.request.page?{}:{response:{items:(null===(n=e.response)||void 0===n?void 0:n.items)||[],total:(null===(a=e.response)||void 0===a?void 0:a.total)||0,error:t.error}}}),"api.setError"),s=a.assign((e=>({request:Object.assign(Object.assign({},e.request),{page:e.request.page+1})})),"api.nextPage"),c=a.assign((e=>({request:Object.assign(Object.assign({},e.request),{page:e.request.page-1})})),"api.prevPage"),l=a.assign(((e,t)=>{const{page:n,size:a,query:o}=t;return{request:{page:n||e.request.page,size:a||e.request.size,query:o}}}),"api.query"),u=t=>n=>e(t.request,(e=>n(a.events["api.setResponse"](e))),(e=>n(a.events["api.setError"](e))));return a.createMachine({id:"paginatedApiMachine",context:a.initialContext,type:"parallel",states:{api:{initial:"idle",states:{idle:{entry:a.actions.notifyReady(),on:{"api.query":{target:"loading",actions:l}}},success:{always:[{target:"queryEmpty",cond:"isQueryEmpty"},{target:"queryResults",cond:"isQuerySuccesful"},{target:"empty",cond:"isTotalZero"},{target:"results"}]},queryEmpty:{tags:"queryEmpty",on:{"api.query":{target:"loading",actions:l},"api.prevPage":{target:"loading",actions:c,cond:"isNotFirstPage"},"api.refresh":{target:"loading"}}},queryResults:{tags:"queryResults",on:{"api.query":{target:"loading",actions:l},"api.nextPage":{target:"loading",actions:s,cond:"isNotLastPage"},"api.prevPage":{target:"loading",actions:c,cond:"isNotFirstPage"},"api.refresh":{target:"loading"}}},empty:{tags:"empty",on:{"api.query":{target:"loading",actions:l},"api.refresh":{target:"loading"}}},results:{tags:"results",on:{"api.query":{target:"loading",actions:l},"api.nextPage":{target:"loading",actions:s,cond:"isNotLastPage"},"api.prevPage":{target:"loading",actions:c,cond:"isNotFirstPage"},"api.refresh":{target:"loading"}}},error:{tags:"error",on:{"api.query":{target:"loading",actions:l},"api.refresh":{target:"loading"},"api.prevPage":{target:"loading",actions:c,cond:"isNotFirstPage"}}},loading:{tags:["loading"],entry:[a.actions.notifyLoading(),r],on:{"api.query":{target:"loading",actions:l},"api.setResponse":{target:"success",actions:[o,a.actions.notifySuccess()]},"api.setError":{target:"error",actions:[i,a.actions.notifyError()]}}}},on:{"*":{actions:"forwardUnknownEventsToParent"}}},polling:{entry:r,on:{"api.setResponse":{actions:o}},after:{INTERVAL:{cond:"isPollingEnabled",target:"polling"}}}}},{delays:{INTERVAL:5e3},actions:{notifyReady:(0,d.sendParent)({type:"api.ready"}),notifySuccess:(0,d.sendParent)((e=>Object.assign({type:"api.success"},e.response))),notifyError:(0,d.sendParent)((e=>{var t;return{type:"api.error",error:null===(t=e.response)||void 0===t?void 0:t.error}})),notifyLoading:(0,d.sendParent)((e=>Object.assign({type:"api.loading"},e.request))),forwardUnknownEventsToParent:(0,d.pure)(((e,t)=>!1===Object.keys(a.events).includes(t.type)?(0,d.sendParent)(((e,t,n)=>n._event.data)):[]))},guards:{isNotFirstPage:e=>void 0!==e.response&&e.request.page>1,isNotLastPage:e=>void 0!==e.response&&e.request.size>0&&e.request.page<Math.ceil(e.response.total/e.request.size),isTotalZero:e=>{var t;return 0===(null===(t=e.response)||void 0===t?void 0:t.total)},isQuerySuccesful:e=>{var t;return void 0!==e.request.query&&void 0!==e.response&&(null===(t=e.response)||void 0===t?void 0:t.total)>0},isQueryEmpty:e=>{var t;return void 0!==e.request.query&&void 0!==e.response&&0===(null===(t=e.response)||void 0===t?void 0:t.total)},isPollingEnabled:e=>e.pollingEnabled}})}const P=e=>(0,u.useSelector)(e,(0,o.useCallback)((e=>({request:e.context.request,response:e.context.response,loading:e.hasTag("loading"),queryEmpty:e.hasTag("queryEmpty"),queryResults:e.hasTag("queryResults"),noResults:e.hasTag("empty"),results:e.hasTag("results"),error:e.hasTag("error"),firstRequest:void 0===e.context.response})),[e])),q="paginatedApi",N=(0,p.createModel)({accessToken:()=>Promise.resolve(""),basePath:"",selectedConnector:void 0},{events:Object.assign(Object.assign({},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e}),{selectConnector:e=>e,deselectConnector:()=>({})}),actions:{notifyError:()=>({})}}),O=N.assign(((e,t)=>({selectedConnector:t.connector})),"selectConnector"),D=N.assign((e=>({selectedConnector:void 0})),"deselectConnector"),B=N.createMachine({id:"connectors",initial:"root",context:N.initialContext,states:{root:{type:"parallel",states:{api:{initial:"idle",invoke:{id:q,src:e=>w((({accessToken:e,basePath:t})=>{const n=new v.ConnectorsApi(new v.Configuration({accessToken:e,basePath:t}));return(e,t,a)=>{const o=g().CancelToken.source(),{page:r,size:i}=e;return n.listConnectors(`${r}`,`${i}`,void 0,{cancelToken:o.token}).then((e=>{t({items:e.data.items||[],total:e.data.total,page:e.data.page,size:e.data.size})})).catch((t=>{g().isCancel(t)||a({error:t.message,page:e.page})})),()=>{o.cancel("Operation canceled by the user.")}}})(e),(t=>(0,x.spawn)((e=>h.withContext(e))({accessToken:e.accessToken,basePath:e.basePath,connector:t}),`connector-${t.id}`)),{pollingEnabled:!0,onBeforeSetResponse:e=>{e&&e.forEach((e=>{e&&e.stop&&e.stop()}))}})},states:{idle:{on:{"api.ready":"ready"}},ready:{entry:(0,x.send)("api.query",{to:q})}},on:{"api.refresh":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.nextPage":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.prevPage":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.query":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.error":{actions:"notifyError"},selectConnector:{actions:O},deselectConnector:{actions:D}}},listing:{}}}}},{actions:{notifyError:(e,t)=>{console.log(e,t),"api.error"===t.type&&e.onError&&e.onError(t.error)}}}),A=(0,o.createContext)(null),R=({children:e,accessToken:t,basePath:n,onError:a})=>{const o=(0,u.useInterpret)(B,{context:{accessToken:t,basePath:n,onError:a},devTools:!0});return r().createElement(A.Provider,{value:o},e)},j=()=>{const e=(0,o.useContext)(A);if(!e)throw new Error("useConnectorsMachineService() must be used in a child of <ConnectorsMachineProvider>");return e},L=()=>{const e=j(),t=P(e.state.children.paginatedApi),{selectedConnector:n}=(0,u.useSelector)(e,(0,o.useCallback)((e=>({selectedConnector:e.context.selectedConnector})),[e])),a=(0,o.useCallback)((()=>{e.send({type:"deselectConnector"})}),[e]),r=(0,o.useCallback)((t=>{e.send(Object.assign({type:"api.query"},t))}),[e]);return Object.assign(Object.assign({},t),{selectedConnector:n,deselectConnector:a,query:r})};var z=n(55706),F=n(86445);const _=({children:e})=>{const{t}=(0,i.useTranslation)();return r().createElement(F.TableComposable,{"aria-label":"Sortable Table",className:(0,z.css)("connectors-table-view__table")},r().createElement(F.Thead,null,r().createElement(F.Tr,null,r().createElement(F.Th,null,t("Name")),r().createElement(F.Th,null,t("Type")),r().createElement(F.Th,null,t("Category")),r().createElement(F.Th,null,t("Status")))),r().createElement(F.Tbody,null,e))},V=({connectorId:e,name:t,type:n,category:a,status:o,isSelected:s,canStart:c,canStop:l,canDelete:u,onStart:d,onStop:p,onDelete:m,onSelect:g})=>{const{t:v}=(0,i.useTranslation)(),f=[{title:"Start",onClick:d,isDisabled:!c},{title:"Stop",onClick:p,isDisabled:!l},{title:"Delete",onClick:m,isDisabled:!u},{isSeparator:!0},{title:"Details",onClick:g}];return r().createElement(F.Tr,{onClick:e=>{var t;"button"!==(null===(t=e.target)||void 0===t?void 0:t.type)&&g()},className:(0,z.css)("pf-c-table-row__item","pf-m-selectable",s&&"pf-m-selected")},r().createElement(F.Td,{dataLabel:v("Name")},t),r().createElement(F.Td,{dataLabel:v("Type")},n),r().createElement(F.Td,{dataLabel:v("Category")},a),r().createElement(F.Td,{dataLabel:v("Status")},r().createElement(b,{name:t,status:o})),r().createElement(F.Td,{actions:{items:f},"data-testid":`actions-for-${e}`}))},G=({itemCount:e,page:t,perPage:n,isCompact:a=!1,onChange:o})=>r().createElement(l.Pagination,{itemCount:e,page:t,perPage:n,perPageOptions:[{title:"1",value:1},{title:"5",value:5},{title:"10",value:10}],onSetPage:(e,t)=>o(t,n),onPerPageSelect:(e,n)=>o(t,n),variant:a?"top":"bottom",isCompact:a});var M=n(3889),K=n.n(M);const $=(e,t=200)=>{if(isNaN(t))throw new TypeError("durationInMs for debounce should be a number");if("function"!=typeof e)throw new TypeError("fnToDebounce should be a function");return(0,o.useCallback)(K()(e,t),[e,t])},W=({itemCount:e,page:t,perPage:n,onChange:a})=>{const i=(0,o.useRef)(null),c=$(a,1e3),u=r().createElement(r().Fragment,null,r().createElement(l.ToolbarItem,null,r().createElement(l.InputGroup,null,r().createElement(l.TextInput,{name:"name",id:"name",type:"search","aria-label":"filter by connector name",onChange:e=>c({size:n,page:1,name:e}),ref:i}),r().createElement(l.Button,{variant:"control","aria-label":"search button for search input"},r().createElement(y.SearchIcon,null))))),d=r().createElement(r().Fragment,null,r().createElement(l.ToolbarToggleGroup,{toggleIcon:r().createElement(y.FilterIcon,null),breakpoint:"xl"},u),r().createElement(l.ToolbarGroup,{variant:"icon-button-group"},r().createElement(l.ToolbarItem,null,r().createElement(s.NavLink,{className:"pf-c-button pf-m-primary",to:"/create-connector"},"Create Connector"))),r().createElement(l.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},r().createElement(G,{itemCount:e,page:t,perPage:n,onChange:a,isCompact:!0})));return r().createElement(l.Toolbar,{id:"toolbar-group-types",collapseListedFiltersBreakpoint:"xl"},r().createElement(l.ToolbarContent,null,d))},J=(0,o.createContext)(null),Q=({getToken:e,basePath:t,children:n})=>r().createElement(J.Provider,{value:{getToken:e,basePath:t}},n),H=()=>{const e=(0,o.useContext)(J);if(!e)throw new Error("useAppContext must be used inside an AppContextProvider");return Object.assign({},e)},U=({connectorName:e,onCancel:t,onConfirm:n,showDialog:a})=>{const{t:s}=(0,i.useTranslation)(),[c,u]=(0,o.useState)(""),d=c===e;return r().createElement(l.Modal,{variant:l.ModalVariant.small,title:s("Delete connector"),titleIconVariant:"warning",isOpen:a,onClose:t,actions:[r().createElement(l.Button,{key:"confirm",variant:"danger",isDisabled:!d,onClick:()=>{u(""),n()}},s("Delete")),r().createElement(l.Button,{key:"cancel",variant:"link",onClick:()=>{u(""),t()}},s("Cancel"))]},r().createElement(l.Stack,null,r().createElement(l.StackItem,null,r().createElement(i.Trans,null,"Connector ",r().createElement("strong",null,{connectorName:e})," will be deleted.")),r().createElement(l.StackItem,null,r().createElement(i.Trans,null,"Type ",r().createElement("strong",null,{connectorName:e})," to confirm the deletion.")),r().createElement(l.StackItem,null,r().createElement(l.TextInput,{value:c,type:"text",onChange:u,"aria-label":"name input"}))))},Z=()=>{const{t:e}=(0,i.useTranslation)();return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.full},r().createElement(l.EmptyStateIcon,{icon:y.ExclamationCircleIcon}),r().createElement(l.Title,{headingLevel:"h1",size:l.TitleSizes.lg},e("Something went wrong")),r().createElement(l.EmptyStateBody,null,e("There was a problem processing the request. Please try again.")))};var Y=n(34558);const X=({onHelp:e,onCreate:t})=>{const{t:n}=(0,i.useTranslation)();return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.xl,className:(0,z.css)("pf-u-pt-2xl pf-u-pt-3xl-on-md")},r().createElement(l.EmptyStateIcon,{icon:Y.ZP}),r().createElement(l.Title,{headingLevel:"h1",size:l.TitleSizes["4xl"]},n("Welcome to Managed Connectors")),r().createElement(l.EmptyStateBody,null,r().createElement(i.Trans,null,"For help getting started, access the"," ",r().createElement(l.Button,{variant:l.ButtonVariant.link,isSmall:!0,isInline:!0,onClick:e},"quick start guide."))),r().createElement(l.Button,{variant:"primary",onClick:t},n("Create Connector")))},ee=({onClear:e})=>{const{t}=(0,i.useTranslation)();return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.large,className:(0,z.css)("pf-u-pt-2xl pf-u-pt-3xl-on-md")},r().createElement(l.EmptyStateIcon,{icon:y.SearchIcon}),r().createElement(l.Title,{headingLevel:"h2",size:l.TitleSizes.xl},t("No results found")),r().createElement(l.EmptyStateBody,null,r().createElement(i.Trans,null,"No results match the filter criteria."," ",r().createElement(l.Button,{variant:l.ButtonVariant.link,isSmall:!0,isInline:!0,onClick:e},t("Clear all filters"))," ","to show results.")))},te=()=>r().createElement(l.EmptyState,null,r().createElement(l.EmptyStateIcon,{variant:"container",component:l.Spinner}),r().createElement(l.Title,{size:"lg",headingLevel:"h4"},"Loading")),ne=({onCreateConnector:e})=>{const{t}=(0,i.useTranslation)(),n=(0,c.useAlert)(),{basePath:a,getToken:s}=H(),l=(0,o.useCallback)((e=>{null==n||n.addAlert({id:"connectors-table-error",variant:c.AlertVariant.danger,title:t("common.something_went_wrong"),description:e})}),[n,t]);return r().createElement(R,{accessToken:s,basePath:a,onError:l},r().createElement(ae,{onCreateConnector:e}))},ae=({onCreateConnector:e})=>(()=>{const e=j();return(0,u.useSelector)(e,(0,o.useCallback)((e=>e.matches({root:{api:"ready"}})),[e]))})()?r().createElement(oe,{onCreateConnector:e}):r().createElement(te,null),oe=({onCreateConnector:e})=>{const{loading:t,error:n,noResults:a,queryEmpty:o,firstRequest:i,request:s,response:c,selectedConnector:u,deselectConnector:d,query:p}=L();switch(!0){case i:return r().createElement(te,null);case o:return r().createElement(ee,{onClear:()=>p({page:1,size:10})});case t:return r().createElement(r().Fragment,null,r().createElement(l.PageSection,{variant:"light"},r().createElement(re,null)),r().createElement(l.PageSection,{padding:{default:"noPadding"},isFilled:!0},r().createElement(l.Card,null,r().createElement(W,{itemCount:(null==c?void 0:c.total)||0,page:s.page,perPage:s.size,onChange:(e,t)=>p({page:e,size:t})}),r().createElement(te,null))));case a:return r().createElement(X,{onCreate:e,onHelp:function(){throw new Error("Function not implemented.")}});case n:return r().createElement(Z,null);default:return r().createElement(k,{connector:u,onClose:d},r().createElement(l.PageSection,{variant:"light"},r().createElement(re,null)),r().createElement(l.PageSection,{padding:{default:"noPadding"},isFilled:!0},r().createElement(ie,null)))}},re=()=>{const{t:e}=(0,i.useTranslation)();return r().createElement(l.TextContent,null,r().createElement(l.Title,{headingLevel:"h1"},e("Connectors")))},ie=()=>{var e;const{request:t,response:n,selectedConnector:a,query:o}=L();return r().createElement(l.Card,{className:"pf-u-pb-xl"},r().createElement(W,{itemCount:(null==n?void 0:n.total)||0,page:t.page,perPage:t.size,onChange:(e,t)=>o({page:e,size:t})}),r().createElement("div",{className:"pf-u-p-md"},r().createElement(_,null,null===(e=null==n?void 0:n.items)||void 0===e?void 0:e.map((e=>r().createElement(se,{connectorRef:e,key:e.id,selectedConnector:a}))))),r().createElement(G,{itemCount:(null==n?void 0:n.total)||0,page:t.page,perPage:t.size,onChange:(e,t)=>o({page:e,size:t}),isCompact:!1}))},se=({connectorRef:e,selectedConnector:t})=>{var n;const{connector:a,canStart:i,canStop:s,canDelete:c,onStart:l,onStop:d,onDelete:p,onSelect:m}=(e=>{const{connector:t,canStart:n,canStop:a,canDelete:r}=(0,u.useSelector)(e,(0,o.useCallback)((e=>({connector:e.context.connector,canStart:!0===h.transition(e,"connector.start").changed,canStop:!0===h.transition(e,"connector.stop").changed,canDelete:!0===h.transition(e,"connector.remove").changed})),[e]));return{connector:t,canStart:n,canStop:a,canDelete:r,onStart:(0,o.useCallback)((()=>e.send({type:"connector.start"})),[e]),onStop:(0,o.useCallback)((()=>e.send({type:"connector.stop"})),[e]),onDelete:(0,o.useCallback)((()=>e.send({type:"connector.remove"})),[e]),onSelect:(0,o.useCallback)((()=>e.send({type:"connector.select"})),[e])}})(e),[g,v]=(0,o.useState)(!1);return r().createElement(r().Fragment,null,r().createElement(U,{connectorName:null===(n=a.metadata)||void 0===n?void 0:n.name,showDialog:g,onCancel:()=>{v(!1)},onConfirm:()=>{v(!1),p()}}),r().createElement(V,{connectorId:a.id,name:a.metadata.name,type:a.connector_type_id,category:"TODO: MISSING",status:a.status,isSelected:(null==t?void 0:t.id)===a.id,canStart:i,canStop:s,canDelete:c,onStart:l,onStop:d,onSelect:m,onDelete:()=>v(!0)}))},ce=(0,p.createModel)({accessToken:()=>Promise.resolve(""),basePath:"",clusters:void 0,selectedCluster:void 0,error:void 0},{events:Object.assign({selectCluster:e=>Object.assign({},e),deselectCluster:()=>({}),confirm:()=>({})},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e})}),le=ce.assign(((e,t)=>{const{type:n}=t;return{response:(0,a.__rest)(t,["type"])}}),"api.success"),ue=ce.assign({selectedCluster:(e,t)=>{var n,a;return null===(a=null===(n=e.response)||void 0===n?void 0:n.items)||void 0===a?void 0:a.find((e=>e.id===t.selectedCluster))}},"selectCluster"),de=ce.assign({selectedCluster:void 0},"deselectCluster"),pe=ce.createMachine({id:"clusters",initial:"root",context:ce.initialContext,states:{root:{type:"parallel",states:{api:{initial:"idle",invoke:{id:q,src:e=>w((({accessToken:e,basePath:t})=>{const n=new v.ConnectorClustersApi(new v.Configuration({accessToken:e,basePath:t}));return(e,t,a)=>{const o=g().CancelToken.source(),{page:r,size:i}=e;return n.listConnectorClusters(`${r}`,`${i}`,{cancelToken:o.token}).then((e=>{t({items:e.data.items||[],total:e.data.total,page:e.data.page,size:e.data.size})})).catch((t=>{g().isCancel(t)||a({error:t.message,page:e.page})})),()=>{o.cancel("Operation canceled by the user.")}}})(e),(e=>e))},states:{idle:{entry:(0,x.send)("api.query",{to:q}),on:{"api.ready":"ready"}},ready:{}},on:{"api.refresh":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.nextPage":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.prevPage":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.query":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.success":{actions:le}}},selection:{id:"selection",initial:"verify",states:{verify:{always:[{target:"selecting",cond:"noClusterSelected"},{target:"valid",cond:"clusterSelected"}]},selecting:{entry:(0,x.sendParent)("isInvalid"),on:{selectCluster:{target:"valid",actions:ue}}},valid:{entry:(0,x.sendParent)("isValid"),on:{selectCluster:{target:"verify",actions:ue,cond:(e,t)=>void 0!==t.selectedCluster},deselectCluster:{target:"verify",actions:de},confirm:{target:"#done",cond:"clusterSelected"}}}}}}},done:{id:"done",type:"final",data:{selectedCluster:e=>e.selectedCluster}}}},{guards:{clusterSelected:e=>void 0!==e.selectedCluster,noClusterSelected:e=>void 0===e.selectedCluster}}),me=(0,p.createModel)({connector:{id:"something",name:"something",version:"0.1",json_schema:{}},steps:[],activeStep:0,isActiveStepValid:!1,configuration:void 0},{events:{entry:()=>({}),change:({configuration:e,isValid:t})=>({configuration:e,isValid:t}),next:()=>({}),prev:()=>({}),complete:()=>({})},actions:{changedStep:()=>({})}}),ge=me.assign((e=>({activeStep:Math.min(e.activeStep+1,e.steps.length-1),isActiveStepValid:!1})),"next"),ve=me.assign((e=>({activeStep:Math.max(e.activeStep-1,0),isActiveStepValid:!1})),"prev"),fe=me.assign(((e,t)=>({configuration:t.configuration,isActiveStepValid:t.isValid})),"change"),Ce=me.createMachine({id:"configurator",initial:"configuring",context:{connector:{id:"something",name:"something",version:"0.1",json_schema:{}},steps:["one","two","three"],activeStep:0,isActiveStepValid:!1,configuration:void 0},states:{configuring:{entry:(0,x.sendParent)("isInvalid"),always:[{target:"valid",cond:"activeStepValid"}]},valid:{id:"valid",initial:"determineStep",entry:(0,x.sendParent)("isValid"),states:{determineStep:{always:[{target:"#valid.lastStep",cond:"isLastStep"},{target:"#valid.hasNextStep"}]},hasNextStep:{on:{next:{target:"#configurator.configuring",actions:[ge,"changedStep"]}}},lastStep:{on:{next:"#configurator.configured"}}}},configured:{type:"final",data:({configuration:e})=>({configuration:e})}},on:{change:{target:"configuring",actions:fe},prev:{target:"configuring",actions:[ve,"changedStep"]}}},{actions:{changedStep:(0,x.sendParent)((e=>({type:"changedStep",step:e.activeStep})))},guards:{isLastStep:e=>e.activeStep===e.steps.length-1,activeStepValid:e=>e.isActiveStepValid}}),Ee={context:(0,x.createSchema)()},he=(0,p.createModel)({connector:{id:"something",name:"something",version:"0.1"},Configurator:void 0,steps:void 0,error:void 0}),ye=he.createMachine({schema:Ee,id:"configurator",initial:"loading",context:he.initialContext,states:{loading:{invoke:{id:"fetchConfigurator",src:"fetchConfigurator",onDone:{target:"success",actions:(0,x.assign)(((e,t)=>t.data))},onError:{target:"failure",actions:(0,x.assign)({error:(e,t)=>t.data})}}},failure:{entry:(0,d.escalate)((e=>({message:e.error})))},success:{type:"final",data:({Configurator:e,steps:t})=>({Configurator:e,steps:t})}}}),be=(0,p.createModel)({accessToken:()=>Promise.resolve(""),basePath:"",response:void 0,selectedConnector:void 0,error:void 0},{events:Object.assign({selectConnector:e=>Object.assign({},e),deselectConnector:()=>({}),confirm:()=>({})},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e})}),Se=be.assign(((e,t)=>{const{type:n}=t;return{response:(0,a.__rest)(t,["type"])}}),"api.success"),Te=be.assign({selectedConnector:(e,t)=>{var n,a;return null===(a=null===(n=e.response)||void 0===n?void 0:n.items)||void 0===a?void 0:a.find((e=>e.id===t.selectedConnector))}},"selectConnector"),ke=be.assign({selectedConnector:void 0},"deselectConnector"),Ie=be.createMachine({context:be.initialContext,id:"connectors",initial:"root",states:{root:{type:"parallel",states:{api:{initial:"idle",invoke:{id:q,src:e=>w((({accessToken:e,basePath:t})=>{const n=new v.ConnectorTypesApi(new v.Configuration({accessToken:e,basePath:t}));return(e,t,a)=>{const o=g().CancelToken.source(),{page:r,size:i,query:s}=e,{name:c,categories:l=[]}=s||{};return n.listConnectorTypes("1","1000",{cancelToken:o.token}).then((e=>{const n=c?c.toLowerCase():void 0,a=e.data.items||[];let o=n?null==a?void 0:a.filter((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n)})):a;o=l.length>0?null==o?void 0:o.filter((e=>{var t;return((null===(t=e.labels)||void 0===t?void 0:t.filter((e=>l.includes(e))))||[]).length>0})):o;const s=o.length,u=(r-1)*i,d=o.slice(u,u+i);t({items:d,total:s,page:r,size:i})})).catch((t=>{g().isCancel(t)||a({error:t.message,page:e.page})})),()=>{o.cancel("Operation canceled by the user.")}}})(e),(e=>e))},states:{idle:{entry:(0,x.send)({type:"api.query",query:{categories:["sink","source"]}},{to:q}),on:{"api.ready":"ready"}},ready:{}},on:{"api.refresh":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.nextPage":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.prevPage":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.query":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.success":{actions:Se}}},selection:{id:"selection",initial:"verify",states:{verify:{always:[{target:"selecting",cond:"noConnectorSelected"},{target:"valid",cond:"connectorSelected"}]},selecting:{entry:(0,x.sendParent)("isInvalid"),on:{selectConnector:{target:"valid",actions:Te,cond:(e,t)=>void 0!==t.selectedConnector}}},valid:{entry:(0,x.sendParent)("isValid"),on:{selectConnector:{target:"verify",actions:Te},deselectConnector:{target:"verify",actions:ke},confirm:{target:"#done",cond:"connectorSelected"}}}}}}},done:{id:"done",type:"final",data:{selectedConnector:e=>e.selectedConnector}}}},{guards:{connectorSelected:e=>void 0!==e.selectedConnector,noConnectorSelected:e=>void 0===e.selectedConnector}}),xe=(0,p.createModel)({accessToken:()=>Promise.resolve(""),basePath:"",instances:void 0,selectedInstance:void 0,error:void 0},{events:Object.assign({selectInstance:e=>Object.assign({},e),deselectInstance:()=>({}),confirm:()=>({})},{"api.refresh":()=>({}),"api.nextPage":()=>({}),"api.prevPage":()=>({}),"api.query":e=>e,"api.setResponse":e=>e,"api.setError":e=>e,"api.ready":()=>({}),"api.loading":e=>e,"api.success":e=>e,"api.error":e=>e})}),we=xe.assign(((e,t)=>{const{type:n}=t;return{response:(0,a.__rest)(t,["type"])}}),"api.success"),Pe=xe.assign({selectedInstance:(e,t)=>{var n,a;return null===(a=null===(n=e.response)||void 0===n?void 0:n.items)||void 0===a?void 0:a.find((e=>e.id===t.selectedInstance))}},"selectInstance"),qe=xe.assign({selectedInstance:void 0},"deselectInstance"),Ne=xe.createMachine({id:"kafkas",initial:"root",context:xe.initialContext,states:{root:{type:"parallel",states:{api:{initial:"idle",invoke:{id:q,src:e=>w((({accessToken:e,basePath:t})=>{const n=new f.DefaultApi(new v.Configuration({accessToken:e,basePath:"https://api.openshift.com"}));return(e,t,a)=>{const o=g().CancelToken.source(),{page:r,size:i,query:s}=e,{name:c,statuses:l,owner:u,cloudProviders:d,regions:p}=s||{},m=[c&&c.length>0?` name LIKE ${c}`:void 0,u&&u.length>0?` owner LIKE ${u}`:void 0,l&&l.length>0?l.map((e=>`status = ${e}`)).join(" OR "):void 0,d&&d.length>0?d.map((e=>`cloud_provider = ${e}`)).join(" OR "):void 0,p&&p.length>0?p.map((e=>`region = ${e}`)).join(" OR "):void 0].filter(Boolean).map((e=>`(${e})`)).join(" AND ");return n.getKafkas(`${r}`,`${i}`,void 0,m,{cancelToken:o.token}).then((e=>{t({items:e.data.items||[],total:e.data.total,page:e.data.page,size:e.data.size})})).catch((t=>{g().isCancel(t)||a({error:t.message,page:e.page})})),()=>{o.cancel("Operation canceled by the user.")}}})(e),(e=>e))},states:{idle:{entry:(0,x.send)("api.query",{to:q}),on:{"api.ready":"ready"}},ready:{}},on:{"api.refresh":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.nextPage":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.prevPage":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.query":{actions:(0,x.send)(((e,t)=>t),{to:q})},"api.success":{actions:we}}},selection:{id:"selection",initial:"verify",states:{verify:{always:[{target:"selecting",cond:"noInstanceSelected"},{target:"valid",cond:"instanceSelected"}]},selecting:{entry:(0,d.sendParent)("isInvalid"),on:{selectInstance:{target:"valid",actions:Pe}}},valid:{entry:(0,d.sendParent)("isValid"),on:{selectInstance:{target:"verify",actions:Pe,cond:(e,t)=>void 0!==t.selectedInstance},deselectInstance:{target:"verify",actions:qe},confirm:{target:"#done",cond:"instanceSelected"}}}}}}},done:{id:"done",type:"final",data:{selectedInstance:e=>e.selectedInstance}}}},{guards:{instanceSelected:e=>void 0!==e.selectedInstance,noInstanceSelected:e=>void 0===e.selectedInstance}});var Oe=n(23908),De=n.n(Oe),Be=n(79199),Ae=n(80073),Re=n(78997);const je=new(De())({allErrors:!0,useDefaults:!1,strict:"log",strictSchema:!1});function Le(e){const t=je.compile(e);return e=>{var n;return t(e),(null===(n=t.errors)||void 0===n?void 0:n.length)?{details:t.errors}:null}}const ze=({schema:e,configuration:t,onChange:n})=>{e.type=e.type||"object";const a=Le(e),o=new Ae.JSONSchemaBridge(e,a);return r().createElement(Re.AutoForm,{schema:o,model:t,autosave:!0,autosaveDelay:0},r().createElement(Re.AutoFields,null),r().createElement(Re.ErrorsField,null),r().createElement(Fe,{onChange:n}))},Fe=({onChange:e})=>{const{changed:t,submitted:n,error:a,model:r}=(0,Be.useForm)(),i=!a,s=(0,o.useRef)();return(0,o.useEffect)((()=>{s.current!==r&&t&&n&&(s.current=r,e(i?r:void 0,i))}),[s,t,n,i,r,e]),null},_e=(0,p.createModel)({initialConfiguration:void 0,configString:"",name:"",validator:Le({})},{events:{setName:e=>e,setServiceAccount:e=>e,updateConfiguration:e=>e,save:()=>({}),success:()=>({}),failure:e=>e}}),Ve=_e.assign((e=>({configString:Qe(e.initialConfiguration),validator:Le(e.connectorType.json_schema)}))),Ge=_e.assign({name:(e,t)=>t.name},"setName"),Me=_e.assign(((e,t)=>({userServiceAccount:t.serviceAccount})),"setServiceAccount"),Ke=_e.assign(((e,t)=>({configString:t.data})),"updateConfiguration"),$e=_e.assign((e=>{const{warnings:t,error:n}=function(e,t){var n;try{const n=t(JSON.parse(e));return{warnings:n?n.details.map((e=>`${e.instancePath} ${e.message}`)):void 0,error:void 0}}catch(e){return{warnings:void 0,error:`Invalid JSON: ${(null===(n=e)||void 0===n?void 0:n.message)||JSON.stringify(e)}`}}}(e.configString,e.validator);return{configStringWarnings:t,configStringError:n}})),We=_e.assign(((e,t)=>({savingError:t.message})),"failure"),Je=_e.createMachine({id:"review",initial:"verify",context:_e.initialContext,entry:Ve,states:{verify:{entry:$e,always:[{target:"valid",cond:"isAllConfigured"},{target:"reviewing"}]},reviewing:{entry:(0,x.sendParent)("isInvalid"),on:{setName:{target:"verify",actions:Ge},setServiceAccount:{target:"verify",actions:Me},updateConfiguration:{target:"verify",actions:Ke}}},valid:{id:"valid",entry:(0,x.sendParent)("isValid"),on:{setName:{target:"verify",actions:Ge},setServiceAccount:{target:"verify",actions:Me},updateConfiguration:{target:"verify",actions:Ke},save:"saving"}},saving:{invoke:{src:e=>(({accessToken:e,basePath:t,kafka:n,cluster:a,connectorType:o,configuration:r,name:i,userServiceAccount:s})=>{const c=new v.ConnectorsApi(new v.Configuration({accessToken:e,basePath:t}));return e=>{const t=g().CancelToken.source(),l={kind:"Connector",metadata:{name:i,kafka_id:n.id},deployment_location:{kind:"addon",cluster_id:a.id},connector_type_id:o.id,kafka:{bootstrap_server:n.bootstrap_server_host||"demo",client_id:null==s?void 0:s.clientId,client_secret:null==s?void 0:s.clientSecret},connector_spec:r};return c.createConnector(!0,l,{cancelToken:t.token}).then((()=>{e({type:"success"})})).catch((t=>{g().isCancel(t)||e({type:"failure",message:t.response.data.reason})})),()=>{t.cancel("Operation canceled by the user.")}}})({accessToken:e.accessToken,basePath:e.basePath,kafka:e.kafka,cluster:e.cluster,connectorType:e.connectorType,configuration:JSON.parse(e.configString),name:e.name,userServiceAccount:e.userServiceAccount})},on:{success:"saved",failure:{target:"valid",actions:We}},tags:["saving"]},saved:{type:"final"}}},{guards:{isAllConfigured:e=>void 0!==e.configString&&void 0===e.configStringError&&e.name.length>0}});function Qe(e){const t=e instanceof Map?function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(e):e;try{return JSON.stringify(t,null,2)}catch(e){return""}}const He=(0,p.createModel)({},{events:{isValid:()=>({}),isInvalid:()=>({}),prev:()=>({}),next:()=>({}),changedStep:({step:e})=>({step:e}),jumpToSelectKafka:()=>({}),jumpToSelectCluster:()=>({}),jumpToSelectConnector:()=>({}),jumpToConfigureConnector:({subStep:e})=>({subStep:e}),jumpToReviewConfiguration:()=>({})},actions:{notifySave:()=>({})}}),Ue=He.createMachine({id:"creationWizard",initial:"selectConnector",context:He.initialContext,states:{selectConnector:{initial:"selecting",invoke:{id:"selectConnectorRef",src:Ie,data:e=>({accessToken:e.accessToken,basePath:e.basePath,selectedConnector:e.selectedConnector}),onDone:{target:"selectKafka",actions:(0,x.assign)(((e,t)=>({selectedConnector:t.data.selectedConnector,connectorConfiguration:!1,activeConfigurationStep:0,isConfigurationValid:!1,configurationSteps:!1})))},onError:".error"},states:{error:{},selecting:{on:{isValid:"valid"}},valid:{on:{isInvalid:"selecting",next:{actions:(0,x.send)("confirm",{to:"selectConnectorRef"})}}}}},selectKafka:{initial:"selecting",invoke:{id:"selectKafkaInstanceRef",src:Ne,data:e=>({accessToken:e.accessToken,basePath:e.basePath,selectedInstance:e.selectedKafkaInstance,request:{page:1,size:10}}),onDone:{target:"selectCluster",actions:(0,x.assign)({selectedKafkaInstance:(e,t)=>t.data.selectedInstance})},onError:".error"},states:{error:{},selecting:{on:{isValid:"valid"}},valid:{on:{isInvalid:"selecting",next:{actions:(0,x.send)("confirm",{to:"selectKafkaInstanceRef"})}}}},on:{prev:"selectConnector"}},selectCluster:{initial:"selecting",invoke:{id:"selectClusterRef",src:pe,data:e=>({accessToken:e.accessToken,basePath:e.basePath,selectedCluster:e.selectedCluster}),onDone:{target:"configureConnector",actions:(0,x.assign)({selectedCluster:(e,t)=>t.data.selectedCluster})},onError:".error"},states:{error:{},selecting:{on:{isValid:"valid"}},valid:{on:{isInvalid:"selecting",next:{actions:(0,x.send)("confirm",{to:"selectClusterRef"})}}}},on:{prev:"selectKafka"}},configureConnector:{initial:"loadConfigurator",states:{loadConfigurator:{invoke:{id:"configuratorLoader",src:"makeConfiguratorLoaderMachine",data:e=>({connector:e.selectedConnector}),onDone:{target:"configure",actions:(0,x.assign)(((e,t)=>({Configurator:t.data.Configurator,configurationSteps:t.data.steps})))},onError:{actions:(e,t)=>console.error(t.data.message)}}},configure:{id:"configure",initial:"configuring",invoke:{id:"configuratorRef",src:Ce,data:e=>({connector:e.selectedConnector,configuration:e.connectorConfiguration,steps:e.configurationSteps||["single step"],activeStep:e.activeConfigurationStep||0,isActiveStepValid:!1!==e.connectorConfiguration}),onDone:{target:"#creationWizard.reviewConfiguration",actions:(0,x.assign)(((e,t)=>({connectorConfiguration:t.data.configuration||!0})))},onError:{actions:(e,t)=>console.error(t.data.message)}},states:{configuring:{on:{isValid:"valid"}},valid:{on:{isInvalid:"configuring",next:{actions:(0,x.send)("next",{to:"configuratorRef"})}}}},on:{prev:[{actions:(0,x.send)("prev",{to:"configuratorRef"}),cond:"areThereSubsteps"},{target:"#creationWizard.selectCluster"}],changedStep:{actions:(0,x.assign)({activeConfigurationStep:(e,t)=>t.step})}}}}},reviewConfiguration:{id:"review",initial:"reviewing",invoke:{id:"reviewRef",src:Je,data:e=>({accessToken:e.accessToken,basePath:e.basePath,kafka:e.selectedKafkaInstance,cluster:e.selectedCluster,connectorType:e.selectedConnector,initialConfiguration:e.connectorConfiguration,name:""}),onDone:{target:"#creationWizard.saved",actions:[(0,x.assign)(((e,t)=>({connectorConfiguration:t.data}))),"notifySave"]},onError:{actions:(e,t)=>console.error(t.data.message)}},states:{reviewing:{on:{isValid:"valid"}},valid:{on:{isInvalid:"reviewing",next:{actions:(0,x.send)("save",{to:"reviewRef"})}}}},on:{prev:"configureConnector"}},saved:{id:"saved",type:"final"}},on:{jumpToSelectConnector:{target:"selectConnector"},jumpToSelectKafka:{target:"selectKafka",cond:"isConnectorSelected"},jumpToSelectCluster:{target:"selectCluster",cond:"isKafkaInstanceSelected"},jumpToConfigureConnector:{target:"configureConnector",cond:"isClusterSelected",actions:(0,x.assign)(((e,t)=>({activeConfigurationStep:t.subStep||0})))},jumpToReviewConfiguration:{target:"reviewConfiguration",cond:"isConnectorConfigured"}}},{guards:{isKafkaInstanceSelected:e=>void 0!==e.selectedKafkaInstance,isClusterSelected:e=>void 0!==e.selectedCluster,isConnectorSelected:(e,t)=>{const n=t.subStep;return n?void 0!==e.selectedConnector&&(void 0!==e.connectorConfiguration||n<=e.activeConfigurationStep):void 0!==e.selectedConnector},isConnectorConfigured:e=>e.configurationSteps?void 0!==e.connectorConfiguration&&!1!==e.connectorConfiguration||e.activeConfigurationStep===e.configurationSteps.length-1&&!0===e.isConfigurationValid:void 0!==e.connectorConfiguration&&!1!==e.connectorConfiguration,areThereSubsteps:e=>e.activeConfigurationStep>0},actions:{notifySave:e=>{e.onSave&&e.onSave()}},services:{makeConfiguratorLoaderMachine:()=>ye}}),Ze=(0,o.createContext)(null),Ye=({children:e,accessToken:t,basePath:n,fetchConfigurator:a,onSave:i})=>{const s=(0,o.useCallback)((()=>ye.withConfig({services:{fetchConfigurator:e=>a(e.connector)}})),[a]),c=(0,u.useInterpret)(Ue,{devTools:!0,context:{accessToken:t,basePath:n,onSave:i},services:{makeConfiguratorLoaderMachine:s}});return r().createElement(Ze.Provider,{value:c},e)},Xe=()=>{const e=(0,o.useContext)(Ze);if(!e)throw new Error("useCreationWizardMachineService() must be used in a child of <CreationWizardMachineProvider>");return e},et=()=>{const e=Xe();return(0,u.useSelector)(e,(0,o.useCallback)((e=>({connectorTypeRef:e.children.selectConnectorRef,kafkaRef:e.children.selectKafkaInstanceRef,clusterRef:e.children.selectClusterRef,reviewRef:e.children.reviewRef})),[]))},tt=()=>{var e;const{clusterRef:t}=et(),n=P(null===(e=t.getSnapshot())||void 0===e?void 0:e.children.paginatedApi),{selectedId:a}=(0,u.useSelector)(t,(0,o.useCallback)((e=>{var t;return{selectedId:null===(t=e.context.selectedCluster)||void 0===t?void 0:t.id}}),[])),r=(0,o.useCallback)((e=>{t.send({type:"selectCluster",selectedCluster:e})}),[t]),i=(0,o.useCallback)((e=>{t.send(Object.assign({type:"api.query"},e))}),[t]);return Object.assign(Object.assign({},n),{selectedId:a,onSelect:r,onQuery:i})},nt=()=>{var e;const{connectorTypeRef:t}=et(),n=P(null===(e=t.getSnapshot())||void 0===e?void 0:e.children.paginatedApi),{selectedId:a}=(0,u.useSelector)(t,(0,o.useCallback)((e=>{var t;return{selectedId:null===(t=e.context.selectedConnector)||void 0===t?void 0:t.id}}),[])),r=(0,o.useCallback)((e=>{t.send({type:"selectConnector",selectedConnector:e})}),[t]),i=(0,o.useCallback)((e=>{t.send(Object.assign({type:"api.query"},e))}),[t]);return Object.assign(Object.assign({},n),{selectedId:a,onSelect:r,onQuery:i})},at=()=>{var e;const{kafkaRef:t}=et(),n=P(null===(e=t.getSnapshot())||void 0===e?void 0:e.children.paginatedApi),{selectedId:a}=(0,u.useSelector)(t,(0,o.useCallback)((e=>{var t;return{selectedId:null===(t=e.context.selectedInstance)||void 0===t?void 0:t.id}}),[])),r=(0,o.useCallback)((e=>{t.send({type:"selectInstance",selectedInstance:e})}),[t]),i=(0,o.useCallback)((e=>{t.send(Object.assign({type:"api.query"},e))}),[t]);return Object.assign(Object.assign({},n),{selectedId:a,onSelect:r,onQuery:i})},ot=({onHelp:e})=>{const{t}=(0,i.useTranslation)();return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.xl,className:(0,z.css)("pf-u-pt-2xl pf-u-pt-3xl-on-md")},r().createElement(l.EmptyStateIcon,{icon:y.ClusterIcon}),r().createElement(l.Title,{headingLevel:"h1",size:l.TitleSizes["4xl"]},t("No OSD Cluster available")),r().createElement(l.EmptyStateBody,null,r().createElement(i.Trans,null,"Development preview instances are available for creation. For help getting started, access the"," ",r().createElement(l.Button,{variant:l.ButtonVariant.link,isSmall:!0,isInline:!0,onClick:e},"quick start guide."))))},rt=({title:e,description:t,children:n})=>r().createElement("div",{className:"pf-l-stack"},r().createElement(l.Level,{className:"pf-u-p-md pf-l-stack__item"},r().createElement(l.Title,{headingLevel:"h2"},e),(()=>{switch(typeof t){case"string":return r().createElement("p",null,t);default:return t}})()),r().createElement("div",{className:"pf-l-stack__item pf-l-stack pf-m-fill"},n));function it(){return(()=>{const{clusterRef:e}=et();return(0,u.useSelector)(e,(0,o.useCallback)((e=>e.matches({root:{api:"ready"}})),[e]))})()?r().createElement(st,null):null}const st=()=>{const{t:e}=(0,i.useTranslation)(),{response:t,selectedId:n,loading:a,error:o,noResults:s,queryEmpty:c,firstRequest:u,onSelect:d,onQuery:p}=tt();return r().createElement(rt,{title:e("OSD cluster"),description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Suscipit error adipisci, ducimus ipsum dicta quo beatae ratione aliquid nostrum animi eos, doloremque laborum quasi sed, vitae ipsa illo delectus! Quos"},(()=>{var e;switch(!0){case u:return r().createElement(te,null);case c:return r().createElement(r().Fragment,null,r().createElement(ct,null),r().createElement(ee,{onClear:()=>p({page:1,size:10})}));case s||o:return r().createElement(ot,{onHelp:function(){throw new Error("Function not implemented.")}});case a:return r().createElement(r().Fragment,null,r().createElement(ct,null),r().createElement(te,null));default:return r().createElement(r().Fragment,null,r().createElement(ct,null),r().createElement("div",{className:"pf-l-stack__item pf-m-fill pf-u-p-md"},r().createElement(l.Gallery,{hasGutter:!0},null===(e=null==t?void 0:t.items)||void 0===e?void 0:e.map((e=>{var t,a,o;return r().createElement(l.Card,{isHoverable:!0,key:e.id,isSelectable:!0,isSelected:n===e.id,onClick:()=>d(e.id)},r().createElement(l.CardHeader,null,r().createElement(l.CardTitle,null,null===(t=e.metadata)||void 0===t?void 0:t.name)),r().createElement(l.CardBody,null,r().createElement(l.DescriptionList,null,r().createElement(l.DescriptionListGroup,null,r().createElement(l.DescriptionListTerm,null,"Owner"),r().createElement(l.DescriptionListDescription,null,null===(a=e.metadata)||void 0===a?void 0:a.owner)),r().createElement(l.DescriptionListGroup,null,r().createElement(l.DescriptionListTerm,null,"Created"),r().createElement(l.DescriptionListDescription,null,null===(o=e.metadata)||void 0===o?void 0:o.created_at)))))})))))}})())},ct=()=>{const{request:e,onQuery:t}=tt(),n=(0,o.useRef)(null),a=$(t,1e3),i=r().createElement(r().Fragment,null,r().createElement(l.ToolbarItem,null,r().createElement(l.InputGroup,null,r().createElement(l.TextInput,{name:"textInput2",id:"textInput2",type:"search","aria-label":"search input example",onChange:t=>a({size:e.size,page:1,name:t}),ref:n}),r().createElement(l.Button,{variant:"control","aria-label":"search button for search input"},r().createElement(y.SearchIcon,null))))),s=r().createElement(r().Fragment,null,r().createElement(l.ToolbarToggleGroup,{toggleIcon:r().createElement(y.FilterIcon,null),breakpoint:"xl"},i),r().createElement(l.ToolbarGroup,{variant:"icon-button-group"},r().createElement(l.ToolbarItem,null,r().createElement(l.Button,{variant:"primary"},"Create Clusters Instance"))),r().createElement(l.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},r().createElement(lt,{isCompact:!0})));return r().createElement(l.Toolbar,{id:"toolbar-group-types",collapseListedFiltersBreakpoint:"xl"},r().createElement(l.ToolbarContent,null,s))},lt=({isCompact:e=!1})=>{const{request:t,response:n,onQuery:a}=tt();return r().createElement(G,{itemCount:(null==n?void 0:n.total)||0,page:t.page,perPage:t.size,onChange:(e,t)=>a({page:e,size:t}),isCompact:e})},ut=({actor:e,Configurator:t})=>{const{activeStep:n,configuration:a,connector:i}=(0,u.useSelector)(e,(0,o.useCallback)((e=>({connector:e.context.connector,activeStep:e.context.activeStep,configuration:e.context.configuration})),[e]));return r().createElement(t,{activeStep:n,configuration:a,connector:i,onChange:(t,n)=>e.send({type:"change",configuration:t,isValid:n})})},dt=({actor:e})=>{const{configuration:t,connector:n}=(0,u.useSelector)(e,(0,o.useCallback)((e=>({connector:e.context.connector,configuration:e.context.configuration})),[e]));return r().createElement(ze,{schema:n.json_schema,configuration:t||{},onChange:(t,n)=>e.send({type:"change",configuration:t,isValid:n})})},pt=()=>{const{t:e}=(0,i.useTranslation)(),t=Xe(),{isLoading:n,hasErrors:a,Configurator:s,configuratorRef:c,hasCustomConfigurator:d}=(0,u.useSelector)(t,(0,o.useCallback)((e=>({isLoading:e.matches({configureConnector:"loadConfigurator"}),hasErrors:e.matches("failure"),hasCustomConfigurator:!1!==e.context.Configurator&&void 0!==e.context.Configurator,configuration:e.context.connectorConfiguration,Configurator:e.context.Configurator,configuratorRef:e.children.configuratorRef})),[t]));return r().createElement(rt,{title:e("Configurations"),description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Suscipit error adipisci, ducimus ipsum dicta quo beatae ratione aliquid nostrum animi eos, doloremque laborum quasi sed, vitae ipsa illo delectus! Quos"},(()=>{switch(!0){case n:return r().createElement(l.EmptyState,null,r().createElement(l.EmptyStateIcon,{variant:"container",component:l.Spinner}),r().createElement(l.Title,{size:"lg",headingLevel:"h4"},e("loading")));case a:return r().createElement(l.EmptyState,null,r().createElement(l.EmptyStateIcon,{icon:y.ExclamationCircleIcon}),r().createElement(l.Title,{size:"lg",headingLevel:"h4"},"Error message"));case d:return r().createElement(r().Suspense,{fallback:null},r().createElement(ut,{actor:c,Configurator:s}));default:return r().createElement(dt,{actor:c})}})())},mt=(e,t)=>({key:e,node:t(e)});function gt(){return(()=>{const{connectorTypeRef:e}=et();return(0,u.useSelector)(e,(0,o.useCallback)((e=>e.matches({root:{api:"ready"}})),[e]))})()?r().createElement(vt,null):null}function vt(){const{t:e}=(0,i.useTranslation)(),{response:t,loading:n,error:a,noResults:o,queryEmpty:s,firstRequest:c,selectedId:u,onSelect:d,onQuery:p}=nt();return r().createElement(rt,{title:e("Connector category"),description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Suscipit error adipisci, ducimus ipsum dicta quo beatae ratione aliquid nostrum animi eos, doloremque laborum quasi sed, vitae ipsa illo delectus! Quos"},(()=>{var e;switch(!0){case c:return r().createElement(te,null);case s:return r().createElement(r().Fragment,null,r().createElement(ft,null),r().createElement(ee,{onClear:()=>p({page:1,size:10})}));case o||a:return r().createElement(Z,null);case n:return r().createElement(r().Fragment,null,r().createElement(ft,null),r().createElement(te,null));default:return r().createElement(r().Fragment,null,r().createElement(ft,null),r().createElement("div",{className:"pf-l-stack__item pf-m-fill pf-u-p-md"},r().createElement(l.Gallery,{hasGutter:!0},null===(e=null==t?void 0:t.items)||void 0===e?void 0:e.map((e=>r().createElement(l.Card,{isHoverable:!0,key:e.id,isSelectable:!0,isSelected:u===e.id,onClick:()=>d(e.id)},r().createElement(l.CardHeader,null,r().createElement(l.CardTitle,null,e.name)),r().createElement(l.CardBody,null,r().createElement(l.DescriptionList,null,r().createElement(l.DescriptionListGroup,null,r().createElement(l.DescriptionListDescription,null,e.description)),r().createElement(l.DescriptionListGroup,null,r().createElement(l.DescriptionListTerm,null,"Version"),r().createElement(l.DescriptionListDescription,null,e.version)),r().createElement(l.DescriptionListGroup,null,r().createElement(l.DescriptionListTerm,null,"ID"),r().createElement(l.DescriptionListDescription,null,e.id))))))))))}})())}const ft=()=>{const{t:e}=(0,i.useTranslation)(),{request:t,onQuery:n}=nt(),[a,s]=(0,o.useState)(!1),c=(0,o.useRef)(null),u=$(n,1e3),{name:d,categories:p=[]}=t.query||{},m=(0,o.useCallback)((()=>n({page:1,size:t.size})),[n,t.size]),g=(0,o.useCallback)((()=>s((e=>!e))),[]),v=(e,a)=>{((e,a,o)=>{n(Object.assign(Object.assign({},t),{query:Object.assign(Object.assign({},t.query||{}),{[e]:a.includes(o)?a.filter((e=>e!==o)):[...a||[],o]})}))})("categories",p,a.key)};(0,o.useEffect)((()=>{c.current&&(c.current.value=d||"")}),[c,d]);const f=[r().createElement(l.SelectOption,{key:"sink",value:"sink"},e("sink")),r().createElement(l.SelectOption,{key:"source",value:"source"},e("source"))],C=r().createElement(r().Fragment,null,r().createElement(l.ToolbarItem,null,r().createElement(l.InputGroup,null,r().createElement(l.TextInput,{name:"name",id:"name",type:"search","aria-label":"filter by connector name",onChange:e=>u({size:t.size,page:1,query:Object.assign(Object.assign({},t.query),{name:e})}),ref:c}),r().createElement(l.Button,{variant:"control","aria-label":"search button for search input"},r().createElement(y.SearchIcon,null)))),r().createElement(l.ToolbarGroup,{variant:"filter-group"},r().createElement(l.ToolbarFilter,{chips:p.map((t=>mt(t,e))),deleteChip:v,deleteChipGroup:()=>{return e="categories",n(Object.assign(Object.assign({},t),{query:Object.assign(Object.assign({},t.query||{}),{[e]:void 0})}));var e},categoryName:"Connector type"},r().createElement(l.Select,{variant:"checkbox","aria-label":"Connector type",onToggle:g,onSelect:(t,n)=>v(0,mt(n,e)),selections:p,isOpen:a,placeholderText:"Connector type"},f)))),E=r().createElement(r().Fragment,null,r().createElement(l.ToolbarToggleGroup,{toggleIcon:r().createElement(y.FilterIcon,null),breakpoint:"xl"},C),r().createElement(l.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},r().createElement(Ct,{isCompact:!0})));return r().createElement(l.Toolbar,{id:"toolbar-group-types",collapseListedFiltersBreakpoint:"xl",clearAllFilters:m},r().createElement(l.ToolbarContent,null,E))},Ct=({isCompact:e=!1})=>{const{request:t,response:n,onQuery:a}=nt();return r().createElement(G,{itemCount:(null==n?void 0:n.total)||0,page:t.page,perPage:t.size,onChange:(e,t)=>a({page:e,size:t}),isCompact:e})};var Et=n(29355);const ht=({error:e})=>r().createElement("div",{role:"alert"},r().createElement("p",null,"Something went wrong:"),r().createElement("pre",null,e.message)),yt=({children:e})=>r().createElement(Et.ErrorBoundary,{FallbackComponent:ht,resetKeys:[Date.now()]},e),bt=({onHelp:e})=>{const{t}=(0,i.useTranslation)();return r().createElement(l.EmptyState,{variant:l.EmptyStateVariant.xl,className:(0,z.css)("pf-u-pt-2xl pf-u-pt-3xl-on-md")},r().createElement(l.EmptyStateIcon,{icon:y.SpaceShuttleIcon}),r().createElement(l.Title,{headingLevel:"h1",size:l.TitleSizes["4xl"]},t("No Kafka instance available")),r().createElement(l.EmptyStateBody,null,r().createElement(i.Trans,null,"Development preview instances are available for creation. For help getting started, access the"," ",r().createElement(l.Button,{variant:l.ButtonVariant.link,isSmall:!0,isInline:!0,onClick:e},"quick start guide."))))},St=()=>(()=>{const{kafkaRef:e}=et();return(0,u.useSelector)(e,(0,o.useCallback)((e=>e.matches({root:{api:"ready"}})),[e]))})()?r().createElement(Tt,null):null,Tt=()=>{const{t:e}=(0,i.useTranslation)(),{response:t,loading:n,error:a,selectedId:o,noResults:s,queryEmpty:c,firstRequest:u,onSelect:d,onQuery:p}=at();return r().createElement(rt,{title:e("Kafka instance"),description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Suscipit error adipisci, ducimus ipsum dicta quo beatae ratione aliquid nostrum animi eos, doloremque laborum quasi sed, vitae ipsa illo delectus! Quos"},(()=>{var e;switch(!0){case u:return r().createElement(te,null);case c:return r().createElement(r().Fragment,null,r().createElement(kt,null),r().createElement(ee,{onClear:()=>p({page:1,size:10})}));case s||a:return r().createElement(bt,{onHelp:function(){throw new Error("Function not implemented.")}});case n:return r().createElement(r().Fragment,null,r().createElement(kt,null),r().createElement(te,null));default:return r().createElement(r().Fragment,null,r().createElement(kt,null),r().createElement("div",{className:"pf-l-stack__item pf-m-fill pf-u-p-md"},r().createElement(l.Gallery,{hasGutter:!0},null===(e=null==t?void 0:t.items)||void 0===e?void 0:e.map((e=>r().createElement(l.Card,{isHoverable:!0,key:e.id,isSelectable:!0,isSelected:o===e.id,onClick:()=>d(e.id)},r().createElement(l.CardHeader,null,r().createElement(l.CardTitle,null,e.name)),r().createElement(l.CardBody,null,r().createElement(l.DescriptionList,null,r().createElement(l.DescriptionListGroup,null,r().createElement(l.DescriptionListTerm,null,"Region"),r().createElement(l.DescriptionListDescription,null,e.region)),r().createElement(l.DescriptionListGroup,null,r().createElement(l.DescriptionListTerm,null,"Owner"),r().createElement(l.DescriptionListDescription,null,e.owner)),r().createElement(l.DescriptionListGroup,null,r().createElement(l.DescriptionListTerm,null,"Created"),r().createElement(l.DescriptionListDescription,null,e.created_at))))))))))}})())},kt=()=>{const{t:e}=(0,i.useTranslation)(),{request:t,onQuery:n}=at(),[a,s]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),[d,p]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1),[v,f]=(0,o.useState)("Name"),C=(0,o.useCallback)((()=>s((e=>!e))),[]),E=(0,o.useCallback)((()=>u((e=>!e))),[]),h=(0,o.useCallback)((()=>p((e=>!e))),[]),b=(0,o.useCallback)((()=>g((e=>!e))),[]),S=$(n,1e3),{name:T,owner:k,cloudProviders:I=[],regions:x=[],statuses:w=[]}=t.query||{},P=(0,o.useCallback)((()=>n({page:1,size:t.size})),[n,t.size]),q=(0,o.useRef)(null),N=(0,o.useRef)(null),O=(e,a,o)=>n(Object.assign(Object.assign({},t),{query:Object.assign(Object.assign({},t.query||{}),{[e]:a.includes(o)?a.filter((e=>e!==o)):[...a||[],o]})})),D=(e,t)=>{O("statuses",w,t.key)},B=(e,t)=>{O("cloudProviders",I,t.key)},A=(e,t)=>{O("regions",x,t.key)},R=e=>n(Object.assign(Object.assign({},t),{query:Object.assign(Object.assign({},t.query||{}),{[e]:void 0})})),j=(0,o.useCallback)((e=>{const t=(null==e?void 0:e.target).innerText;f(t),g((e=>!e))}),[]);(0,o.useEffect)((()=>{q.current&&(q.current.value=T||""),N.current&&(N.current.value=k||"")}),[q,T,k]);const L=It.map((({value:e,label:t})=>r().createElement(l.DropdownItem,{key:e},t))),z=wt.filter((e=>"preparing"!==e.value)).map((({value:e,label:t})=>r().createElement(l.SelectOption,{key:e,value:e},t))),F=xt.map((({value:e,label:t})=>r().createElement(l.SelectOption,{key:e,value:e},t))),_=Pt.map((({value:e,label:t})=>r().createElement(l.SelectOption,{key:e,value:e},t))),V=r().createElement(l.ToolbarItem,null,r().createElement(l.Dropdown,{onSelect:e=>j(e),position:l.DropdownPosition.left,toggle:r().createElement(l.DropdownToggle,{onToggle:b,style:{width:"100%"}},r().createElement(y.FilterIcon,{size:"sm"})," ",v),isOpen:m,dropdownItems:L,style:{width:"100%"}})),G=r().createElement(r().Fragment,null,r().createElement(l.ToolbarGroup,{variant:"filter-group"},V,r().createElement(l.ToolbarFilter,{chips:w.map((t=>mt(t,e))),deleteChip:D,deleteChipGroup:()=>R("statuses"),categoryName:e("status"),showToolbarItem:v===e("status")},r().createElement(l.Select,{variant:"checkbox","aria-label":e("status"),onToggle:C,onSelect:(t,n)=>D(0,mt(n,e)),selections:w,isOpen:a,placeholderText:e("Filter by status")},z)),r().createElement(l.ToolbarFilter,{chips:I.map((t=>mt(t,e))),deleteChip:B,deleteChipGroup:()=>R("cloudProviders"),categoryName:e("CloudProvider"),showToolbarItem:v===e("CloudProvider")},r().createElement(l.Select,{variant:"checkbox","aria-label":e("CloudProvider"),onToggle:E,onSelect:(t,n)=>B(0,mt(n,e)),selections:I,isOpen:c,placeholderText:e("Filter by cloud provider")},F)),r().createElement(l.ToolbarFilter,{chips:x.map((t=>mt(t,e))),deleteChip:A,deleteChipGroup:()=>R("regions"),categoryName:e("region"),showToolbarItem:v===e("region")},r().createElement(l.Select,{variant:"checkbox","aria-label":e("region"),onToggle:h,onSelect:(t,n)=>A(0,mt(n,e)),selections:x,isOpen:d,placeholderText:e("Filter by region")},_)),r().createElement(l.ToolbarFilter,{chips:T?[T]:[],deleteChip:()=>R("name"),categoryName:e("name")},v===e("name")&&r().createElement(l.ToolbarItem,null,r().createElement(l.InputGroup,null,r().createElement(l.TextInput,{name:e("name"),id:e("name"),type:"search",placeholder:e("nameSearchPlaceholder"),"aria-label":e("nameSearchPlaceholder"),onChange:e=>S({size:t.size,page:1,query:Object.assign(Object.assign({},t.query),{name:e})}),ref:q}),r().createElement(l.Button,{variant:"control","aria-label":"search button for name input",onClick:()=>{var e;return n({size:t.size,page:1,query:Object.assign(Object.assign({},t.query),{name:(null===(e=q.current)||void 0===e?void 0:e.value)||""})})}},r().createElement(y.SearchIcon,null))))),r().createElement(l.ToolbarFilter,{chips:k?[k]:[],deleteChip:()=>R("owner"),categoryName:e("owner")},v===e("owner")&&r().createElement(l.ToolbarItem,null,r().createElement(l.InputGroup,null,r().createElement(l.TextInput,{name:e("owner"),id:e("owner"),type:"search",placeholder:e("ownerSearchPlaceholder"),"aria-label":e("ownerSearchPlaceholder"),onChange:e=>S({size:t.size,page:1,query:Object.assign(Object.assign({},t.query),{owner:e})}),ref:N}),r().createElement(l.Button,{variant:"control","aria-label":"search button for owner input",onClick:()=>{var e;return n({size:t.size,page:1,query:Object.assign(Object.assign({},t.query),{owner:(null===(e=N.current)||void 0===e?void 0:e.value)||""})})}},r().createElement(y.SearchIcon,null))))))),M=r().createElement(r().Fragment,null,r().createElement(l.ToolbarToggleGroup,{toggleIcon:r().createElement(y.FilterIcon,null),breakpoint:"xl"},G),r().createElement(l.ToolbarGroup,{variant:"icon-button-group"},r().createElement(l.ToolbarItem,null,r().createElement(l.Button,{variant:"primary"},"Create Kafka Instance"))),r().createElement(l.ToolbarItem,{variant:"pagination",alignment:{default:"alignRight"}},r().createElement(qt,{isCompact:!0})));return r().createElement(l.Toolbar,{id:"toolbar-group-types",collapseListedFiltersBreakpoint:"xl",clearAllFilters:P},r().createElement(l.ToolbarContent,null,M))},It=[{value:"name",label:"Name"},{value:"status",label:"Status"},{value:"cloudprovider",label:"Cloud Provider"},{value:"region",label:"Region"},{value:"owner",label:"Owner"}],xt=[{value:"aws",label:"Amazon Web Services"}],wt=[{value:"ready",label:"Ready"},{value:"failed",label:"Failed"},{value:"accepted",label:"Creation pending"},{value:"provisioning",label:"Creation in progress"},{value:"preparing",label:"Creation in progress"},{value:"deprovision",label:"Deletion in progress"}],Pt=[{value:"us-east-1",label:"US East, N. Virginia"}],qt=({isCompact:e=!1})=>{const{request:t,response:n,onQuery:a}=at();return r().createElement(G,{itemCount:(null==n?void 0:n.total)||0,page:t.page,perPage:t.size,onChange:(e,t)=>a({page:e,size:t}),isCompact:e})};function Nt(){const{t:e}=(0,i.useTranslation)(),{name:t,serviceAccount:n,configString:a,configStringError:s,configStringWarnings:c,isSaving:d,savingError:p,onSetName:m,onSetServiceAccount:g,onUpdateConfiguration:v}=(()=>{const{reviewRef:e}=et(),{name:t,serviceAccount:n,configString:a,configStringError:r,configStringWarnings:i,isSaving:s,savingError:c}=(0,u.useSelector)(e,(0,o.useCallback)((e=>({name:e.context.name,serviceAccount:e.context.userServiceAccount,configString:e.context.configString,configStringError:e.context.configStringError,configStringWarnings:e.context.configStringWarnings,isSaving:e.hasTag("saving"),savingError:e.context.savingError})),[]));return{name:t,serviceAccount:n,configString:a,configStringError:r,configStringWarnings:i,isSaving:s,savingError:c,onSetName:(0,o.useCallback)((t=>{e.send({type:"setName",name:t})}),[e]),onSetServiceAccount:(0,o.useCallback)((t=>{e.send({type:"setServiceAccount",serviceAccount:t})}),[e]),onUpdateConfiguration:(0,o.useCallback)((t=>{e.send({type:"updateConfiguration",data:t||""})}),[e])}})();return r().createElement(rt,{title:e("Review"),description:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Suscipit error adipisci, ducimus ipsum dicta quo beatae ratione aliquid nostrum animi eos, doloremque laborum quasi sed, vitae ipsa illo delectus! Quos"},r().createElement(l.Card,null,r().createElement(l.CardBody,null,r().createElement(l.Form,null,p&&r().createElement(l.FormAlert,null,r().createElement(l.Alert,{variant:"danger",title:p,"aria-live":"polite",isInline:!0})),r().createElement(l.FormGroup,{label:"Name",isRequired:!0,fieldId:"name",helperText:"Please provide a unique name for the connector"},r().createElement(l.TextInput,{isDisabled:d,value:t,onChange:m,id:"name"})),r().createElement(l.FormGroup,{label:"Service Account",isRequired:!0,fieldId:"service-account"},r().createElement(l.Radio,{isDisabled:d,isChecked:void 0===n,name:"service-account",onChange:()=>g(void 0),label:"Automatically create a Service Account for this connector",id:"service-account-automatic",value:"automatic"}),r().createElement(l.Radio,{isDisabled:d,isChecked:void 0!==n,name:"service-account",onChange:()=>g({clientId:"",clientSecret:""}),label:"Provide the credentials manually",id:"service-account-user",value:"user"}),void 0!==n&&r().createElement(r().Fragment,null,r().createElement(l.FormGroup,{label:"Client ID",isRequired:!0,fieldId:"clientId"},r().createElement(l.TextInput,{isDisabled:d,value:n.clientId,onChange:e=>g(Object.assign(Object.assign({},n),{clientId:e})),id:"clientId"})),r().createElement(l.FormGroup,{label:"Client Secret",isRequired:!0,fieldId:"clientSecret"},r().createElement(l.TextInput,{isDisabled:d,value:n.clientSecret,onChange:e=>g(Object.assign(Object.assign({},n),{clientSecret:e})),id:"clientSecret"})))),r().createElement(l.FormGroup,{label:"Configuration",isRequired:!0,fieldId:"configuration",helperText:"Please review the configuration data.",helperTextInvalid:s,validated:void 0!==s?"error":void 0!==c?"warning":"default"},r().createElement(l.TextArea,{value:a,onChange:v,autoResize:!0}),r().createElement(l.AlertGroup,null,null==c?void 0:c.map(((e,t)=>r().createElement(l.Alert,{key:t,title:e,variant:"warning",isInline:!0})))))))))}var Ot=n(64616);function Dt(e){const t=[];for(const n of e)if(n.steps)for(const e of n.steps)t.push(e);else t.push(n);return t}class Bt extends o.Component{constructor(e){super(e),this.handleKeyClicks=e=>{e.keyCode===l.KEY_CODES.ESCAPE_KEY&&(this.state.isNavOpen?this.setState({isNavOpen:!this.state.isNavOpen}):this.props.isOpen&&this.props.onClose&&this.props.onClose())},this.getFlattenedSteps=()=>{const{steps:e}=this.props;return Dt(e)},this.getFlattenedStepsIndex=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n].name===t)return n+1;return 0},this.initSteps=e=>{for(let t=0;t<e.length;t++){if(e[t].steps)for(let n=0;n<e[t].steps.length;n++)e[t].steps[n]=Object.assign({canJumpTo:!0},e[t].steps[n]);e[t]=Object.assign({canJumpTo:!0},e[t])}return e},this.getElement=e=>"function"==typeof e?e():e||document.body;const t=Bt.currentId++;this.titleId=e.titleId||`pf-wizard-title-${t}`,this.descriptionId=e.descriptionId||`pf-wizard-description-${t}`,this.state={isNavOpen:!1}}componentDidMount(){const e="undefined"!=typeof document?document.body:null;e&&e.addEventListener("keydown",this.handleKeyClicks,!1)}componentWillUnmount(){const e="undefined"!=typeof document&&document.body||null;e&&e.removeEventListener("keydown",this.handleKeyClicks,!1)}render(){const e=this.props,{width:t,height:n,title:o,description:i,onClose:s,onSave:c,onBack:u,onNext:d,onGoToStep:p,goToStep:m,goToStepById:g,goToStepByName:v,className:f,steps:C,currentStep:E,nextButtonText:h="Next",backButtonText:y="Back",cancelButtonText:b="Cancel",hideClose:S,closeButtonAriaLabel:T="Close",navAriaLabel:k,navAriaLabelledBy:I,mainAriaLabel:x,mainAriaLabelledBy:w,hasNoBodyPadding:P,footer:q,appendTo:N,isOpen:O,titleId:D,descriptionId:B}=e,A=(0,a.__rest)(e,["width","height","title","description","onClose","onSave","onBack","onNext","onGoToStep","goToStep","goToStepById","goToStepByName","className","steps","currentStep","nextButtonText","backButtonText","cancelButtonText","hideClose","closeButtonAriaLabel","navAriaLabel","navAriaLabelledBy","mainAriaLabel","mainAriaLabelledBy","hasNoBodyPadding","footer","appendTo","isOpen","titleId","descriptionId"]),R=this.getFlattenedSteps(),j=R.length<E?R.length:E,L=R[j-1],F=this.initSteps(C),_=L===R[0],V=!L||void 0===L.enableNext||L.enableNext,G={goToStepById:g,goToStepByName:v,onNext:d,onBack:u,onClose:s,activeStep:L},M=Object.assign(Object.assign({},n?{height:n}:{}),t?{width:t}:{}),K=r().createElement(l.WizardContextProvider,{value:G},r().createElement("div",Object.assign({},A,{className:(0,z.css)(Ot.Z.wizard,L&&L.isFinishedStep&&"pf-m-finished",f),style:Object.keys(M).length?M:void 0}),o&&r().createElement(l.WizardHeader,{titleId:this.titleId,descriptionId:this.descriptionId,onClose:s,title:o,description:i,closeButtonAriaLabel:T,hideClose:S}),r().createElement(l.WizardToggle,{mainAriaLabel:x,isInPage:void 0===O,mainAriaLabelledBy:(o||w)&&(w||this.titleId),isNavOpen:this.state.isNavOpen,onNavToggle:e=>this.setState({isNavOpen:e}),nav:e=>{const t={isOpen:e,"aria-label":k,"aria-labelledby":(o||I)&&(I||this.titleId)};return r().createElement(l.WizardNav,Object.assign({},t),F.map(((e,n)=>{if(e.isFinishedStep)return null;let a,o;if(e.steps){let i=!1,s=!1;for(const t of e.steps)L.name===t.name&&(i=!0),t.canJumpTo&&(s=!0);return o=this.getFlattenedStepsIndex(R,e.steps[0].name),r().createElement(l.WizardNavItem,{key:n,content:e.name,isCurrent:i,isDisabled:!s,step:o,onNavItemClick:m},r().createElement(l.WizardNav,Object.assign({},t,{returnList:!0}),e.steps.map(((e,t)=>e.isFinishedStep?null:(o=this.getFlattenedStepsIndex(R,e.name),a=e.canJumpTo,r().createElement(l.WizardNavItem,{key:`child_${t}`,content:e.name,isCurrent:L.name===e.name,isDisabled:!a,step:o,onNavItemClick:m}))))))}return o=this.getFlattenedStepsIndex(R,e.name),a=e.canJumpTo,r().createElement(l.WizardNavItem,Object.assign({},e.stepNavItemProps,{key:n,content:e.name,isCurrent:L.name===e.name,isDisabled:!a,step:o,onNavItemClick:m}))})))},steps:C,activeStep:L,hasNoBodyPadding:P},q||r().createElement("footer",{className:(0,z.css)(Ot.Z.wizardFooter)},r().createElement(l.Button,{variant:l.ButtonVariant.primary,type:"submit",onClick:d,isDisabled:!V},L&&L.nextButtonText||h),!L.hideBackButton&&r().createElement(l.Button,{variant:l.ButtonVariant.secondary,onClick:u,className:(0,z.css)(_&&"pf-m-disabled")},y),!L.hideCancelButton&&r().createElement("div",{className:Ot.Z.wizardFooterCancel},r().createElement(l.Button,{variant:l.ButtonVariant.link,onClick:s},b))))));return void 0!==O?r().createElement(l.Modal,{width:null!==t?t:void 0,isOpen:O,variant:l.ModalVariant.large,"aria-labelledby":this.titleId,"aria-describedby":this.descriptionId,showClose:!1,hasNoBodyWrapper:!0},K):K}}Bt.displayName="Wizard",Bt.currentId=0,Bt.defaultProps={title:void 0,description:"",className:"",nextButtonText:"Next",backButtonText:"Back",cancelButtonText:"Cancel",hideClose:!1,closeButtonAriaLabel:"Close",navAriaLabel:void 0,navAriaLabelledBy:void 0,mainAriaLabel:void 0,mainAriaLabelledBy:void 0,hasNoBodyPadding:!1,onGoToStep:void 0,width:void 0,height:void 0,footer:void 0,appendTo:void 0,isOpen:void 0};const At=({onClose:e})=>{const{t}=(0,i.useTranslation)(),n=Xe(),[a,s]=(0,u.useActor)(n),c=function(){const{t:e}=(0,i.useTranslation)(),t=Xe(),{isActive:n,canJumpTo:a,enableNext:s}=(0,u.useSelector)(t,(0,o.useCallback)((e=>({isActive:e.matches("selectKafka"),canJumpTo:Ue.transition(e,"jumpToSelectKafka").changed||e.matches("selectKafka"),enableNext:Ue.transition(e,"next").changed})),[t]));return{name:e("Kafka instance"),isActive:n,component:r().createElement(yt,null,r().createElement(St,null)),canJumpTo:a,enableNext:s}}(),l=function(){const{t:e}=(0,i.useTranslation)(),t=Xe(),{isActive:n,activeStep:a,canJumpTo:s,canJumpToStep:c,enableNext:l,steps:d}=(0,u.useSelector)(t,(0,o.useCallback)((e=>({isActive:e.matches("configureConnector"),canJumpTo:Ue.transition(e,"jumpToConfigureConnector").changed||e.matches("configureConnector"),enableNext:Ue.transition(e,"next").changed,steps:e.context.configurationSteps,activeStep:e.context.activeConfigurationStep,canJumpToStep:t=>Ue.transition(e,{type:"jumpToConfigureConnector",subStep:t}).changed})),[t]));return{name:e("Configurations"),isActive:n,canJumpTo:s,steps:d?d.map(((e,t)=>({name:e,isActive:n&&a===t,canJumpTo:c(t),enableNext:l,component:r().createElement(yt,null,r().createElement(pt,null))}))):void 0,enableNext:l,component:r().createElement(yt,null,r().createElement(pt,null))}}();if("saved"===a.value)return null;const d=[{name:t("Connector category"),isActive:a.matches("selectConnector"),component:r().createElement(yt,null,r().createElement(gt,null)),canJumpTo:Ue.transition(a,"jumpToSelectConnector").changed||a.matches("selectConnector"),enableNext:Ue.transition(a,"next").changed},c,{name:t("OSD cluster"),isActive:a.matches("selectCluster"),component:r().createElement(yt,null,r().createElement(it,null)),canJumpTo:Ue.transition(a,"jumpToSelectCluster").changed||a.matches("selectCluster"),enableNext:Ue.transition(a,"next").changed},l,{name:t("Review"),isActive:a.matches("reviewConfiguration"),component:r().createElement(yt,null,r().createElement(Nt,null)),canJumpTo:Ue.transition(a,"jumpToReviewConfiguration").changed||a.matches("reviewConfiguration"),enableNext:Ue.transition(a,"next").changed,nextButtonText:"Create connector"}],p=Dt(d),m=p.reduceRight(((e,t,n)=>t.isActive&&n>e?n:e),-1)+1;return r().createElement(Bt,{className:"cos",steps:d,currentStep:m,onNext:()=>s("next"),onBack:()=>s("prev"),onClose:e,onSave:()=>!1,goToStep:e=>{switch(e){case 1:s("jumpToSelectConnector");break;case 2:s("jumpToSelectKafka");break;case 3:s("jumpToSelectCluster");break;case p.length:s("jumpToReviewConfiguration");break;default:e<p.length&&s({type:"jumpToConfigureConnector",subStep:e-4})}},goToStepById:(...e)=>console.log("goToStepById",e),goToStepByName:(...e)=>console.log("goToStepByName",e),hasNoBodyPadding:!0})},Rt=(e,t)=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){const o=Promise.resolve({steps:!1,Configurator:!1});return new Promise((r=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){try{const o=yield jt(t,e);yield Lt(o.remoteEntry),r(function(e,t){return(0,a.__awaiter)(this,void 0,void 0,(function*(){yield n.I("default");const a=window[e];yield a.init(n.S.default);const o=(yield window[e].get(t))();return console.log(`loaded federated configurator configuration from ${e}`,o),o.default}))}(o.scope,o.module))}catch(e){r(o)}}))))})),jt=(e,t)=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){console.log("Fetched federated configurator remotes configuration",e);const n=e[t.id];return console.log(`Candidate configuration for "${t.id}"`,n),n?(a=n)&&a.remoteEntry&&"string"==typeof a.remoteEntry&&a.scope&&"string"==typeof a.scope&&a.module&&"string"==typeof a.module?(console.log("Found a generic configuration for the connector",n),n):(console.log("Couldn't find a valid configuration for the requested connector"),Promise.reject()):(console.log("Couldn't find any configuration for the requested connector"),Promise.reject());var a})),Lt=e=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){return new Promise(((t,n)=>{const a=document.createElement("script");a.src=e,a.type="text/javascript",a.async=!0,a.onload=()=>{console.log(`Dynamic federated module loaded: ${e}`),document.head.removeChild(a),t()},a.onerror=()=>{console.error(`Dynamic federated module Error: ${e}`),console.log(`Dynamic federated module Removed: ${e}`),document.head.removeChild(a),n()},document.head.appendChild(a)}))}));const zt=({onSave:e,onClose:t})=>{const{t:n}=(0,i.useTranslation)(),a=(0,c.useConfig)(),s=(0,c.useBasename)(),{basePath:u,getToken:d}=H(),[p,m]=(0,o.useState)(!1),g=()=>m(!1);return r().createElement(r().Fragment,null,r().createElement(l.PageSection,{variant:"light",hasShadowBottom:!0},r().createElement(l.Breadcrumb,null,r().createElement(l.BreadcrumbItem,{to:null==s?void 0:s.getBasename()},n("Connectors")),r().createElement(l.BreadcrumbItem,{isActive:!0},n("Create connector"))),r().createElement(l.Level,{className:"pf-u-pt-md pf-u-pb-md"},r().createElement(l.Title,{headingLevel:"h1"},n("Create connector")))),r().createElement(l.PageSection,{padding:{default:"noPadding"},style:{zIndex:0},type:"wizard"},r().createElement(Ye,{accessToken:d,basePath:u,fetchConfigurator:e=>Rt(e,(null==a?void 0:a.cos.configurators)||{}),onSave:e},r().createElement(At,{onClose:()=>m(!0)}),r().createElement(l.Modal,{title:n("Leave page?"),variant:"small",isOpen:p,onClose:g,actions:[r().createElement(l.Button,{key:"confirm",variant:"primary",onClick:t},"Confirm"),r().createElement(l.Button,{key:"cancel",variant:"link",onClick:g},"Cancel")]},n("Changes you have made will be lost and no connector will be created.")))))},Ft=({getToken:e,apiBasepath:t})=>{const{t:n}=(0,i.useTranslation)(),a=(0,c.useAlert)(),l=(0,s.useHistory)(),u=(0,o.useCallback)((()=>l.push("/")),[l]),d=(0,o.useCallback)((()=>l.push("/create-connector")),[l]),p=(0,o.useCallback)((()=>{null==a||a.addAlert({id:"connector-created",variant:c.AlertVariant.success,title:n("wizard.creation-success")}),u()}),[a,u,n]);return r().createElement(Q,{getToken:e,basePath:t},r().createElement(s.Switch,null,r().createElement(s.Route,{path:"/",exact:!0},r().createElement(ne,{onCreateConnector:d})),r().createElement(s.Route,{path:"/create-connector"},r().createElement(zt,{onSave:p,onClose:u}))))};var _t=n(72633),Vt=n(4958),Gt=n(26213),Mt=n.n(Gt),Kt=n(16486),$t=n.n(Kt),Wt=n(73337),Jt=n.n(Wt);const Qt={en:Vt.Z};Mt().use(Jt()).use($t()).use(i.initReactI18next).init({backend:{loadPath:`${n.p}locales/{{lng}}/{{ns}}.json`},fallbackLng:"en",load:"all",debug:!0,ns:["public"],defaultNS:"public",nsSeparator:":",keySeparator:".",interpolation:{defaultVariables:void 0,escapeValue:!1,format:(e,t,n)=>{if((0,_t.isDate)(e)&&t){const a=n?Qt[n]:Vt.Z;return"short"===t?(0,_t.format)(e,"P",{locale:a}):"long"===t?(0,_t.format)(e,"PPPP",{locale:a}):"relative"===t?(0,_t.formatRelative)(e,new Date,{locale:a}):"ago"===t?(0,_t.formatDistance)(e,new Date,{locale:a,addSuffix:!0}):(0,_t.format)(e,t,{locale:a})}return e}}});const Ht=Mt(),Ut=()=>{const e=(0,c.useConfig)(),t=(0,c.useAuth)(),n=(0,c.useBasename)();return r().createElement(i.I18nextProvider,{i18n:Ht},r().createElement(r().Suspense,{fallback:r().createElement(te,null)},r().createElement(s.BrowserRouter,{basename:null==n?void 0:n.getBasename()},r().createElement(Ft,{getToken:()=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){return(yield null==t?void 0:t.kas.getToken())||""})),apiBasepath:(null==e?void 0:e.cos.apiBasePath)||""}))))},Zt=Ut}}]);
//# sourceMappingURL=375.f9aed1df.js.map